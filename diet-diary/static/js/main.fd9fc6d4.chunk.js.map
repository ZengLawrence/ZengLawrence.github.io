{"version":3,"sources":["model/calorieFunction.ts","model/servingFunction.ts","app/selectors.ts","model/Food.ts","features/day-page/dateSlice.ts","features/day-page/editModeSlice.ts","features/day-page/mealStatesSlice.ts","features/day-page/AddMealButton.ts","model/Target.ts","components/backgroundColor.ts","components/badge/index.tsx","components/FoodGroupLegend.tsx","components/summary/TargetActionIcon.tsx","components/day-page/Footer.tsx","features/day-page/Footer.ts","features/day-page/DoneButton.ts","features/day-page/EditButton.ts","features/day-page/NewDayButton.ts","app/hooks.ts","features/download/exportCsv.ts","components/ButtonVariant.ts","components/day-page/HeaderButtons.tsx","features/download/useDownload.tsx","features/day-page/HeaderButtons.ts","features/target/targetStateSlice.ts","features/target/ChangeTargetButton.ts","features/target/GenderToggle.ts","components/target/GenderToggle.tsx","components/panels/FoodGroupServingGoalBadgePanel.tsx","components/target/TargetDropDown.tsx","features/target/TargetDropDown.ts","features/target/TargetLabel.ts","components/target/TargetLabel.tsx","features/target/NoTargetPanel.ts","components/target/NoTargetPanel.tsx","features/target/TargetFoodGroupServingGoalBadgePanel.ts","features/target/TargetCaloriePanel.ts","components/target/TargetCaloriePanel.tsx","features/target/TargetPanel.ts","components/target/TargetPanel.tsx","features/day-page/Header.ts","components/day-page/Header.tsx","components/summary/CalorieSummary.tsx","features/summary/CalorieSummary.ts","features/summary/TargetActionIcon.ts","components/summary/ServingCell.tsx","features/summary/ServingCell.ts","components/summary/ServingSummary.tsx","features/summary/ServingSummary.ts","components/summary/TotalSummary.tsx","features/summary/CalorieDifference.ts","features/summary/ServingDifference.ts","components/summary/DifferenceSummary.tsx","features/day-page/summaryTypeSlice.ts","features/summary/TabbedSummary.ts","components/summary/TabbedSummary.tsx","features/day-page/Summary.ts","components/day-page/Summary.tsx","components/BlueStar.tsx","components/BestChoiceLegend.tsx","components/panels/FoodGroupServingBadgePanel.tsx","components/CalorieSpan.tsx","components/input-form/DisplayText.tsx","components/input-form/FoodDescriptionInputControl.tsx","components/input-form/ServingInputControl.tsx","features/suggestions/convert/ConvertFunctions.ts","features/suggestions/convert/ParserFunctions.ts","features/suggestions/convert/standard-unit/SizeUnit.ts","features/suggestions/convert/standard-unit/UnknownUnit.ts","features/suggestions/convert/standard-unit/index.ts","features/suggestions/convert/variable-unit/DiameterUnit.ts","features/suggestions/convert/variable-unit/index.ts","features/suggestions/convert/index.ts","generated/parser/AmountLexer.js","generated/parser/AmountListener.js","generated/parser/AmountParser.js","features/suggestions/parser/amount.js","features/suggestions/parser/DecomposedAmount.ts","generated/parser/FoodDescriptionLexer.js","generated/parser/FoodDescriptionListener.js","generated/parser/FoodDescriptionParser.js","features/suggestions/parser/foodDescription.js","features/suggestions/parser/DecomposedFoodDescription.ts","features/suggestions/Suggestion.ts","features/suggestions/portion/portions.ts","features/suggestions/serving/servings.ts","features/suggestions/search/unitMiniSearch.ts","features/suggestions/search/foodNameMiniSearch.ts","features/suggestions/search/foodNameSearch.ts","features/suggestions/search/autoCompletion.ts","features/suggestions/generate/calculateServing.ts","features/suggestions/generate/autoSuggestion.ts","features/suggestions/generate/generateSuggestion.ts","components/input-form/useFoodInputFormStateReducer.ts","components/input-form/FoodInputForm.tsx","features/input-form/AddFoodInputForm.ts","features/input-form/UpdateFoodInputForm.ts","features/meal-card/EditFoodButton.ts","features/meal-card/NewFoodButton.ts","components/panels/CalorieServingPanel.tsx","features/name-food/FoodCalorieServingPanel.ts","components/name-food-form/useNameFoodFormReducer.ts","model/Selectable.ts","components/name-food-form/NameFoodDescriptionForm.tsx","features/name-food/NameFoodDescriptionForm.ts","components/FoodItem.tsx","features/meal-card/FoodListGroupItems.ts","components/meal-card/FoodListGroupItems.tsx","features/meal-card/DeleteButton.ts","features/meal-card/DoneButton.ts","features/meal-card/EditButton.ts","features/meal-card/NameButton.ts","features/meal-card/MealButtons.ts","components/meal-card/MealButtons.tsx","features/meal-card/MealCalorieServingPanel.ts","features/meal-card/MealCardHeader.ts","components/meal-card/MealCardHeader.tsx","features/day-page/DayPage.ts","components/day-page/DayPage.tsx","App.tsx","reportWebVitals.ts","app/reducers.ts","app/store.ts","app/localStorage.ts","index.tsx","features/suggestions/parser/CaseChangingStream.js"],"names":["FOOD_GROUP_CALORIES","getCalories","foodGroup","_","get","calcServingCalories","serving","sum","map","keys","calcFoodCalories","food","calcMealCalories","meal","foods","calcCaloriesTotal","meals","displayCalorieValue","val","numeral","format","_add","n1","n2","defaultTo","add","s1","s2","vegetable","fruit","carbohydrate","proteinDiary","fat","sweet","calcFoodsServingSummary","reduce","calcServingSummary","calcMealsServingSummary","_minus","calcServingDifference","servingGoal","displayServingValue","oneServingOf","set","dateSelector","state","date","editModeSelector","editMode","mealStatesSelector","mealStates","summaryTypeSelector","summaryType","targetStateSelector","targetState","editTargetSelector","createSelector","editTarget","targetSelector","target","diarySelector","mealsSelector","totalCaloriesSelector","totalServingSelector","calorieDifferenceSelector","calorieGoal","calcCaloriesDifference","calorie","servingDifferenceSelector","FOOD_GROUP_ABBREVIATIONS","FOOD_GROUP_DISPLAY_NAMES","displayName","today","Date","toLocaleDateString","dateSlice","createSlice","name","initialState","reducers","newDay","actions","editModeSlice","enterEditMode","exitEditMode","extraReducers","builder","addCase","newMealState","mealTime","toLocaleTimeString","editState","reset","mealState","undefined","resetAll","forEach","mealStatesSlice","addMeal","push","deleteMeal","action","filter","index","payload","addFood","mealIndex","updateFood","foodIndex","cancelAddFood","replaceFoods","replacedFoodIndices","pullAt","enterMealEditMode","enterMealAddMode","enterMealNameMode","exitMealEditMode","enterFoodEditMode","foodEditIndex","exitFoodEditMode","connect","dispatch","onClick","Button","NO_TARGET","TARGET_1200_CALORIE","TARGET_1400_CALORIE","TARGET_1600_CALORIE","TARGET_1800_CALORIE","TARGET_2000_CALORIE","DEFAULT_TARGET","isMinLimit","isNoTarget","hasATarget","BACKGROUND_COLORS","backgroundColor","fontFamily","LabelBadge","props","value","style","Badge","className","InfoLabelBadge","FoodGroupBadge","FoodGroupLabelBadge","FoodGroupServingBadge","displayValue","FoodGroupServingGoalBadge","FoodGroupLegend","EatMoreToTargetIcon","icon","faAngleDoubleUp","color","MeetTargetIcon","faBullseye","EatLessToTargetIcon","faAngleDoubleDown","warning","IconReferLink","rel","href","Icon8WebSiteReferLink","Icons8Referral","fontSize","FoodGroupLegends","TargetActionLegends","showTargetActionLegends","useAppSelector","useSelector","exportCsv","data","flatMap","description","denormalizeFood","options","filename","showLabels","useTextFile","useBom","useKeysAsHeaders","ExportToCsv","generateCsv","VariantPrimary","VariantSecondary","VariantDanger","EditableViewButtons","NewDayButton","variant","DoneButton","UneditableViewButtons","handleClicked","downloadAsCsv","useDownload","showDownloadButton","EditButton","size","gender","targetStateSlice","enterEditTarget","exitEditTarget","changeTarget","changeGender","onChange","ToggleButtonGroup","ToggleButton","FoodGroupServingGoalBadgePanel","MenuItemLabel","menuItem","Dropdown","Item","eventKey","selectedCalorie","targets","onSelect","toNumber","selectedTarget","find","Toggle","id","Menu","Divider","label","caloriePanel","TargetFoodGroupServingGoalBadgePanel","noTarget","showChangeTargetButton","ChangeTargetButton","data-cy","CalorieSummary","width","calories","servingForFoodGroup","ownProps","toTarget","targetServing","compare","translateToTargetAction","eatLessWarning","CalorieText","amount","minWidth","FoodGroupLabel","showTargetActionIcon","ServingSummary","TotalSummary","DifferenceSummary","CalorieDifference","ServingDifference","summaryTypeSlice","setSummaryType","_state","type","Tabs","activeKey","key","Tab","title","showTabs","BlueStar","faStar","BestChoiceLegend","FoodGroupServingBadgePanel","CalorieSpan","DisplayText","suggestion","bestChoice","foodDescription","foodName","FoodDescriptionInputControl","Form","Label","htmlFor","srOnly","required","placeholder","e","updateFoodDescription","aria-labelledby","invalid","suggestions","updateFoodDescriptionServing","maxWidth","findIndex","Control","Feedback","ServingInputControl","isInvalid","controlId","upperFirst","toString","useState","servingStr","setServingStr","useEffect","handleChange","useSyncedLocalState","Group","inputMode","min","max","isSupportedUnitType","funcs","unit","head","selectFunction","fromUnit","toUnit","areUnitsConvertible","convert","quantity","selectedFunc","NaN","unitText","canParse","parse","last","measure","systems","small","singular","plural","to_anchor","medium","large","unknown","_convert","configureMeasurements","volume","mass","UNIT_MAP","Map","functions","from","possibilities","includes","to","unitName","words","lowerCase","first","getUnitName","isDiameterUnitName","test","diameter","split","Object","squared","multiply","converter","partial","composeConverter","variableUnitFunctions","standardUnitFunctions","isMeasurementConvertible","measurement","parseUnit","composeParser","serializedATN","join","atn","antlr4","ATNDeserializer","deserialize","decisionsToDFA","decisionToState","ds","dfa","DFA","AmountLexer","input","_interp","LexerATNSimulator","PredictionContextCache","Lexer","grammarFileName","channelNames","modeNames","literalNames","symbolicNames","ruleNames","EOF","Token","T__0","WORD","DECIMAL","FRACTION","WHOLE_NUMBER","COMMA","WS","AmountListener","ctx","tree","ParseTreeListener","sharedContextCache","AmountParser","ParserATNSimulator","localctx","AmountContext","this","_ctx","enterRule","RULE_amount","_la","enterOuterAlt","_errHandler","sync","_input","LA","match","re","error","RecognitionException","exception","reportError","recover","exitRule","MeasurementContext","RULE_measurement","QuantityContext","RULE_quantity","adaptivePredict","UnitContext","RULE_unit","Parser","parser","parent","invokingState","i","getTypedRuleContexts","getTypedRuleContext","ruleIndex","listener","enterAmount","exitAmount","ParserRuleContext","enterMeasurement","exitMeasurement","getToken","enterQuantity","exitQuantity","getTokens","enterUnit","exitUnit","getCurrentMeasurement","content","AmountDecomposer","amountStart","str","substring","start","column","stop","Fraction","valueOf","isUndefined","SyntaxErrorListener","hasError","_recognizer","_offendingSymbol","_line","_column","_msg","_e","ErrorListener","compose","quantityText","createMeasurement","amountWithUnitText","decompose","chars","InputStream","lowerCaseChars","CaseChangingStream","lexer","errorListener","removeErrorListeners","addErrorListener","tokens","CommonTokenStream","buildParseTrees","decomposer","ParseTreeWalker","DEFAULT","walk","parsed","getContent","alternateMeasurement","FoodDescriptionLexer","FoodDescriptionListener","FoodDescriptionParser","FoodDescriptionContext","RULE_foodDescription","FoodNameContext","RULE_foodName","recoverInline","reportMatch","consume","enterFoodDescription","exitFoodDescription","enterFoodName","exitFoodName","FoodDescriptionDecomposer","isEmpty","err","console","foodNameCompleted","substr","unitCompleted","createSuggestion","concat","breakfastPortions","sandwichPortions","saladPortions","soupPortions","mainCoursePortions","sideDishPortions","snackPortions","dessertPortions","beveragePortions","portionSize","vegetableServings","fruitServings","carbohydrateServings","proteinDiaryServings","fatServings","sweetServings","servingSize","METRIC_UNITS","addIndexAsId","obj","miniSearch","list","fullList","MiniSearch","fields","addAll","buildDocuments","servings","portions","partialUnit","autoSuggest","fuzzy","combineWith","res","lookUp","searchFoodServingPortionSize","docs","search","perform","autoComplete","partialFoodName","rank","searchRank","prefixRank","startsWith","foodNameStartsWith","termDistanceRank","terms","distances","term","pos","indexOf","Number","MAX_SAFE_INTEGER","sortBy","minTermDistance","matchedWordRank","word","matchedWordCount","isSuggestionConvertible","parseAmount","measurementsOf","result","findAutoCompletions","suggestionWithAmount","amountAutoCompletions","autoCompleteUnit","slice","findAmountAutoCompletions","shouldCapitalized","capitalize","results","s","findNameSuggestions","servingFor","unitServing","servingAmount","multiplier","isUnitConvertibleTo","measurementFor","normalizedQuantity","isNaN","round","fromPairs","toPairs","generateAutoSuggestion","autoCompletion","nameSuggestion","autoSuggestion","baseOn","createAutoSuggestion","unitOfMeasurement","setSuggestions","setDescription","setServing","setFoodGroupServing","unsetFoodGroupServing","unset","validationFailed","assign","lessThanZero","reducer","combineReducers","debouncedGenerateSuggestions","debounce","foodDescriptionRef","callback","current","autoCompletions","firstAutoCompletion","servingSuggestions","isSuggestionConvertibleFromUnit","convertibleFrom","ranked","findSuggestions","allSuggestions","uniqWith","compact","isEqual","maxWait","generateSuggestions","updateFoodGroupServing","handleSubmit","onSaveFood","event","validateFood","values","checkValidity","preventDefault","stopPropagation","FoodInputForm","initialFood","useReducer","descRef","useRef","setSuggestionsCallback","desc","useFoodInputFormStateReducer","fns","buttonLabel","noValidate","onSubmit","as","Row","onCancel","CalorieServingPanel","renamedFoodSlice","sources","updateDescription","selectFood","selected","combine","unselectFood","renamedFood","errors","selectCount","combineDescription","pickBy","initSelectable","initialFoods","handleSelectFoodChanged","handleFoodDescriptionChanged","handleSubmitted","useNameFoodFormReducer","Check","checked","feedback","FoodCalorieServingPanel","FoodItem","ListGroup","AddFoodInputForm","UpdateFoodInputForm","EditFoodButton","NewFoodButton","faPlus","showNameButton","editButton","deleteButton","DeleteButton","nameButton","NameButton","doneButton","showButton","Card","Header","MealCalorieServingPanel","numberOfMeals","range","AddMealButton","App","Container","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","persistedState","serializedState","localStorage","getItem","JSON","loadState","store","configureStore","preloadedState","subscribe","throttle","stringify","setItem","saveState","getState","ReactDOM","render","StrictMode","document","getElementById","stream","upper","_stream","_upper","prototype","offset","c","String","fromCodePoint","codePointAt","LT","mark","release","marker","seek","_index","getText","defineProperty","exports"],"mappings":"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","file":"static/js/main.fd9fc6d4.chunk.js","sourcesContent":["import _ from \"lodash\";\nimport numeral from \"numeral\";\nimport { FoodGroup, Serving, Food, Meal } from \"./Food\";\n\nconst FOOD_GROUP_CALORIES = {\n  \"vegetable\": 25,\n  \"fruit\": 60,\n  \"carbohydrate\": 70,\n  \"proteinDiary\": 110,\n  \"fat\": 45,\n  \"sweet\": 75,\n};\n\nexport function getCalories(foodGroup: FoodGroup) {\n  return _.get(FOOD_GROUP_CALORIES, foodGroup, 0);\n}\n\nexport function calcServingCalories(serving: Serving) {\n  const calcCalories = (foodGroup: FoodGroup) => getCalories(foodGroup) * _.get(serving, foodGroup, 0);\n  return _.sum(_.map(_.keys(serving), calcCalories));\n}\n\nexport function calcFoodCalories(food: Food) {\n  return calcServingCalories(food.serving);\n}\n\nexport function calcMealCalories(meal: Meal) {\n  return _.sum(_.map(meal.foods, calcFoodCalories));\n}\n\nexport function calcCaloriesTotal(meals: Meal[]) {\n  return _.sum(_.map(meals, calcMealCalories));\n}\n\nexport function calcCaloriesDifference(meals: Meal[], calorieGoal: number) {\n  return calcCaloriesTotal(meals) - calorieGoal;\n}\n\nexport function displayCalorieValue(val: number | undefined) {\n  if (val) {\n    return numeral(val).format('0');\n  } else {\n    return val;\n  }\n}","import _ from \"lodash\";\nimport numeral from \"numeral\";\nimport { Food, FoodGroup, Meal, Serving } from \"./Food\";\n\nfunction _add(n1: number | undefined, n2: number | undefined) {\n  return _.defaultTo(n1, 0) + _.defaultTo(n2, 0);\n}\n\nexport function add(s1: Serving, s2: Serving): Serving {\n  return {\n    vegetable: _add(s1.vegetable, s2.vegetable),\n    fruit: _add(s1.fruit, s2.fruit),\n    carbohydrate: _add(s1.carbohydrate, s2.carbohydrate),\n    proteinDiary: _add(s1.proteinDiary, s2.proteinDiary),\n    fat: _add(s1.fat, s2.fat),\n    sweet: _add(s1.sweet, s2.sweet),\n  };\n}\n\nexport function calcFoodsServingSummary(foods: Food[]) {\n  return _.reduce(_.map(foods, \"serving\"), add, {});\n}\n\nexport function calcServingSummary(meal: Meal) {\n  return calcFoodsServingSummary(meal.foods);\n}\n\nexport function calcMealsServingSummary(meals: Meal[]) {\n  return _.reduce(_.map(meals, calcServingSummary), add, {});\n}\n\nfunction _minus(n1: number | undefined, n2: number | undefined) {\n  return _.defaultTo(n1, 0) - _.defaultTo(n2, 0);\n}\n\nexport function minus(s1: Serving, s2: Serving): Serving {\n  return {\n    vegetable: _minus(s1.vegetable, s2.vegetable),\n    fruit: _minus(s1.fruit, s2.fruit),\n    carbohydrate: _minus(s1.carbohydrate, s2.carbohydrate),\n    proteinDiary: _minus(s1.proteinDiary, s2.proteinDiary),\n    fat: _minus(s1.fat, s2.fat),\n    sweet: _minus(s1.sweet, s2.sweet),\n  };\n}\n\nexport function calcServingDifference(meals: Meal[], servingGoal: Serving) {\n  return minus(calcMealsServingSummary(meals), servingGoal);\n}\n\nexport function displayServingValue(val: number | undefined) {\n  if (val) {\n    return numeral(val).format('0[.][00]');\n  } else {\n    return val;\n  }\n}\n\nexport function positiveServing(serving: Serving) {\n  return _.pickBy(serving, val => _.defaultTo(val, 0) > 0);\n}\n\nexport function oneServingOf(foodGroup: FoodGroup) {\n  return _.set({} as Serving, foodGroup, 1);\n}\n\nexport function multiply(s: Serving, multiplier: number): Serving {\n  return _.fromPairs(_.toPairs(s).map(([key, val]) => [key, val * multiplier]));\n}\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { calcCaloriesDifference, calcCaloriesTotal } from \"../model/calorieFunction\";\nimport { calcMealsServingSummary, calcServingDifference } from \"../model/servingFunction\";\nimport { RootState } from \"./store\";\n\nexport const dateSelector = (state: RootState) => state.date;\nexport const editModeSelector = (state: RootState) => state.editMode;\nexport const mealStatesSelector = (state: RootState) => state.mealStates;\nexport const summaryTypeSelector = (state: RootState) => state.summaryType;\nexport const targetStateSelector = (state: RootState) => state.targetState;\n\nexport const editTargetSelector = createSelector(\n  targetStateSelector,\n  (targetState) => targetState.editTarget\n)\n\nexport const targetSelector = createSelector(\n  targetStateSelector,\n  (targetState) => targetState.target\n)\n\nexport const diarySelector = createSelector(\n  dateSelector,\n  mealStatesSelector,\n  (date, mealStates) => ({ date, meals: _.map(mealStates, 'meal') })\n)\n\nexport const mealsSelector = createSelector(\n  mealStatesSelector,\n  (mealStates) => _.map(mealStates, 'meal')\n)\n\nexport const totalCaloriesSelector = createSelector(\n  mealsSelector,\n  (meals) => calcCaloriesTotal(meals)\n)\n\nexport const totalServingSelector = createSelector(\n  mealsSelector,\n  (meals) => calcMealsServingSummary(meals)\n)\n\nexport const calorieDifferenceSelector = createSelector(\n  mealsSelector,\n  targetSelector,\n  (meals, target) => calcCaloriesDifference(meals, target.calorie)\n)\n\nexport const servingDifferenceSelector = createSelector(\n  mealsSelector,\n  targetSelector,\n  (meals, target) => calcServingDifference(meals, target.serving)\n)","import _ from \"lodash\";\n\nexport interface Serving {\n  vegetable?: number;\n  fruit?: number;\n  carbohydrate?: number;\n  proteinDiary?: number;\n  fat?: number;\n  sweet?: number;\n}\n\nexport interface Food {\n  description: string;\n  serving: Serving;\n}\n\nexport interface Meal {\n  mealTime: string;\n  foods: Food[];\n}\n\nexport type FoodGroup = \"vegetable\" | \"fruit\" | \"carbohydrate\" | \"proteinDiary\" | \"fat\" | \"sweet\";\n\nexport function newFood(): Food {\n  return {\n    description: \"\",\n    serving: {}\n  }\n}\n\nfunction currentTime() {\n  return new Date().toLocaleTimeString();\n}\n\nexport function newMeal(): Meal {\n  return {\n    mealTime: currentTime(),\n    foods: [],\n  }\n}\n\nconst FOOD_GROUP_ABBREVIATIONS = {\n  \"vegetable\": \"V\",\n  \"fruit\": \"F\",\n  \"carbohydrate\": \"C\",\n  \"proteinDiary\": \"PD\",\n  \"fat\": \"Ft\",\n  \"sweet\": \"S\",\n}\n\nexport function abbreviation(foodGroup: FoodGroup) {\n  return _.get(FOOD_GROUP_ABBREVIATIONS, foodGroup);\n}\n\nconst FOOD_GROUP_DISPLAY_NAMES = {\n  \"vegetable\": \"Vegetable\",\n  \"fruit\": \"Fruit\",\n  \"carbohydrate\": \"Carbohydrate\",\n  \"proteinDiary\": \"Protein/Diary\",\n  \"fat\": \"Fat\",\n  \"sweet\": \"Sweet\",\n}\n\nexport function displayName(foodGroup: FoodGroup) {\n  return _.get(FOOD_GROUP_DISPLAY_NAMES, foodGroup);\n}","import { createSlice } from \"@reduxjs/toolkit\";\n\nfunction today() {\n  return new Date().toLocaleDateString();\n}\n\nconst dateSlice = createSlice({\n  name: \"date\",\n  initialState: today(),\n  reducers: {\n    newDay(state) {\n      return today();\n    }\n  }\n})\n\nexport const { newDay } = dateSlice.actions;\nexport default dateSlice.reducer;","import { createSlice } from \"@reduxjs/toolkit\";\nimport { newDay } from \"./dateSlice\";\n\nconst initialState = true;\n\nconst editModeSlice = createSlice({\n  name: \"editMode\",\n  initialState,\n  reducers: {\n    enterEditMode(state) {\n      return true;\n    },\n    exitEditMode(state) {\n      return false;\n    }\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(newDay, () => true)\n  }\n})\n\nexport const { enterEditMode, exitEditMode } = editModeSlice.actions;\nexport default editModeSlice.reducer;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { Food, Meal, newMeal } from \"../../model/Food\";\nimport { newDay } from \"./dateSlice\";\nimport { exitEditMode } from \"./editModeSlice\";\n\nexport type MealEditState = \"add\" | \"edit\" | \"name\" | undefined;\n\nexport interface MealState {\n  meal: Meal;\n  editState?: MealEditState;\n  foodEditIndex?: number;\n}\n\nfunction newMealState(): MealState {\n  return {\n    meal: newMeal(),\n    editState: \"add\",\n  };\n}\n\nconst initialState = [newMealState()];\n\nconst reset = (mealState: MealState) => mealState.editState = undefined;\n\nconst resetAll = (state: MealState[]) => _.forEach(state, reset);\n\nconst mealStatesSlice = createSlice({\n  name: \"mealStates\",\n  initialState,\n  reducers: {\n    addMeal(state) {\n      resetAll(state);\n      state.push(newMealState())\n    },\n    deleteMeal(state, action: PayloadAction<number>) {\n      return _.filter(state, (_, index) => (index !== action.payload));\n    },\n    addFood(state, action: PayloadAction<{ mealIndex: number; food: Food }>) {\n      const { mealIndex, food } = action.payload;\n      state[mealIndex].meal.foods.push(food);\n    },\n    updateFood(state, action: PayloadAction<{ mealIndex: number; foodIndex: number; food: Food }>) {\n      const { mealIndex, foodIndex, food } = action.payload;\n      state[mealIndex].meal.foods[foodIndex] = food;\n    },\n    cancelAddFood(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      state[mealIndex].editState = undefined;\n    },\n    replaceFoods(state, { payload: { mealIndex, food, replacedFoodIndices } }: PayloadAction<{ mealIndex: number; food: Food; replacedFoodIndices: number[]}>) {\n      const meal = state[mealIndex].meal;\n      _.pullAt(meal.foods, replacedFoodIndices);\n      meal.foods.push(food);\n      state[mealIndex].editState = undefined;\n    },\n    enterMealEditMode(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      resetAll(state);\n      state[mealIndex].editState = \"edit\";\n    },\n    enterMealAddMode(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      state[mealIndex].editState = \"add\";\n    },\n    enterMealNameMode(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      state[mealIndex].editState = \"name\";\n    },\n    exitMealEditMode(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      state[mealIndex].editState = undefined;\n    },\n    enterFoodEditMode(state, action: PayloadAction<{ mealIndex: number; foodIndex: number }>) {\n      const { mealIndex, foodIndex } = action.payload;\n      state[mealIndex].foodEditIndex = foodIndex;\n    },\n    exitFoodEditMode(state, { payload: { mealIndex } }: PayloadAction<{ mealIndex: number; }>) {\n      state[mealIndex].foodEditIndex = undefined;\n    },\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(newDay, () => [newMealState()])\n      .addCase(exitEditMode, (state) => {\n        _.forEach(state, function(mealState) {\n          mealState.editState = undefined;\n        })\n      })\n  }\n})\n\nexport const {\n  addMeal, deleteMeal,\n  addFood, updateFood, cancelAddFood, replaceFoods,\n  enterMealEditMode, enterMealAddMode, enterMealNameMode, exitMealEditMode,\n  enterFoodEditMode, exitFoodEditMode,\n} = mealStatesSlice.actions;\n\nexport default mealStatesSlice.reducer;","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { addMeal } from \"./mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onClick: () => dispatch(addMeal()),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { FoodGroup } from \"./Food\";\n\nexport type Gender = \"man\" | \"woman\";\n\nconst NO_TARGET: Target = {\n  calorie: 0,\n  serving: {\n    vegetable: 0,\n    fruit: 0,\n    carbohydrate: 0,\n    proteinDiary: 0,\n    fat: 0,\n    sweet: 0,\n  }\n}\n\nconst TARGET_1200_CALORIE: Target = {\n  calorie: 1200,\n  serving: {\n    vegetable: 4,\n    fruit: 3,\n    carbohydrate: 4,\n    proteinDiary: 3,\n    fat: 3,\n    sweet: 1,\n  }\n}\n\nconst TARGET_1400_CALORIE: Target = {\n  calorie: 1400,\n  serving: {\n    vegetable: 4,\n    fruit: 4,\n    carbohydrate: 5,\n    proteinDiary: 4,\n    fat: 3,\n    sweet: 1,\n  }\n}\n\nconst TARGET_1600_CALORIE: Target = {\n  calorie: 1600,\n  serving: {\n    vegetable: 5,\n    fruit: 5,\n    carbohydrate: 6,\n    proteinDiary: 5,\n    fat: 3,\n    sweet: 1,\n  }\n}\n\nconst TARGET_1800_CALORIE: Target = {\n  calorie: 1800,\n  serving: {\n    vegetable: 5,\n    fruit: 5,\n    carbohydrate: 7,\n    proteinDiary: 6,\n    fat: 4,\n    sweet: 1,\n  }\n}\n\nconst TARGET_2000_CALORIE: Target = {\n  calorie: 2000,\n  serving: {\n    vegetable: 5,\n    fruit: 5,\n    carbohydrate: 8,\n    proteinDiary: 7,\n    fat: 5,\n    sweet: 1,\n  }\n}\n\nexport const DEFAULT_TARGET = NO_TARGET;\n\nexport interface Target {\n  calorie: number;\n  serving: {\n    vegetable: number;\n    fruit: number;\n    carbohydrate: number;\n    proteinDiary: number;\n    fat: number;\n    sweet: number;\n  };\n}\n\nexport function isMinLimit(foodGroup: FoodGroup) {\n  return (foodGroup === \"vegetable\" || foodGroup === \"fruit\");\n}\n\nexport function isNoTarget(target: Target) {\n  return target.calorie === 0;\n}\n\nexport function hasATarget(target: Target) {\n  return !isNoTarget(target);\n}\n\nexport function targetsByGender(gender: Gender) {\n  if (gender === \"woman\") {\n    return [\n      NO_TARGET,\n      TARGET_1200_CALORIE,\n      TARGET_1400_CALORIE,\n      TARGET_1600_CALORIE,\n      TARGET_1800_CALORIE,\n    ];  \n  } else {\n    return [\n      NO_TARGET,\n      TARGET_1400_CALORIE,\n      TARGET_1600_CALORIE,\n      TARGET_1800_CALORIE,\n      TARGET_2000_CALORIE,\n    ];  \n  }\n}","import _ from \"lodash\";\nimport { FoodGroup } from \"../model/Food\";\n\nconst BACKGROUND_COLORS = {\n  \"vegetable\": \"green\",\n  \"fruit\": \"teal\",\n  \"carbohydrate\": \"cyan\",\n  \"proteinDiary\": \"blue\",\n  \"fat\": \"orange\",\n  \"sweet\": \"red\",\n};\n\nexport type BadgeBackgroundColor = \"green\" | \"teal\" | \"cyan\"| \"blue\" | \"orange\" | \"red\" ;\n\nexport function backgroundColor(foodGroup: FoodGroup)  {\n  return _.get(BACKGROUND_COLORS, foodGroup, '') as BadgeBackgroundColor;\n}\n","import _ from \"lodash\";\nimport { Badge } from \"react-bootstrap\";\nimport { abbreviation, FoodGroup, Serving } from \"../../model/Food\";\nimport { displayServingValue } from \"../../model/servingFunction\";\nimport { isMinLimit } from \"../../model/Target\";\nimport { backgroundColor, BadgeBackgroundColor } from \"../backgroundColor\";\n\nconst fontFamily = \"Arial Narrow, Arial, sans-serif\";\n\nconst LabelBadge = (props: { backgroundColor: BadgeBackgroundColor; value: string | number | undefined; }) => {\n  const { backgroundColor, value } = props;\n  const style: React.CSSProperties = {\n    backgroundColor,\n    fontFamily,\n  };\n  return (<Badge className=\"text-white m-1\" style={style}>{value}</Badge>);\n}\n\nexport const InfoLabelBadge = (props: { value: string; }) => (\n  <Badge className=\"bg-light m-1\" style={{ fontFamily }}>{props.value}</Badge>\n);\n\nconst FoodGroupBadge = (props: { foodGroup: FoodGroup; value: string | number | undefined; }) => (\n  <LabelBadge backgroundColor={backgroundColor(props.foodGroup)} value={props.value} />\n)\n\nexport const FoodGroupLabelBadge = (props: { foodGroup: FoodGroup; }) => (\n  <LabelBadge backgroundColor={backgroundColor(props.foodGroup)} value={abbreviation(props.foodGroup)} />\n)\n\nexport const FoodGroupServingBadge = (props: { foodGroup: FoodGroup; serving: Serving; }) => {\n  const { foodGroup, serving } = props;\n  const displayValue = displayServingValue(_.get(serving, foodGroup))\n  return (<FoodGroupBadge foodGroup={foodGroup} value={displayValue} />);\n}\n\nexport const FoodGroupServingGoalBadge = (props: { foodGroup: FoodGroup; serving: Serving;}) => {\n  const { foodGroup, serving } = props;\n  const value = _.get(serving, foodGroup);\n  const displayValue = isMinLimit(foodGroup) ? value + \"+\" : value;\n  return (<FoodGroupBadge foodGroup={foodGroup} value={displayValue} />);\n}\n","import { displayName, FoodGroup } from \"../model/Food\";\nimport { FoodGroupLabelBadge } from \"./badge\";\n\nexport const FoodGroupLegend = (props: { foodGroup: FoodGroup; }) => {\n  const { foodGroup } = props;\n  return (\n    <div className=\"d-flex justify-content-center border-0 rounded bg-light\">\n      <FoodGroupLabelBadge foodGroup={foodGroup} />\n      <div>{displayName(foodGroup)}</div>\n    </div>\n  );\n};\n","import { faAngleDoubleDown, faAngleDoubleUp, faBullseye } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const EatMoreToTargetIcon = () => (\n  <FontAwesomeIcon icon={faAngleDoubleUp} color={\"Orange\"} />\n)\n\nexport const MeetTargetIcon = () => (\n  <FontAwesomeIcon icon={faBullseye} color={\"Green\"} />\n)\n\nexport const EatLessToTargetIcon = (props: { warning?: boolean; }) => (\n  <FontAwesomeIcon icon={faAngleDoubleDown} color={props.warning ? \"Red\" : \"Orange\"} />\n)\n\nexport type TargetAction = \"DoMore\" | \"MeetTarget\" | \"DoLess\";\n\nexport const TargetActionIcon = (props: { action: TargetAction; eatLessWarning: boolean; }) => {\n  switch (props.action) {\n    case \"DoMore\":\n      return <EatMoreToTargetIcon />;\n    case \"MeetTarget\":\n      return <MeetTargetIcon />;\n    default:\n      return <EatLessToTargetIcon warning={props.eatLessWarning} />;\n  }\n}","import { FoodGroupLegend } from \"../FoodGroupLegend\";\nimport { EatLessToTargetIcon, EatMoreToTargetIcon, MeetTargetIcon } from \"../summary/TargetActionIcon\";\n\nconst IconReferLink = () => (\n  <a\n    target=\"_blank\"\n    rel=\"noreferrer\"\n    href=\"https://icons8.com/icons/set/healthy-food-calories-calculator\"\n  >\n    Healthy Food Calories Calculator icon\n  </a>\n)\n\nconst Icon8WebSiteReferLink = () => (\n  <a target=\"_blank\" rel=\"noreferrer\" href=\"https://icons8.com\">Icons8</a>\n)\n\nconst Icons8Referral = () => {\n  return (\n    <p style={{ fontSize: \"smaller\" }}>\n      <IconReferLink /> icon by <Icon8WebSiteReferLink />\n    </p>\n  );\n};\n\nconst FoodGroupLegends = () => (\n  <div className=\"d-flex justify-content-between flex-fill flex-wrap\">\n    <FoodGroupLegend foodGroup=\"vegetable\" />\n    <FoodGroupLegend foodGroup=\"fruit\" />\n    <FoodGroupLegend foodGroup=\"carbohydrate\" />\n    <FoodGroupLegend foodGroup=\"proteinDiary\" />\n    <FoodGroupLegend foodGroup=\"fat\" />\n    <FoodGroupLegend foodGroup=\"sweet\" />\n  </div>\n);\n\nconst TargetActionLegends = () => (\n  <div className=\"w-100 d-flex justify-content-between justify-content-sm-start flex-fill flex-wrap\">\n    <div className=\"mr-sm-1 border-0 rounded bg-light\">\n      <EatLessToTargetIcon />Eat Less\n    </div>\n    <div className=\"mr-sm-1 border-0 rounded bg-light\">\n      <MeetTargetIcon />On Target\n    </div>\n    <div className=\"border-0 rounded bg-light\">\n      <EatMoreToTargetIcon />Eat More\n    </div>\n  </div>\n)\n\nexport const Footer = (props: { showTargetActionLegends: boolean }) => (\n  <div className=\"d-flex flex-column align-items-center\">\n    <div className=\"d-block d-sm-none\">\n      <FoodGroupLegends />\n    </div>\n    {props.showTargetActionLegends && <TargetActionLegends />}\n    <Icons8Referral />\n  </div>\n);","import { connect } from \"react-redux\";\nimport { targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { Footer } from \"../../components/day-page/Footer\";\nimport { hasATarget } from \"../../model/Target\";\n\nconst mapStateToProps = (state: RootState) => ({\n  showTargetActionLegends: hasATarget(targetSelector(state)),\n})\n\nexport default connect(mapStateToProps)(Footer);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { exitEditMode } from \"./editModeSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onClick: () => dispatch(exitEditMode()),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { enterEditMode } from \"./editModeSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onClick: () => dispatch(enterEditMode()),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { newDay } from \"./dateSlice\";\n\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onClick: () => dispatch(newDay()),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './store'\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import _ from \"lodash\";\nimport { ExportToCsv } from 'export-to-csv';\nimport { Food, Meal } from \"../../model/Food\";\nimport { calcFoodCalories } from \"../../model/calorieFunction\";\n\nconst denormalizeFood = (food: Food) => ({\n  description: food.description,\n  vegetable: _.defaultTo(food.serving.vegetable, \"\"),\n  fruit: _.defaultTo(food.serving.fruit, \"\"),\n  carbohydrate: _.defaultTo(food.serving.carbohydrate, \"\"),\n  proteinDiary: _.defaultTo(food.serving.proteinDiary, \"\"),\n  fat: _.defaultTo(food.serving.fat, \"\"),\n  sweet: _.defaultTo(food.serving.sweet, \"\"),\n  calorie: calcFoodCalories(food),\n});\n\nexport default function exportCsv(date: string, meals: Meal[]) {\n\n  const denormalizeMeal = (meal: Meal) => {\n    const { mealTime } = meal;\n    return _.map(meal.foods, food => ({ date, mealTime, ...denormalizeFood(food) }));\n  };\n  const data = _.flatMap(meals, denormalizeMeal);\n\n  const options = {\n    // fieldSeparator: ',',\n    filename: \"diet_diary_\" + date,\n    // quoteStrings: '\"',\n    // decimalSeparator: '.',\n    showLabels: true,\n    //showTitle: true,\n    //title: 'My Awesome CSV',\n    useTextFile: false,\n    useBom: true,\n    useKeysAsHeaders: true,\n    // headers: ['Column 1', 'Column 2', etc...] <-- Won't work with useKeysAsHeaders present!\n  };\n\n  const csvExporter = new ExportToCsv(options);\n\n  csvExporter.generateCsv(data);\n}\n","export const VariantPrimary = \"outline-primary\";\nexport const VariantSecondary = \"outline-secondary\";\nexport const VariantDanger = \"outline-danger\";","import { Fragment } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport DoneButton from \"../../features/day-page/DoneButton\";\nimport EditButton from \"../../features/day-page/EditButton\";\nimport NewDayButton from \"../../features/day-page/NewDayButton\";\nimport { useDownload } from \"../../features/download/useDownload\";\nimport { VariantDanger, VariantPrimary, VariantSecondary } from \"../ButtonVariant\";\n\nconst EditableViewButtons = () => (\n  <Fragment>\n    <NewDayButton variant={VariantDanger}>New Day</NewDayButton>{' '}\n    <DoneButton variant={VariantPrimary}>Done</DoneButton>\n  </Fragment>\n)\n\nconst UneditableViewButtons = (props: { showDownloadButton: boolean; }) => {\n  const handleClicked = useDownload();\n  return (\n    <Fragment>\n      {props.showDownloadButton &&\n        <Button variant={VariantSecondary} onClick={handleClicked}>Download</Button>\n      }{' '}\n      <EditButton variant={VariantPrimary}>Edit</EditButton>\n    </Fragment>\n  )\n}\n\nexport const HeaderButtons = (props: { editMode: boolean; showDownloadButton: boolean; }) => {\n  const { editMode, showDownloadButton } = props;\n  return (\n    <span>\n      {editMode ?\n        <EditableViewButtons />\n        : <UneditableViewButtons showDownloadButton={showDownloadButton} />}\n    </span>\n  )\n}\n","import { useAppSelector } from \"../../app/hooks\";\nimport { diarySelector } from \"../../app/selectors\";\nimport downloadAsCsv from \"./exportCsv\";\n\nexport function useDownload() {\n  const { date, meals } = useAppSelector(diarySelector);\n  return () => downloadAsCsv(date, meals);\n}\n","import _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { editModeSelector, mealsSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { HeaderButtons } from \"../../components/day-page/HeaderButtons\";\nimport { Meal } from \"../../model/Food\";\n\nfunction hasAtLeastOneFood(meals: Meal[]) {\n  return _.size(meals) > 0\n    && _.size(meals[0].foods) > 0;\n}\n\nconst mapStateToProps = (state: RootState) => ({\n  editMode: editModeSelector(state),\n  showDownloadButton: hasAtLeastOneFood(mealsSelector(state)),\n})\n\nexport default connect(mapStateToProps)(HeaderButtons);","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { DEFAULT_TARGET, Gender, Target } from \"../../model/Target\";\nimport { exitEditMode } from \"../day-page/editModeSlice\";\n\ninterface TargetState {\n  editTarget: boolean,\n  target: Target,\n  gender: Gender,\n}\n\nconst initialState = {\n  editTarget: false,\n  target: DEFAULT_TARGET,\n  gender: \"man\" as Gender,\n} as TargetState;\n\nconst targetStateSlice = createSlice({\n  name: \"targetState\",\n  initialState,\n  reducers: {\n    enterEditTarget(state) {\n      state.editTarget = true;\n    },\n    exitEditTarget(state) {\n      state.editTarget = false;\n    },\n    changeTarget(state, action: PayloadAction<Target>) {\n      state.target = action.payload;\n    },\n    changeGender(state, action: PayloadAction<Gender>) {\n      state.gender = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(exitEditMode, (state) => {\n      state.editTarget = false\n    })\n  }\n})\n\nexport const {\n  enterEditTarget, exitEditTarget,\n  changeTarget,\n  changeGender,\n} = targetStateSlice.actions;\nexport default targetStateSlice.reducer;","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { enterEditTarget } from \"./targetStateSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onClick: () => dispatch(enterEditTarget()),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n\n","import { connect } from \"react-redux\";\nimport { targetStateSelector } from \"../../app/selectors\";\nimport { AppDispatch, RootState } from \"../../app/store\";\nimport { GenderToggle } from \"../../components/target/GenderToggle\";\nimport { Gender } from \"../../model/Target\";\nimport { changeGender } from \"./targetStateSlice\";\n\nconst mapStateToProps = (state: RootState) => ({\n  value: targetStateSelector(state).gender,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onChange: (gender: Gender) => dispatch(changeGender(gender)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GenderToggle);","import { ToggleButton, ToggleButtonGroup } from \"react-bootstrap\";\nimport { Gender } from \"../../model/Target\";\nimport { VariantPrimary } from \"../ButtonVariant\";\n\nexport const GenderToggle = (props: { value: string; onChange: (val: Gender) => void }) => (\n  <ToggleButtonGroup name=\"genderToggle\" value={props.value} onChange={props.onChange}>\n    <ToggleButton variant={VariantPrimary} value=\"man\">Man</ToggleButton>\n    <ToggleButton variant={VariantPrimary} value=\"woman\">Woman</ToggleButton>\n  </ToggleButtonGroup>\n)","import { Serving } from \"../../model/Food\";\nimport { FoodGroupServingGoalBadge } from \"../badge\";\n\nexport const FoodGroupServingGoalBadgePanel = (props: { serving: Serving; }) => (\n  <div>\n    <FoodGroupServingGoalBadge foodGroup=\"vegetable\" serving={props.serving} />\n    <FoodGroupServingGoalBadge foodGroup=\"fruit\" serving={props.serving} />\n    <FoodGroupServingGoalBadge foodGroup=\"carbohydrate\" serving={props.serving} />\n    <FoodGroupServingGoalBadge foodGroup=\"proteinDiary\" serving={props.serving} />\n    <FoodGroupServingGoalBadge foodGroup=\"fat\" serving={props.serving} />\n    <FoodGroupServingGoalBadge foodGroup=\"sweet\" serving={props.serving} />\n  </div>\n);\n","import _ from \"lodash\";\nimport { Fragment } from \"react\";\nimport { Dropdown } from \"react-bootstrap\";\nimport GenderToggle from \"../../features/target/GenderToggle\";\nimport { isNoTarget, Target } from \"../../model/Target\";\nimport { FoodGroupServingGoalBadgePanel } from \"../panels/FoodGroupServingGoalBadgePanel\";\n\nconst MenuItemLabel = (props: { target: Target }) => (\n  isNoTarget(props.target) ?\n    <Fragment>No Target</Fragment>\n    : <Fragment>\n      {props.target.calorie}{' '} Cal.<FoodGroupServingGoalBadgePanel serving={props.target.serving} />\n    </Fragment>\n)\n\nconst menuItem = (target: Target) => (\n  <Dropdown.Item key={target.calorie} eventKey={target.calorie}>\n    <MenuItemLabel target={target} />\n  </Dropdown.Item>\n)\n\nexport const TargetDropDown = (props: { selectedCalorie: number; targets: Target[]; onSelect: (target: Target) => void; }) => {\n  const handleSelect = (eventKey: any) => {\n    const selectedCalorie = _.toNumber(eventKey);\n    const selectedTarget = _.find(props.targets, { 'calorie': selectedCalorie });\n    if (selectedTarget) {\n      props.onSelect(selectedTarget);\n    }\n  };\n\n  return (\n    <Dropdown onSelect={handleSelect}>\n      <Dropdown.Toggle variant=\"outline-info\" id=\"dropdown-goal\">\n        {props.selectedCalorie === 0 ? \"No Target\" : props.selectedCalorie}\n      </Dropdown.Toggle>\n\n      <Dropdown.Menu>\n        {_.map(props.targets, menuItem)}\n        <Dropdown.Divider />\n        <div className=\"w-100 d-flex justify-content-center\">\n          <GenderToggle />\n        </div>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n","import { connect } from \"react-redux\";\nimport { targetSelector, targetStateSelector } from \"../../app/selectors\";\nimport { AppDispatch, RootState } from \"../../app/store\";\nimport { TargetDropDown } from \"../../components/target/TargetDropDown\";\nimport { Target, targetsByGender } from \"../../model/Target\";\nimport { changeTarget, exitEditTarget } from \"./targetStateSlice\";\n\nconst mapStateToProps = (state: RootState) => ({\n  selectedCalorie: targetSelector(state).calorie,\n  targets: targetsByGender(targetStateSelector(state).gender),\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onSelect: (target: Target) => { dispatch(changeTarget(target)); dispatch(exitEditTarget()); },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TargetDropDown);","import { connect } from \"react-redux\";\nimport { targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { TargetLabel } from \"../../components/target/TargetLabel\";\nimport { isNoTarget, Target } from \"../../model/Target\";\n\nfunction getLabel(target: Target) {\n  return isNoTarget(target) ? \"No Target\" : target.calorie;\n}\n\nconst mapStateToProps = (state: RootState) => ({\n  label: getLabel(targetSelector(state)),\n})\n\nexport default connect(mapStateToProps)(TargetLabel);","export const TargetLabel = (props: { label: number | string; }) => (\n  <span className=\"text-white bg-info border rounded px-1\" style={{ fontSize: '24px' }}>{props.label}</span>\n);\n","import { connect } from \"react-redux\";\nimport { editTargetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { NoTargetPanel } from \"../../components/target/NoTargetPanel\";\n\nconst mapStateToProps = (state: RootState) => ({\n  editTarget: editTargetSelector(state),\n})\n\nexport default connect(mapStateToProps)(NoTargetPanel);","import TargetDropDown from \"../../features/target/TargetDropDown\";\nimport TargetLabel from \"../../features/target/TargetLabel\";\n\nexport const NoTargetPanel = (props: { editTarget: boolean; }) => {\n  const { editTarget } = props;\n  return (\n    (editTarget ? <TargetDropDown /> : <TargetLabel />)\n  );\n};\n","import { connect } from \"react-redux\";\nimport { targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { FoodGroupServingGoalBadgePanel } from \"../../components/panels/FoodGroupServingGoalBadgePanel\";\n\nconst mapStateToProps = (state: RootState) => ({\n  serving: targetSelector(state).serving,\n})\n\nexport default connect(mapStateToProps)(FoodGroupServingGoalBadgePanel);","import { connect } from \"react-redux\";\nimport { editTargetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { TargetCaloriePanel } from \"../../components/target/TargetCaloriePanel\";\n\nconst mapStateToProps = (state: RootState) => ({\n  editTarget: editTargetSelector(state),\n})\n\nexport default connect(mapStateToProps)(TargetCaloriePanel);","import TargetDropDown from \"../../features/target/TargetDropDown\";\nimport TargetFoodGroupServingGoalBadgePanel from \"../../features/target/TargetFoodGroupServingGoalBadgePanel\";\nimport TargetLabel from \"../../features/target/TargetLabel\";\n\nexport const TargetCaloriePanel = (props: { editTarget: boolean; }) => {\n  const { editTarget } = props;\n  const caloriePanel = editTarget ? <TargetDropDown /> : <TargetLabel />;\n  return (\n    <div>\n      <div className=\"d-flex flex-nowrap  align-items-end\">\n        Target:&nbsp; {caloriePanel} &nbsp;Cal.\n      </div>\n      <TargetFoodGroupServingGoalBadgePanel />\n    </div>\n  );\n};\n","import { connect } from \"react-redux\";\nimport { editModeSelector, editTargetSelector, targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { TargetPanel } from \"../../components/target/TargetPanel\";\nimport { isNoTarget } from \"../../model/Target\";\n\nconst mapStateToProps = (state: RootState) => ({\n  noTarget: isNoTarget(targetSelector(state)),\n  showChangeTargetButton: editModeSelector(state) && !editTargetSelector(state),\n})\n\nexport default connect(mapStateToProps)(TargetPanel);","import ChangeTargetButton from \"../../features/target/ChangeTargetButton\";\nimport NoTargetPanel from \"../../features/target/NoTargetPanel\";\nimport TargetCaloriePanel from \"../../features/target/TargetCaloriePanel\";\nimport { VariantSecondary } from \"../ButtonVariant\";\n\ninterface Props {\n  noTarget: boolean;\n  showChangeTargetButton: boolean;\n}\n\nexport const TargetPanel = (props: Props) => {\n  const { noTarget, showChangeTargetButton } = props;\n\n  return (\n    <div className=\"d-flex align-items-center\">\n      {noTarget ? <NoTargetPanel /> : <TargetCaloriePanel />}&nbsp;\n      {showChangeTargetButton\n        && <ChangeTargetButton variant={VariantSecondary}>Change</ChangeTargetButton>}\n    </div>\n  );\n};\n","import { connect } from \"react-redux\";\nimport { dateSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { Header } from \"../../components/day-page/Header\";\n\nconst mapStateToProps = (state: RootState) => ({\n  date: dateSelector(state),\n})\n\nexport default connect(mapStateToProps)(Header);","import HeaderButtons from \"../../features/day-page/HeaderButtons\";\nimport TargetPanel from \"../../features/target/TargetPanel\";\n\nexport const Header = (props: { date: string }) => (\n  <div className=\"d-flex flex-column flex-md-row justify-content-between align-items-center\">\n    <h1 className=\"order-md-1\" data-cy=\"date\">{props.date}</h1>\n    <div className=\"order-md-0\">\n      <TargetPanel />\n    </div>\n    <div className=\"order-md-2\">\n      <HeaderButtons />\n    </div>\n  </div>\n)\n","import { displayCalorieValue } from \"../../model/calorieFunction\";\n\nexport const CalorieSummary = (props: { calories: number; }) => (\n  <div className=\"d-flex flex-column justify-content-center border rounded bg-info text-white text-center p-1\">\n    <div style={{ fontSize: '40px', width: '110px' }}>{displayCalorieValue(props.calories)}</div>\n    <div>calories</div>\n  </div>\n);\n","import { connect } from \"react-redux\";\nimport { totalCaloriesSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { CalorieSummary } from \"../../components/summary/CalorieSummary\";\n\nconst mapStateToProps = (state: RootState) => ({\n  calories: totalCaloriesSelector(state),\n})\n\n\nexport default connect(mapStateToProps)(CalorieSummary);","import _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { targetSelector, totalServingSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { TargetActionIcon, TargetAction } from \"../../components/summary/TargetActionIcon\";\nimport { FoodGroup, Serving } from \"../../model/Food\";\nimport { isMinLimit } from \"../../model/Target\";\n\nfunction servingForFoodGroup(serving: Serving, foodGroup: FoodGroup) {\n  return _.defaultTo(_.get(serving, foodGroup), 0);\n}\n\nfunction compare(serving: number, targetServing: number) {\n\n  if (serving > targetServing) {\n    return \"more\"\n  }\n\n  if (serving < targetServing) {\n    return \"less\";\n  }\n\n  return \"same\";\n}\n\ntype ToTarget = ReturnType<typeof compare>;\n\nfunction translateToTargetAction(toTarget: ToTarget, foodGroup: FoodGroup): TargetAction {\n\n  if (toTarget === \"more\") {\n    if (isMinLimit(foodGroup)) {\n      return \"MeetTarget\";\n    } else {\n      return \"DoLess\";\n    }\n  }\n\n  if (toTarget === \"less\") {\n    if (foodGroup === \"sweet\") return \"MeetTarget\";\n    return \"DoMore\";\n  }\n\n  if (foodGroup === \"sweet\") return \"DoLess\";\n  return \"MeetTarget\"\n}\n\nconst mapStateToProps = (state: RootState, ownProps: { foodGroup: FoodGroup }) => {\n  const { foodGroup } = ownProps;\n  const serving = servingForFoodGroup(totalServingSelector(state), foodGroup);\n  const targetServing = servingForFoodGroup(targetSelector(state).serving, foodGroup);\n  const toTarget = compare(serving, targetServing);\n  const action = translateToTargetAction(toTarget, foodGroup);\n  const eatLessWarning = (foodGroup === \"sweet\" && toTarget === \"more\");\n  return {\n    action,\n    eatLessWarning,\n  }\n}\n\nexport default connect(mapStateToProps)(TargetActionIcon);","import { Fragment } from \"react\";\nimport TargetActionIcon from \"../../features/summary/TargetActionIcon\";\nimport { FoodGroup } from \"../../model/Food\";\nimport { displayServingValue } from \"../../model/servingFunction\";\nimport { FoodGroupLabelBadge } from \"../badge\";\nimport { FoodGroupLegend } from \"../FoodGroupLegend\";\n\nconst CalorieText = (props: { amount?: number; }) => (\n  <Fragment>\n    <div className=\"d-block d-sm-none\">{displayServingValue(props.amount)}</div>\n    <div className=\"d-none d-sm-block text-center\" style={{ fontSize: '32px', minWidth: '110px' }}>{displayServingValue(props.amount)}</div>\n  </Fragment>\n);\n\nconst FoodGroupLabel = (props: { foodGroup: FoodGroup; }) => (\n  <Fragment>\n    <div className=\"d-block d-sm-none\">\n      <FoodGroupLabelBadge foodGroup={props.foodGroup} />\n    </div>\n    <div className=\"d-none d-sm-block\">\n      <FoodGroupLegend foodGroup={props.foodGroup} />\n    </div>\n  </Fragment>\n);\n\nexport const ServingCell = (props: { foodGroup: FoodGroup; amount?: number; showTargetActionIcon: boolean }) => (\n  <div className=\"d-flex flex-column align-items-center m-1\">\n    <CalorieText amount={props.amount} />\n    <div className=\"d-flex align-items-center\">\n      {props.showTargetActionIcon && <TargetActionIcon foodGroup={props.foodGroup} />}\n      <FoodGroupLabel foodGroup={props.foodGroup} />\n    </div>\n  </div>\n);\n","import { connect } from \"react-redux\";\nimport { targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { ServingCell } from \"../../components/summary/ServingCell\";\nimport { hasATarget } from \"../../model/Target\";\n\nconst mapStateToProps = (state: RootState) => ({\n  showTargetActionIcon: hasATarget(targetSelector(state)),\n})\n\nexport default connect(mapStateToProps)(ServingCell);","import ServingCell from \"../../features/summary/ServingCell\";\nimport { Serving } from \"../../model/Food\";\n\nexport const ServingSummary = (props: { serving: Serving; }) => (\n  <div className=\"d-flex justify-content-between flex-fill flex-wrap\">\n    <ServingCell foodGroup=\"vegetable\" amount={props.serving.vegetable} />\n    <ServingCell foodGroup=\"fruit\" amount={props.serving.fruit} />\n    <ServingCell foodGroup=\"carbohydrate\" amount={props.serving.carbohydrate} />\n    <ServingCell foodGroup=\"proteinDiary\" amount={props.serving.proteinDiary} />\n    <ServingCell foodGroup=\"fat\" amount={props.serving.fat} />\n    <ServingCell foodGroup=\"sweet\" amount={props.serving.sweet} />\n  </div>\n)","import { connect } from \"react-redux\";\nimport { totalServingSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { ServingSummary } from \"../../components/summary/ServingSummary\";\n\nconst mapStateToProps = (state: RootState) => ({\n  serving: totalServingSelector(state),\n})\n\n\nexport default connect(mapStateToProps)(ServingSummary);","import CalorieSummary from \"../../features/summary/CalorieSummary\";\nimport ServingSummary from \"../../features/summary/ServingSummary\";\n\nexport const TotalSummary = () => (\n  <div className=\"d-flex\">\n    <CalorieSummary />\n    <div className=\"flex-fill\">\n      <ServingSummary />\n    </div>\n  </div>\n)","import { connect } from \"react-redux\";\nimport { calorieDifferenceSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { CalorieSummary } from \"../../components/summary/CalorieSummary\";\n\nconst mapStateToProps = (state: RootState) => ({\n  calories: calorieDifferenceSelector(state),\n})\n\nexport default connect(mapStateToProps)(CalorieSummary);","import { connect } from \"react-redux\";\nimport { servingDifferenceSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { ServingSummary } from \"../../components/summary/ServingSummary\";\n\nconst mapStateToProps = (state: RootState) => ({\n  serving: servingDifferenceSelector(state),\n})\n\nexport default connect(mapStateToProps)(ServingSummary);","import CalorieDifference from \"../../features/summary/CalorieDifference\";\nimport ServingDifference from \"../../features/summary/ServingDifference\";\n\nexport const DifferenceSummary = () => {\n  return (\n    <div className=\"d-flex\">\n      <CalorieDifference />\n      <div className=\"flex-fill\">\n        <ServingDifference />\n      </div>\n    </div>\n  )\n}","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { SummaryType } from \"../../model/SummaryType\";\n\nconst summaryTypeSlice = createSlice({\n  name: \"summaryType\",\n  initialState: \"total\" as SummaryType,\n  reducers: {\n    setSummaryType(_state, action: PayloadAction<SummaryType>) {\n      return action.payload;\n    }\n  }\n})\n\nexport const { setSummaryType } = summaryTypeSlice.actions;\nexport default summaryTypeSlice.reducer;","import { connect } from \"react-redux\";\nimport { summaryTypeSelector } from \"../../app/selectors\";\nimport { AppDispatch, RootState } from \"../../app/store\";\nimport { TabbedSummary } from \"../../components/summary/TabbedSummary\";\nimport { setSummaryType } from \"../day-page/summaryTypeSlice\";\nimport { SummaryType } from \"../../model/SummaryType\";\n\nconst mapStateToProps = (state: RootState) => ({\n  type: summaryTypeSelector(state),\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  onSelect: (type: SummaryType) => dispatch(setSummaryType(type)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TabbedSummary);","import { Tab, Tabs } from \"react-bootstrap\";\nimport { SummaryType } from \"../../model/SummaryType\";\nimport { TotalSummary } from \"./TotalSummary\";\nimport { DifferenceSummary } from \"./DifferenceSummary\";\n\nexport const TabbedSummary = (props: { type: SummaryType; onSelect:  (type: SummaryType) => void }) => (\n  <div className=\"border rounded p-1\">\n    <Tabs\n      id=\"tab-summary\"\n      activeKey={props.type}\n      onSelect={(key) => props.onSelect(key as SummaryType)}\n      variant=\"pills\"\n    >\n      <Tab eventKey=\"total\" title=\"Total\">\n        <TotalSummary />\n      </Tab>\n      <Tab eventKey=\"difference\" title=\"Difference\">\n        <DifferenceSummary />\n      </Tab>\n    </Tabs>\n  </div>\n);\n","import { connect } from \"react-redux\";\nimport { targetSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { Summary } from \"../../components/day-page/Summary\";\nimport { hasATarget } from \"../../model/Target\";\n\nconst mapStateToProps = (state: RootState) => ({\n  showTabs: hasATarget(targetSelector(state)),\n})\n\nexport default connect(mapStateToProps)(Summary);","import TabbedSummary from \"../../features/summary/TabbedSummary\";\nimport { TotalSummary } from \"../summary/TotalSummary\";\n\nexport const Summary = (props: { showTabs: boolean }) => (\n  props.showTabs ? <TabbedSummary /> : <TotalSummary />\n);","import { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport const BlueStar = () => (\n  <FontAwesomeIcon icon={faStar} style={{ color: \"blue\" }} />\n);\n","import { BlueStar } from \"./BlueStar\";\n\nexport const BestChoiceLegend = () => (\n  <div className=\"border-0 rounded bg-light\">\n    <BlueStar /><span>&nbsp;Best choice</span>\n  </div>\n)","import { Serving } from \"../../model/Food\";\nimport { FoodGroupServingBadge } from \"../badge\";\n\nexport const FoodGroupServingBadgePanel = (props: { serving: Serving; }) => (\n  <span>\n    <FoodGroupServingBadge foodGroup=\"vegetable\" serving={props.serving} />\n    <FoodGroupServingBadge foodGroup=\"fruit\" serving={props.serving} />\n    <FoodGroupServingBadge foodGroup=\"carbohydrate\" serving={props.serving} />\n    <FoodGroupServingBadge foodGroup=\"proteinDiary\" serving={props.serving} />\n    <FoodGroupServingBadge foodGroup=\"fat\" serving={props.serving} />\n    <FoodGroupServingBadge foodGroup=\"sweet\" serving={props.serving} />\n  </span>\n);\n","import { displayCalorieValue } from \"../model/calorieFunction\";\n\nexport const CalorieSpan = (props: { value: number; }) => <span>{displayCalorieValue(props.value)}{' '}Cal.</span>;\n","import { ComboboxOptionText } from \"@reach/combobox\";\nimport { Fragment } from \"react\";\nimport { Suggestion } from \"../../features/suggestions\";\nimport { BlueStar } from \"../BlueStar\";\nimport { FoodGroupServingBadgePanel } from \"../panels/FoodGroupServingBadgePanel\";\nimport { calcServingCalories } from \"../../model/calorieFunction\";\nimport { CalorieSpan } from \"../CalorieSpan\";\n\nexport const DisplayText = (props: { suggestion: Suggestion; }) => {\n  const { bestChoice, serving } = props.suggestion;\n  return (\n    <Fragment>\n      {bestChoice && <BlueStar />}\n      <ComboboxOptionText />\n      {serving &&\n        <Fragment>\n          <FoodGroupServingBadgePanel serving={serving} />\n          <CalorieSpan value={calcServingCalories(serving)} />\n        </Fragment>\n      }\n    </Fragment>\n  );\n};\n","import {\n  Combobox,\n  ComboboxInput, ComboboxList,\n  ComboboxOption, ComboboxPopover\n} from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport _ from \"lodash\";\nimport { Fragment } from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport { Suggestion } from \"../../features/suggestions\";\nimport { Serving } from \"../../model/Food\";\nimport { BestChoiceLegend } from \"../BestChoiceLegend\";\nimport { DisplayText } from \"./DisplayText\";\n\nfunction foodDescription(suggestion: Suggestion) {\n  if (suggestion.amount) {\n    return suggestion.foodName + \" \" + suggestion.amount;\n  } else {\n    return suggestion.foodName;\n  }\n}\n\nfunction hasBestChoice(suggestions: Suggestion[]) {\n  return _.findIndex(suggestions, { 'bestChoice': true }) >= 0;\n}\n\nexport const FoodDescriptionInputControl = (props: {\n  foodName: string;\n  suggestions: Suggestion[];\n  invalid?: boolean;\n  updateFoodDescription: (desc: string) => void;\n  updateFoodDescriptionServing: (desc: string, serving?: Serving) => void;\n}) => (\n  <Fragment>\n    <Form.Label htmlFor=\"inputFoodDescription\" srOnly>Food description</Form.Label>\n    <Combobox className=\"w-100\">\n      <ComboboxInput\n        id=\"inputFoodDescription\"\n        type=\"text\"\n        value={props.foodName}\n        required\n        placeholder=\"Broccoli steamed 1 cup\"\n        onChange={e => props.updateFoodDescription(e.target.value)}\n        aria-labelledby=\"inputFoodDescription\"\n        className={props.invalid ? \"form-control is-invalid\" : \"form-control\"} />\n      <ComboboxPopover>\n        <ComboboxList aria-labelledby=\"inputFoodDescription\">\n          {props.suggestions.map((suggestion, index) => (\n            <ComboboxOption\n              key={index}\n              value={foodDescription(suggestion)}\n              onClick={() => props.updateFoodDescriptionServing(foodDescription(suggestion), suggestion.serving)}>\n              <DisplayText suggestion={suggestion} />\n            </ComboboxOption>\n          ))}\n        </ComboboxList>\n        <div style={{ maxWidth: \"100px\" }}>\n          {hasBestChoice(props.suggestions) && <BestChoiceLegend />}\n        </div>\n      </ComboboxPopover>\n    </Combobox>\n    <Form.Control.Feedback type=\"invalid\">\n      Please enter food description.\n    </Form.Control.Feedback>\n  </Fragment>\n);\n","import _ from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport { getCalories } from \"../../model/calorieFunction\";\nimport { FoodGroup, Serving } from \"../../model/Food\";\nimport { FoodGroupLabelBadge, InfoLabelBadge } from \"../badge\";\n\nfunction useSyncedLocalState(props: Props) {\n  const { foodGroup, serving } = props;\n  const [servingStr, setServingStr] = useState(_.get(serving, foodGroup) || '');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = e.target.value;\n    setServingStr(val);\n    props.onChange(foodGroup, _.toNumber(val));\n  }\n\n  useEffect(() => {\n    // syncing with parent state\n    setServingStr(_.get(serving, foodGroup) || '');\n  }, [foodGroup, serving]);\n\n  return { servingStr, handleChange };\n}\n\ninterface Props {\n  foodGroup: FoodGroup;\n  serving: Serving;\n  isInvalid?: boolean;\n  onChange: (foodGroup: FoodGroup, serving: number) => void;\n}\n\nexport const ServingInputControl = (props: Props) => {\n  const { foodGroup, isInvalid } = props;\n  const controlId = \"inputServing\" + _.upperFirst(foodGroup);\n  const calories = _.toString(getCalories(foodGroup)) + \" Cal.\";\n\n  const { servingStr, handleChange } = useSyncedLocalState(props);\n\n  return (\n    <Form.Group controlId={controlId} className=\"d-flex flex-column align-items-end border rounded mx-1\">\n      <div>\n        <FoodGroupLabelBadge foodGroup={foodGroup} />\n        <InfoLabelBadge value={calories} />\n      </div>\n      <Form.Control\n        type=\"number\"\n        inputMode=\"decimal\"\n        min={0}\n        max={9.99}\n        value={servingStr}\n        isInvalid={isInvalid}\n        onChange={handleChange}\n      />\n      <Form.Control.Feedback type=\"invalid\" style={{ maxWidth: \"100px\" }}>Good one!  Please enter a positive number.</Form.Control.Feedback>\n    </Form.Group>\n  );\n};\n","import _ from \"lodash\";\n\nexport interface ConvertFunctions<T> {\n  /**\n   * Type guard function to check the type before calling areUnitsConvertible and convert functions.\n   */\n  isSupportedUnitType: (unit: any) => boolean;\n\n  /**\n   * Check if units are convertible.  It is used safe guard calling convert function.\n   */\n  areUnitsConvertible: (fromUnit: T, toUnit: T) => boolean;\n\n  /**\n   * Convert quantity from one unit to another.  Should call areUnitsConvertible to check if units are convertible before calling this function.\n   */\n  convert: (quantity: number, unit: T, toUnit: T) => number;\n}\n\nfunction isSupportedUnitType<T>(funcs: ConvertFunctions<T>[], unit: any) {\n  const selected = _.head(_.filter(funcs, function ({ isSupportedUnitType }) {\n    return isSupportedUnitType(unit);\n  }));\n  return selected ? true : false;\n}\n\nfunction selectFunction<T>(funcs: ConvertFunctions<T>[], fromUnit: T, toUnit: T) {\n  return _.head(_.filter(funcs, function ({ isSupportedUnitType, areUnitsConvertible }) {\n    return isSupportedUnitType(fromUnit)\n      && isSupportedUnitType(toUnit)\n      && areUnitsConvertible(fromUnit, toUnit);\n  }));\n}\n\nfunction areUnitsConvertible<T>(funcs: ConvertFunctions<T>[], fromUnit: T, toUnit: T) {\n  const selectedFunc = selectFunction(funcs, fromUnit, toUnit);\n  return selectedFunc ? true : false;\n}\n\nfunction convert<T>(funcs: ConvertFunctions<T>[], quantity: number, unit: T, toUnit: T) {\n  const selectedFunc = selectFunction(funcs, unit, toUnit);\n  if (selectedFunc) {\n    return selectedFunc.convert(quantity, unit, toUnit);\n  } else {\n    return NaN;\n  }\n}\n\nexport default function compose<T>(...funcs: ConvertFunctions<any>[]): ConvertFunctions<T> {\n  return {\n    isSupportedUnitType: _.partial(isSupportedUnitType, funcs),\n    areUnitsConvertible: _.partial(areUnitsConvertible, funcs),\n    convert: _.partial(convert, funcs),\n  }\n}","import _ from \"lodash\";\n\nexport interface ParserFunctions<T> {\n  /**\n   * Guard function to ensure the unitText is parsable.  Should be called before calling parse(string).\n   */\n  canParse: (unitText: string | undefined) => boolean;\n\n  /**\n   * Parse text into an unit.  Guard method canParse(string) should be called before calling this function, otherwise an error could be thrown.\n   */\n  parse: (unitText: string | undefined) => T;\n}\n\nfunction selectFunction<T>(funcs: ParserFunctions<T>[], unitText: string | undefined) {\n  return _.head(_.filter(funcs, function({canParse}) {\n    return canParse(unitText);\n  }));\n}\n\nfunction canParse<T>(funcs: ParserFunctions<T>[], unitText: string | undefined) {\n  const selectedFunc = selectFunction(funcs, unitText);\n  return selectedFunc ? true : false;\n}\n\nfunction parse<T>(funcs: ParserFunctions<T>[], unitText: string | undefined) {\n  const selectedFunc = selectFunction(funcs, unitText);\n  if (selectedFunc) {\n    return selectedFunc.parse(unitText);\n  } else {\n    return _.last(funcs)!.parse(unitText);\n  }\n}\n\nexport default function compose<T>(...funcs: ParserFunctions<T>[]): ParserFunctions<T> {\n  return {\n    canParse: _.partial(canParse, funcs),\n    parse: _.partial(parse, funcs),\n  };\n}","import { Measure, Unit } from \"convert-units\";\n\nexport type SizeSystems = \"size\";\n\nexport type SizeUnits =\n  | \"small\"\n  | \"medium\"\n  | \"large\";\n\nconst size: Record<SizeUnits, Unit> = {\n  small: {\n    name: {\n      singular: 'Small',\n      plural: 'Small',\n    },\n    to_anchor: 0.75,\n  },\n  medium: {\n    name: {\n      singular: 'Medium',\n      plural: 'Medium',\n    },\n    to_anchor: 1,\n  },\n  large: {\n    name: {\n      singular: 'Large',\n      plural: 'Large',\n    },\n    to_anchor: 1.5,\n  },\n}\n\nconst measure: Measure<SizeSystems, SizeUnits> = {\n  systems: {\n    size,\n  },\n};\n\nexport default measure;","import { Measure, Unit } from \"convert-units\";\n\nexport type UnknownSystems = \"unknown\";\n\nexport type UnknownUnits = \"unknown\";\n\nconst unknown: Record<UnknownUnits, Unit> = {\n  unknown: {\n    name: {\n      singular: 'Unknown',\n      plural: 'Unknown',\n    },\n    to_anchor: 1,\n  },\n}\n\nconst measure: Measure<UnknownSystems, UnknownUnits> = {\n  systems: {\n    unknown,\n  },\n};\n\nexport default measure;","import configureMeasurements, { mass, MassSystems, MassUnits, volume, VolumeSystems, VolumeUnits } from \"convert-units\";\nimport _ from \"lodash\";\nimport size, { SizeSystems, SizeUnits } from \"./SizeUnit\";\nimport unknown, { UnknownSystems, UnknownUnits } from \"./UnknownUnit\";\nimport { ConvertFunctions } from \"../ConvertFunctions\";\nimport { ParserFunctions } from \"../ParserFunctions\";\n\ntype Measures = \"volume\" | \"mass\" | \"size\" | \"unknown\";\ntype Systems = VolumeSystems | MassSystems | SizeSystems | UnknownSystems;\ntype Units = VolumeUnits | MassUnits | SizeUnits | UnknownUnits;\nconst _convert = configureMeasurements<Measures, Systems, Units>({\n  volume,\n  mass,\n  size,\n  unknown,\n});\n\nconst UNIT_MAP = new Map<string, Units>([\n  // volume\n  [\"teaspoon\", \"tsp\"],\n  [\"teaspoons\", \"tsp\"],\n  [\"tsp\", \"tsp\"],\n  [\"tablespoon\", \"Tbs\"],\n  [\"tablespoons\", \"Tbs\"],\n  [\"tbsp\", \"Tbs\"],\n  [\"cup\", \"cup\"],\n  [\"cups\", \"cup\"],\n  [\"pint\", \"pnt\"],\n  [\"pints\", \"pnt\"],\n  [\"pt\", \"pnt\"],\n  [\"quart\", \"qt\"],\n  [\"quarts\", \"qt\"],\n  [\"qt\", \"qt\"],\n  [\"gallon\", \"gal\"],\n  [\"gallons\", \"gal\"],\n  [\"gal\", \"gal\"],\n  [\"fluid ounce\", \"fl-oz\"],\n  [\"fluid ounces\", \"fl-oz\"],\n  [\"fl oz\", \"fl-oz\"],\n  [\"milliliter\", \"ml\"],\n  [\"milliliters\", \"ml\"],\n  [\"ml\", \"ml\"],\n  [\"liter\", \"l\"],\n  [\"liters\", \"l\"],\n  [\"l\", \"l\"],\n\n  // mass\n  [\"ounce\", \"oz\"],\n  [\"ounces\", \"oz\"],\n  [\"oz\", \"oz\"],\n  [\"pound\", \"lb\"],\n  [\"pounds\", \"lb\"],\n  [\"lb\", \"lb\"],\n  [\"gram\", \"g\"],\n  [\"grams\", \"g\"],\n  [\"g\", \"g\"],\n  [\"kilogram\", \"kg\"],\n  [\"kilograms\", \"kg\"],\n  [\"kg\", \"kg\"],\n\n  // size\n  [\"small\", \"small\"],\n  [\"medium\", \"medium\"],\n  [\"large\", \"large\"],\n])\n\nfunction toUnit(unitName: string) {\n  return _.defaultTo(UNIT_MAP.get(_.lowerCase(unitName)), \"unknown\");\n}\n\nexport type StandardUnit = Units;\n\nfunction isStandardUnit(unit: any): unit is StandardUnit {\n  return typeof unit === \"string\";\n}\n\nfunction areUnitsConvertible(fromUnit: StandardUnit, toUnit: StandardUnit) {\n  return _convert().from(fromUnit)\n    .possibilities()\n    .includes(toUnit);\n}\n\nfunction convert(quantity: number, unit: StandardUnit, toUnit: StandardUnit) {\n  return _convert(quantity).from(unit).to(toUnit);\n}\n\nfunction canParse() {\n  return true;\n}\n\nfunction getUnitName(unitText: string | undefined) {\n  const words = _.words(_.lowerCase(unitText));\n  if (_.size(words) === 0) return \"\";\n  const first = words[0];\n\n  if (([\"fluid\", \"fl\"].includes(first)) && _.size(words) > 1) {\n    return first + \" \" + words[1];\n  }\n  return first;\n}\n\nfunction parse(unitText: string | undefined) {\n  return toUnit(getUnitName(unitText));\n}\n\nconst functions: ConvertFunctions<StandardUnit> & ParserFunctions<StandardUnit>= {\n  isSupportedUnitType: isStandardUnit,\n  areUnitsConvertible,\n  convert,\n  canParse,\n  parse,\n}\nexport default functions;","import _ from \"lodash\";\nimport { ConvertFunctions } from \"../ConvertFunctions\";\nimport { ParserFunctions } from \"../ParserFunctions\";\n\nexport interface DiameterUnit {\n  diameter: number;\n}\n\nfunction isDiameterUnit(unit: any): unit is DiameterUnit {\n  return unit instanceof Object && \"diameter\" in unit;\n}\n\nexport function isDiameterUnitName(unitName: string) {\n  return /^[1-9][0-9]*-inch$/.test(unitName);\n}\n\nfunction toUnit(unitName: string): DiameterUnit {\n  const diameter = _.toNumber(_.head(_.split(unitName, \"-\")));\n  return { diameter };\n}\n\nfunction areUnitsConvertible(fromUnit: DiameterUnit, toUnit: DiameterUnit) {\n  return true;\n}\n\nfunction convert(quantity: number, unit: DiameterUnit, toUnit: DiameterUnit) {\n  const squared = (val: number) => _.multiply(val, val);\n  return quantity * squared(unit.diameter) / squared(toUnit.diameter);\n}\n\nfunction canParse(unitText: string | undefined) {\n  const words = _.split(unitText, \" \");\n  if (_.size(words) === 0) return false;\n\n  const first = words[0];\n  if (isDiameterUnitName(first)) return true;\n  if (first === \"of\" && _.size(words) > 1) {\n    const second = words[1];\n    return isDiameterUnitName(second);\n  }\n\n  return false;\n}\n\nfunction parse(unitText: string | undefined) {\n  if (canParse(unitText)) {\n    const words = _.split(unitText, \" \");\n    const first = words[0];\n    if (isDiameterUnitName(first)) {\n      return toUnit(first);\n    }\n    return toUnit(words[1]);\n  }\n  return { diameter: NaN };\n}\n\nconst functions: ConvertFunctions<DiameterUnit> & ParserFunctions<DiameterUnit> = {\n  isSupportedUnitType: isDiameterUnit,\n  areUnitsConvertible,\n  convert,\n  canParse,\n  parse,\n}\nexport default functions;","import diameterUnitFunctions, { DiameterUnit } from \"./DiameterUnit\";\n\nexport type VariableUnit = DiameterUnit;\nconst functions = diameterUnitFunctions;\nexport default functions;\n","import composeConverter from \"./ConvertFunctions\";\nimport composeParser from \"./ParserFunctions\";\nimport standardUnitFunctions, { StandardUnit } from \"./standard-unit\";\nimport variableUnitFunctions, { VariableUnit } from \"./variable-unit\";\n\nexport type Unit = StandardUnit | VariableUnit;\n\nconst converter = composeConverter<Unit>(variableUnitFunctions, standardUnitFunctions);\nexport function isMeasurementConvertible(fromUnit: Unit, measurement: { unit: Unit; }) {\n  const toUnit = measurement.unit;\n  return converter.areUnitsConvertible(fromUnit, toUnit);\n}\n\nconst convert = converter.convert;\n\nexport const parseUnit = composeParser<Unit>(variableUnitFunctions, standardUnitFunctions).parse;\n\nexport default convert;","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/amount/Amount.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\n\n\n\nconst serializedATN = [\"\\u0003\\u608b\\ua72a\\u8133\\ub9ed\\u417c\\u3be7\\u7786\",\n    \"\\u5964\\u0002\\tX\\b\\u0001\\u0004\\u0002\\t\\u0002\\u0004\\u0003\\t\\u0003\\u0004\",\n    \"\\u0004\\t\\u0004\\u0004\\u0005\\t\\u0005\\u0004\\u0006\\t\\u0006\\u0004\\u0007\\t\",\n    \"\\u0007\\u0004\\b\\t\\b\\u0004\\t\\t\\t\\u0003\\u0002\\u0003\\u0002\\u0003\\u0002\\u0003\",\n    \"\\u0003\\u0006\\u0003\\u0018\\n\\u0003\\r\\u0003\\u000e\\u0003\\u0019\\u0003\\u0003\",\n    \"\\u0006\\u0003\\u001d\\n\\u0003\\r\\u0003\\u000e\\u0003\\u001e\\u0003\\u0003\\u0006\",\n    \"\\u0003\\\"\\n\\u0003\\r\\u0003\\u000e\\u0003#\\u0005\\u0003&\\n\\u0003\\u0003\\u0004\",\n    \"\\u0003\\u0004\\u0003\\u0005\\u0006\\u0005+\\n\\u0005\\r\\u0005\\u000e\\u0005,\\u0003\",\n    \"\\u0005\\u0003\\u0005\\u0007\\u00051\\n\\u0005\\f\\u0005\\u000e\\u00054\\u000b\\u0005\",\n    \"\\u0003\\u0005\\u0003\\u0005\\u0006\\u00058\\n\\u0005\\r\\u0005\\u000e\\u00059\\u0005\",\n    \"\\u0005<\\n\\u0005\\u0003\\u0006\\u0006\\u0006?\\n\\u0006\\r\\u0006\\u000e\\u0006\",\n    \"@\\u0003\\u0006\\u0003\\u0006\\u0006\\u0006E\\n\\u0006\\r\\u0006\\u000e\\u0006F\",\n    \"\\u0003\\u0007\\u0006\\u0007J\\n\\u0007\\r\\u0007\\u000e\\u0007K\\u0003\\b\\u0003\",\n    \"\\b\\u0003\\b\\u0003\\b\\u0003\\t\\u0006\\tS\\n\\t\\r\\t\\u000e\\tT\\u0003\\t\\u0003\\t\",\n    \"\\u0002\\u0002\\n\\u0003\\u0003\\u0005\\u0004\\u0007\\u0002\\t\\u0005\\u000b\\u0006\",\n    \"\\r\\u0007\\u000f\\b\\u0011\\t\\u0003\\u0002\\u0006\\u0004\\u0002C\\\\c|\\u0003\\u0002\",\n    \"2;\\u0006\\u0002\\'\\'//C\\\\c|\\u0005\\u0002\\u000b\\f\\u000f\\u000f\\\"\\\"\\u0002\",\n    \"b\\u0002\\u0003\\u0003\\u0002\\u0002\\u0002\\u0002\\u0005\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u0002\\t\\u0003\\u0002\\u0002\\u0002\\u0002\\u000b\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u0002\\r\\u0003\\u0002\\u0002\\u0002\\u0002\\u000f\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u0002\\u0011\\u0003\\u0002\\u0002\\u0002\\u0003\\u0013\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u0005%\\u0003\\u0002\\u0002\\u0002\\u0007\\'\\u0003\\u0002\\u0002\\u0002\",\n    \"\\t;\\u0003\\u0002\\u0002\\u0002\\u000b>\\u0003\\u0002\\u0002\\u0002\\rI\\u0003\",\n    \"\\u0002\\u0002\\u0002\\u000fM\\u0003\\u0002\\u0002\\u0002\\u0011R\\u0003\\u0002\",\n    \"\\u0002\\u0002\\u0013\\u0014\\u0007q\\u0002\\u0002\\u0014\\u0015\\u0007t\\u0002\",\n    \"\\u0002\\u0015\\u0004\\u0003\\u0002\\u0002\\u0002\\u0016\\u0018\\t\\u0002\\u0002\",\n    \"\\u0002\\u0017\\u0016\\u0003\\u0002\\u0002\\u0002\\u0018\\u0019\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u0019\\u0017\\u0003\\u0002\\u0002\\u0002\\u0019\\u001a\\u0003\\u0002\\u0002\",\n    \"\\u0002\\u001a&\\u0003\\u0002\\u0002\\u0002\\u001b\\u001d\\t\\u0003\\u0002\\u0002\",\n    \"\\u001c\\u001b\\u0003\\u0002\\u0002\\u0002\\u001d\\u001e\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u001e\\u001c\\u0003\\u0002\\u0002\\u0002\\u001e\\u001f\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u001f!\\u0003\\u0002\\u0002\\u0002 \\\"\\t\\u0004\\u0002\\u0002! \\u0003\\u0002\",\n    \"\\u0002\\u0002\\\"#\\u0003\\u0002\\u0002\\u0002#!\\u0003\\u0002\\u0002\\u0002#$\",\n    \"\\u0003\\u0002\\u0002\\u0002$&\\u0003\\u0002\\u0002\\u0002%\\u0017\\u0003\\u0002\",\n    \"\\u0002\\u0002%\\u001c\\u0003\\u0002\\u0002\\u0002&\\u0006\\u0003\\u0002\\u0002\",\n    \"\\u0002\\'(\\t\\u0003\\u0002\\u0002(\\b\\u0003\\u0002\\u0002\\u0002)+\\u0005\\u0007\",\n    \"\\u0004\\u0002*)\\u0003\\u0002\\u0002\\u0002+,\\u0003\\u0002\\u0002\\u0002,*\\u0003\",\n    \"\\u0002\\u0002\\u0002,-\\u0003\\u0002\\u0002\\u0002-.\\u0003\\u0002\\u0002\\u0002\",\n    \".2\\u00070\\u0002\\u0002/1\\u0005\\u0007\\u0004\\u00020/\\u0003\\u0002\\u0002\",\n    \"\\u000214\\u0003\\u0002\\u0002\\u000220\\u0003\\u0002\\u0002\\u000223\\u0003\\u0002\",\n    \"\\u0002\\u00023<\\u0003\\u0002\\u0002\\u000242\\u0003\\u0002\\u0002\\u000257\\u0007\",\n    \"0\\u0002\\u000268\\u0005\\u0007\\u0004\\u000276\\u0003\\u0002\\u0002\\u000289\",\n    \"\\u0003\\u0002\\u0002\\u000297\\u0003\\u0002\\u0002\\u00029:\\u0003\\u0002\\u0002\",\n    \"\\u0002:<\\u0003\\u0002\\u0002\\u0002;*\\u0003\\u0002\\u0002\\u0002;5\\u0003\\u0002\",\n    \"\\u0002\\u0002<\\n\\u0003\\u0002\\u0002\\u0002=?\\u0005\\u0007\\u0004\\u0002>=\",\n    \"\\u0003\\u0002\\u0002\\u0002?@\\u0003\\u0002\\u0002\\u0002@>\\u0003\\u0002\\u0002\",\n    \"\\u0002@A\\u0003\\u0002\\u0002\\u0002AB\\u0003\\u0002\\u0002\\u0002BD\\u00071\",\n    \"\\u0002\\u0002CE\\u0005\\u0007\\u0004\\u0002DC\\u0003\\u0002\\u0002\\u0002EF\\u0003\",\n    \"\\u0002\\u0002\\u0002FD\\u0003\\u0002\\u0002\\u0002FG\\u0003\\u0002\\u0002\\u0002\",\n    \"G\\f\\u0003\\u0002\\u0002\\u0002HJ\\u0005\\u0007\\u0004\\u0002IH\\u0003\\u0002\",\n    \"\\u0002\\u0002JK\\u0003\\u0002\\u0002\\u0002KI\\u0003\\u0002\\u0002\\u0002KL\\u0003\",\n    \"\\u0002\\u0002\\u0002L\\u000e\\u0003\\u0002\\u0002\\u0002MN\\u0007.\\u0002\\u0002\",\n    \"NO\\u0003\\u0002\\u0002\\u0002OP\\b\\b\\u0002\\u0002P\\u0010\\u0003\\u0002\\u0002\",\n    \"\\u0002QS\\t\\u0005\\u0002\\u0002RQ\\u0003\\u0002\\u0002\\u0002ST\\u0003\\u0002\",\n    \"\\u0002\\u0002TR\\u0003\\u0002\\u0002\\u0002TU\\u0003\\u0002\\u0002\\u0002UV\\u0003\",\n    \"\\u0002\\u0002\\u0002VW\\b\\t\\u0003\\u0002W\\u0012\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u000f\\u0002\\u0019\\u001e#%,29;@FKT\\u0004\\u0002\\u0003\\u0002\\b\\u0002\\u0002\"].join(\"\");\n\n\nconst atn = new antlr4.atn.ATNDeserializer().deserialize(serializedATN);\n\nconst decisionsToDFA = atn.decisionToState.map( (ds, index) => new antlr4.dfa.DFA(ds, index) );\n\nexport default class AmountLexer extends antlr4.Lexer {\n\n    static grammarFileName = \"Amount.g4\";\n    static channelNames = [ \"DEFAULT_TOKEN_CHANNEL\", \"HIDDEN\" ];\n\tstatic modeNames = [ \"DEFAULT_MODE\" ];\n\tstatic literalNames = [ null, \"'or'\", null, null, null, null, \"','\" ];\n\tstatic symbolicNames = [ null, null, \"WORD\", \"DECIMAL\", \"FRACTION\", \"WHOLE_NUMBER\", \n                          \"COMMA\", \"WS\" ];\n\tstatic ruleNames = [ \"T__0\", \"WORD\", \"DIGIT\", \"DECIMAL\", \"FRACTION\", \"WHOLE_NUMBER\", \n                      \"COMMA\", \"WS\" ];\n\n    constructor(input) {\n        super(input)\n        this._interp = new antlr4.atn.LexerATNSimulator(this, atn, decisionsToDFA, new antlr4.PredictionContextCache());\n    }\n\n    get atn() {\n        return atn;\n    }\n}\n\nAmountLexer.EOF = antlr4.Token.EOF;\nAmountLexer.T__0 = 1;\nAmountLexer.WORD = 2;\nAmountLexer.DECIMAL = 3;\nAmountLexer.FRACTION = 4;\nAmountLexer.WHOLE_NUMBER = 5;\nAmountLexer.COMMA = 6;\nAmountLexer.WS = 7;\n\n\n\n","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/amount/Amount.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\n\n// This class defines a complete listener for a parse tree produced by AmountParser.\nexport default class AmountListener extends antlr4.tree.ParseTreeListener {\n\n\t// Enter a parse tree produced by AmountParser#amount.\n\tenterAmount(ctx) {\n\t}\n\n\t// Exit a parse tree produced by AmountParser#amount.\n\texitAmount(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by AmountParser#measurement.\n\tenterMeasurement(ctx) {\n\t}\n\n\t// Exit a parse tree produced by AmountParser#measurement.\n\texitMeasurement(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by AmountParser#quantity.\n\tenterQuantity(ctx) {\n\t}\n\n\t// Exit a parse tree produced by AmountParser#quantity.\n\texitQuantity(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by AmountParser#unit.\n\tenterUnit(ctx) {\n\t}\n\n\t// Exit a parse tree produced by AmountParser#unit.\n\texitUnit(ctx) {\n\t}\n\n\n\n}","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/amount/Amount.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\nimport AmountListener from './AmountListener.js';\n\nconst serializedATN = [\"\\u0003\\u608b\\ua72a\\u8133\\ub9ed\\u417c\\u3be7\\u7786\",\n    \"\\u5964\\u0003\\t$\\u0004\\u0002\\t\\u0002\\u0004\\u0003\\t\\u0003\\u0004\\u0004\",\n    \"\\t\\u0004\\u0004\\u0005\\t\\u0005\\u0003\\u0002\\u0005\\u0002\\f\\n\\u0002\\u0003\",\n    \"\\u0002\\u0003\\u0002\\u0005\\u0002\\u0010\\n\\u0002\\u0005\\u0002\\u0012\\n\\u0002\",\n    \"\\u0003\\u0003\\u0003\\u0003\\u0005\\u0003\\u0016\\n\\u0003\\u0003\\u0004\\u0003\",\n    \"\\u0004\\u0003\\u0004\\u0003\\u0004\\u0003\\u0004\\u0005\\u0004\\u001d\\n\\u0004\",\n    \"\\u0003\\u0005\\u0006\\u0005 \\n\\u0005\\r\\u0005\\u000e\\u0005!\\u0003\\u0005\\u0002\",\n    \"\\u0002\\u0006\\u0002\\u0004\\u0006\\b\\u0002\\u0002\\u0002\\'\\u0002\\u000b\\u0003\",\n    \"\\u0002\\u0002\\u0002\\u0004\\u0013\\u0003\\u0002\\u0002\\u0002\\u0006\\u001c\\u0003\",\n    \"\\u0002\\u0002\\u0002\\b\\u001f\\u0003\\u0002\\u0002\\u0002\\n\\f\\u0005\\u0004\\u0003\",\n    \"\\u0002\\u000b\\n\\u0003\\u0002\\u0002\\u0002\\u000b\\f\\u0003\\u0002\\u0002\\u0002\",\n    \"\\f\\u0011\\u0003\\u0002\\u0002\\u0002\\r\\u000f\\u0007\\u0003\\u0002\\u0002\\u000e\",\n    \"\\u0010\\u0005\\u0004\\u0003\\u0002\\u000f\\u000e\\u0003\\u0002\\u0002\\u0002\\u000f\",\n    \"\\u0010\\u0003\\u0002\\u0002\\u0002\\u0010\\u0012\\u0003\\u0002\\u0002\\u0002\\u0011\",\n    \"\\r\\u0003\\u0002\\u0002\\u0002\\u0011\\u0012\\u0003\\u0002\\u0002\\u0002\\u0012\",\n    \"\\u0003\\u0003\\u0002\\u0002\\u0002\\u0013\\u0015\\u0005\\u0006\\u0004\\u0002\\u0014\",\n    \"\\u0016\\u0005\\b\\u0005\\u0002\\u0015\\u0014\\u0003\\u0002\\u0002\\u0002\\u0015\",\n    \"\\u0016\\u0003\\u0002\\u0002\\u0002\\u0016\\u0005\\u0003\\u0002\\u0002\\u0002\\u0017\",\n    \"\\u001d\\u0007\\u0005\\u0002\\u0002\\u0018\\u001d\\u0007\\u0006\\u0002\\u0002\\u0019\",\n    \"\\u001d\\u0007\\u0007\\u0002\\u0002\\u001a\\u001b\\u0007\\u0007\\u0002\\u0002\\u001b\",\n    \"\\u001d\\u0007\\u0006\\u0002\\u0002\\u001c\\u0017\\u0003\\u0002\\u0002\\u0002\\u001c\",\n    \"\\u0018\\u0003\\u0002\\u0002\\u0002\\u001c\\u0019\\u0003\\u0002\\u0002\\u0002\\u001c\",\n    \"\\u001a\\u0003\\u0002\\u0002\\u0002\\u001d\\u0007\\u0003\\u0002\\u0002\\u0002\\u001e\",\n    \" \\u0007\\u0004\\u0002\\u0002\\u001f\\u001e\\u0003\\u0002\\u0002\\u0002 !\\u0003\",\n    \"\\u0002\\u0002\\u0002!\\u001f\\u0003\\u0002\\u0002\\u0002!\\\"\\u0003\\u0002\\u0002\",\n    \"\\u0002\\\"\\t\\u0003\\u0002\\u0002\\u0002\\b\\u000b\\u000f\\u0011\\u0015\\u001c!\"].join(\"\");\n\n\nconst atn = new antlr4.atn.ATNDeserializer().deserialize(serializedATN);\n\nconst decisionsToDFA = atn.decisionToState.map( (ds, index) => new antlr4.dfa.DFA(ds, index) );\n\nconst sharedContextCache = new antlr4.PredictionContextCache();\n\nexport default class AmountParser extends antlr4.Parser {\n\n    static grammarFileName = \"Amount.g4\";\n    static literalNames = [ null, \"'or'\", null, null, null, null, \"','\" ];\n    static symbolicNames = [ null, null, \"WORD\", \"DECIMAL\", \"FRACTION\", \n                             \"WHOLE_NUMBER\", \"COMMA\", \"WS\" ];\n    static ruleNames = [ \"amount\", \"measurement\", \"quantity\", \"unit\" ];\n\n    constructor(input) {\n        super(input);\n        this._interp = new antlr4.atn.ParserATNSimulator(this, atn, decisionsToDFA, sharedContextCache);\n        this.ruleNames = AmountParser.ruleNames;\n        this.literalNames = AmountParser.literalNames;\n        this.symbolicNames = AmountParser.symbolicNames;\n    }\n\n    get atn() {\n        return atn;\n    }\n\n\n\n\tamount() {\n\t    let localctx = new AmountContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 0, AmountParser.RULE_amount);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 9;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        if((((_la) & ~0x1f) == 0 && ((1 << _la) & ((1 << AmountParser.DECIMAL) | (1 << AmountParser.FRACTION) | (1 << AmountParser.WHOLE_NUMBER))) !== 0)) {\n\t            this.state = 8;\n\t            this.measurement();\n\t        }\n\n\t        this.state = 15;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        if(_la===AmountParser.T__0) {\n\t            this.state = 11;\n\t            this.match(AmountParser.T__0);\n\t            this.state = 13;\n\t            this._errHandler.sync(this);\n\t            _la = this._input.LA(1);\n\t            if((((_la) & ~0x1f) == 0 && ((1 << _la) & ((1 << AmountParser.DECIMAL) | (1 << AmountParser.FRACTION) | (1 << AmountParser.WHOLE_NUMBER))) !== 0)) {\n\t                this.state = 12;\n\t                this.measurement();\n\t            }\n\n\t        }\n\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tmeasurement() {\n\t    let localctx = new MeasurementContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 2, AmountParser.RULE_measurement);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 17;\n\t        this.quantity();\n\t        this.state = 19;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        if(_la===AmountParser.WORD) {\n\t            this.state = 18;\n\t            this.unit();\n\t        }\n\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tquantity() {\n\t    let localctx = new QuantityContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 4, AmountParser.RULE_quantity);\n\t    try {\n\t        this.state = 26;\n\t        this._errHandler.sync(this);\n\t        var la_ = this._interp.adaptivePredict(this._input,4,this._ctx);\n\t        switch(la_) {\n\t        case 1:\n\t            this.enterOuterAlt(localctx, 1);\n\t            this.state = 21;\n\t            this.match(AmountParser.DECIMAL);\n\t            break;\n\n\t        case 2:\n\t            this.enterOuterAlt(localctx, 2);\n\t            this.state = 22;\n\t            this.match(AmountParser.FRACTION);\n\t            break;\n\n\t        case 3:\n\t            this.enterOuterAlt(localctx, 3);\n\t            this.state = 23;\n\t            this.match(AmountParser.WHOLE_NUMBER);\n\t            break;\n\n\t        case 4:\n\t            this.enterOuterAlt(localctx, 4);\n\t            this.state = 24;\n\t            this.match(AmountParser.WHOLE_NUMBER);\n\t            this.state = 25;\n\t            this.match(AmountParser.FRACTION);\n\t            break;\n\n\t        }\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tunit() {\n\t    let localctx = new UnitContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 6, AmountParser.RULE_unit);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 29; \n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        do {\n\t            this.state = 28;\n\t            this.match(AmountParser.WORD);\n\t            this.state = 31; \n\t            this._errHandler.sync(this);\n\t            _la = this._input.LA(1);\n\t        } while(_la===AmountParser.WORD);\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n}\n\nAmountParser.EOF = antlr4.Token.EOF;\nAmountParser.T__0 = 1;\nAmountParser.WORD = 2;\nAmountParser.DECIMAL = 3;\nAmountParser.FRACTION = 4;\nAmountParser.WHOLE_NUMBER = 5;\nAmountParser.COMMA = 6;\nAmountParser.WS = 7;\n\nAmountParser.RULE_amount = 0;\nAmountParser.RULE_measurement = 1;\nAmountParser.RULE_quantity = 2;\nAmountParser.RULE_unit = 3;\n\nclass AmountContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = AmountParser.RULE_amount;\n    }\n\n\tmeasurement = function(i) {\n\t    if(i===undefined) {\n\t        i = null;\n\t    }\n\t    if(i===null) {\n\t        return this.getTypedRuleContexts(MeasurementContext);\n\t    } else {\n\t        return this.getTypedRuleContext(MeasurementContext,i);\n\t    }\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.enterAmount(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.exitAmount(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass MeasurementContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = AmountParser.RULE_measurement;\n    }\n\n\tquantity() {\n\t    return this.getTypedRuleContext(QuantityContext,0);\n\t};\n\n\tunit() {\n\t    return this.getTypedRuleContext(UnitContext,0);\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.enterMeasurement(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.exitMeasurement(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass QuantityContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = AmountParser.RULE_quantity;\n    }\n\n\tDECIMAL() {\n\t    return this.getToken(AmountParser.DECIMAL, 0);\n\t};\n\n\tFRACTION() {\n\t    return this.getToken(AmountParser.FRACTION, 0);\n\t};\n\n\tWHOLE_NUMBER() {\n\t    return this.getToken(AmountParser.WHOLE_NUMBER, 0);\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.enterQuantity(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.exitQuantity(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass UnitContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = AmountParser.RULE_unit;\n    }\n\n\tWORD = function(i) {\n\t\tif(i===undefined) {\n\t\t\ti = null;\n\t\t}\n\t    if(i===null) {\n\t        return this.getTokens(AmountParser.WORD);\n\t    } else {\n\t        return this.getToken(AmountParser.WORD, i);\n\t    }\n\t};\n\n\n\tenterRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.enterUnit(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof AmountListener ) {\n\t        listener.exitUnit(this);\n\t\t}\n\t}\n\n\n}\n\n\n\n\nAmountParser.AmountContext = AmountContext; \nAmountParser.MeasurementContext = MeasurementContext; \nAmountParser.QuantityContext = QuantityContext; \nAmountParser.UnitContext = UnitContext; \n","import antlr4 from 'antlr4';\nimport Fraction from 'fraction.js';\nimport _ from 'lodash';\nimport AmountLexer from '../../../generated/parser/AmountLexer';\nimport AmountListener from '../../../generated/parser/AmountListener';\nimport AmountParser from '../../../generated/parser/AmountParser';\nimport { CaseChangingStream } from './CaseChangingStream';\n\nfunction toNumber(str) {\n  return str.includes('/') ? new Fraction(str).valueOf() : _.toNumber(str);\n}\n\nfunction getCurrentMeasurement(content) {\n  if (_.get(content, \"alternateMeasurement\")) {\n    return _.get(content, \"alternateMeasurement\");\n  } else {\n    return _.get(content, \"measurement\");\n  }\n}\nclass AmountDecomposer extends AmountListener {\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this.content = {};\n    this.amountStart = 0;\n  }\n\n  exitQuantity(ctx) {\n    const val = this.input.substring(ctx.start.column, ctx.stop.stop + 1);\n    const measurement = getCurrentMeasurement(this.content);\n    _.set(measurement, \"quantityText\", val);\n    _.set(measurement, \"quantity\", toNumber(val));\n  }\n\n  exitUnit(ctx) {\n    const val = this.input.substring(ctx.start.column, ctx.stop.stop + 1);\n    const measurement = getCurrentMeasurement(this.content);\n    _.set(measurement, \"unitText\", val);\n  }\n\n  enterMeasurement(ctx) {\n    if (this.amountStart === 0) {\n      this.amountStart = ctx.start.column;\n    }\n    if (_.isUndefined(_.get(this.content, \"measurement\"))) {\n      _.set(this.content, \"measurement\", {});\n    } else {\n      _.set(this.content, \"alternateMeasurement\", {});\n    }\n  }\n\n  getContent() {\n    return this.content;\n  }\n}\n\nclass SyntaxErrorListener extends antlr4.error.ErrorListener {\n  constructor() {\n    super();\n    this.hasError = false;\n  }\n\n  syntaxError(_recognizer, _offendingSymbol, _line, _column, _msg, _e) {\n    this.hasError = true;\n  }\n\n}\n\nexport default function parse(input) {\n\n  const chars = new antlr4.InputStream(input);\n  const lowerCaseChars = new CaseChangingStream(chars, false);\n  const lexer = new AmountLexer(lowerCaseChars);\n  const errorListener = new SyntaxErrorListener();\n  lexer.removeErrorListeners();\n  lexer.addErrorListener(errorListener);\n  const tokens = new antlr4.CommonTokenStream(lexer);\n  const parser = new AmountParser(tokens);\n  parser.buildParseTrees = true;\n  const tree = parser.amount();\n  const decomposer = new AmountDecomposer(input);\n  antlr4.tree.ParseTreeWalker.DEFAULT.walk(decomposer, tree);\n\n  const parsed = decomposer.getContent();\n  if (errorListener.hasError) {\n    _.set(parsed, \"hasError\", true);\n  }\n  return parsed;\n}\n","import _ from \"lodash\";\nimport { parseUnit } from \"../convert\";\nimport parse, { Measurement } from \"./amount\";\n\nfunction compose(quantityText: string | undefined, unitText: string) {\n  return quantityText + \" \" + unitText;\n}\n\nfunction createMeasurement(measurement?: Measurement) {\n  return {\n    quantity: measurement?.quantity || 0,\n    unit: parseUnit(measurement?.unitText),\n    unitText: measurement?.unitText,\n    amountWithUnitText: _.partial(compose, measurement?.quantityText),\n  }\n}\n\nexport default function decompose(amount: string) {\n  const { measurement, alternateMeasurement } = parse(amount);\n  if (_.isUndefined(alternateMeasurement)) {\n    return {\n      measurement: createMeasurement(measurement),\n    };  \n  } else {\n    return {\n      measurement: createMeasurement(measurement),\n      alternateMeasurement: createMeasurement(alternateMeasurement),\n    };  \n  }\n}\n\nexport type DecomposedAmount = ReturnType<typeof decompose>;\n\n","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/food-description/FoodDescription.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\n\n\n\nconst serializedATN = [\"\\u0003\\u608b\\ua72a\\u8133\\ub9ed\\u417c\\u3be7\\u7786\",\n    \"\\u5964\\u0002\\bS\\b\\u0001\\u0004\\u0002\\t\\u0002\\u0004\\u0003\\t\\u0003\\u0004\",\n    \"\\u0004\\t\\u0004\\u0004\\u0005\\t\\u0005\\u0004\\u0006\\t\\u0006\\u0004\\u0007\\t\",\n    \"\\u0007\\u0004\\b\\t\\b\\u0003\\u0002\\u0006\\u0002\\u0013\\n\\u0002\\r\\u0002\\u000e\",\n    \"\\u0002\\u0014\\u0003\\u0002\\u0006\\u0002\\u0018\\n\\u0002\\r\\u0002\\u000e\\u0002\",\n    \"\\u0019\\u0003\\u0002\\u0006\\u0002\\u001d\\n\\u0002\\r\\u0002\\u000e\\u0002\\u001e\",\n    \"\\u0005\\u0002!\\n\\u0002\\u0003\\u0003\\u0003\\u0003\\u0003\\u0004\\u0006\\u0004\",\n    \"&\\n\\u0004\\r\\u0004\\u000e\\u0004\\'\\u0003\\u0004\\u0003\\u0004\\u0007\\u0004\",\n    \",\\n\\u0004\\f\\u0004\\u000e\\u0004/\\u000b\\u0004\\u0003\\u0004\\u0003\\u0004\\u0006\",\n    \"\\u00043\\n\\u0004\\r\\u0004\\u000e\\u00044\\u0005\\u00047\\n\\u0004\\u0003\\u0005\",\n    \"\\u0006\\u0005:\\n\\u0005\\r\\u0005\\u000e\\u0005;\\u0003\\u0005\\u0003\\u0005\\u0006\",\n    \"\\u0005@\\n\\u0005\\r\\u0005\\u000e\\u0005A\\u0003\\u0006\\u0006\\u0006E\\n\\u0006\",\n    \"\\r\\u0006\\u000e\\u0006F\\u0003\\u0007\\u0003\\u0007\\u0003\\u0007\\u0003\\u0007\",\n    \"\\u0003\\b\\u0006\\bN\\n\\b\\r\\b\\u000e\\bO\\u0003\\b\\u0003\\b\\u0002\\u0002\\t\\u0003\",\n    \"\\u0003\\u0005\\u0002\\u0007\\u0004\\t\\u0005\\u000b\\u0006\\r\\u0007\\u000f\\b\\u0003\",\n    \"\\u0002\\u0006\\u0005\\u0002//C\\\\c|\\u0003\\u00022;\\u0006\\u0002\\'\\'//C\\\\c\",\n    \"|\\u0005\\u0002\\u000b\\f\\u000f\\u000f\\\"\\\"\\u0002]\\u0002\\u0003\\u0003\\u0002\",\n    \"\\u0002\\u0002\\u0002\\u0007\\u0003\\u0002\\u0002\\u0002\\u0002\\t\\u0003\\u0002\",\n    \"\\u0002\\u0002\\u0002\\u000b\\u0003\\u0002\\u0002\\u0002\\u0002\\r\\u0003\\u0002\",\n    \"\\u0002\\u0002\\u0002\\u000f\\u0003\\u0002\\u0002\\u0002\\u0003 \\u0003\\u0002\",\n    \"\\u0002\\u0002\\u0005\\\"\\u0003\\u0002\\u0002\\u0002\\u00076\\u0003\\u0002\\u0002\",\n    \"\\u0002\\t9\\u0003\\u0002\\u0002\\u0002\\u000bD\\u0003\\u0002\\u0002\\u0002\\rH\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u000fM\\u0003\\u0002\\u0002\\u0002\\u0011\\u0013\",\n    \"\\t\\u0002\\u0002\\u0002\\u0012\\u0011\\u0003\\u0002\\u0002\\u0002\\u0013\\u0014\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u0014\\u0012\\u0003\\u0002\\u0002\\u0002\\u0014\\u0015\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u0015!\\u0003\\u0002\\u0002\\u0002\\u0016\\u0018\",\n    \"\\t\\u0003\\u0002\\u0002\\u0017\\u0016\\u0003\\u0002\\u0002\\u0002\\u0018\\u0019\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u0019\\u0017\\u0003\\u0002\\u0002\\u0002\\u0019\\u001a\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u001a\\u001c\\u0003\\u0002\\u0002\\u0002\\u001b\\u001d\",\n    \"\\t\\u0004\\u0002\\u0002\\u001c\\u001b\\u0003\\u0002\\u0002\\u0002\\u001d\\u001e\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u001e\\u001c\\u0003\\u0002\\u0002\\u0002\\u001e\\u001f\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u001f!\\u0003\\u0002\\u0002\\u0002 \\u0012\\u0003\",\n    \"\\u0002\\u0002\\u0002 \\u0017\\u0003\\u0002\\u0002\\u0002!\\u0004\\u0003\\u0002\",\n    \"\\u0002\\u0002\\\"#\\t\\u0003\\u0002\\u0002#\\u0006\\u0003\\u0002\\u0002\\u0002$\",\n    \"&\\u0005\\u0005\\u0003\\u0002%$\\u0003\\u0002\\u0002\\u0002&\\'\\u0003\\u0002\\u0002\",\n    \"\\u0002\\'%\\u0003\\u0002\\u0002\\u0002\\'(\\u0003\\u0002\\u0002\\u0002()\\u0003\",\n    \"\\u0002\\u0002\\u0002)-\\u00070\\u0002\\u0002*,\\u0005\\u0005\\u0003\\u0002+*\",\n    \"\\u0003\\u0002\\u0002\\u0002,/\\u0003\\u0002\\u0002\\u0002-+\\u0003\\u0002\\u0002\",\n    \"\\u0002-.\\u0003\\u0002\\u0002\\u0002.7\\u0003\\u0002\\u0002\\u0002/-\\u0003\\u0002\",\n    \"\\u0002\\u000202\\u00070\\u0002\\u000213\\u0005\\u0005\\u0003\\u000221\\u0003\",\n    \"\\u0002\\u0002\\u000234\\u0003\\u0002\\u0002\\u000242\\u0003\\u0002\\u0002\\u0002\",\n    \"45\\u0003\\u0002\\u0002\\u000257\\u0003\\u0002\\u0002\\u00026%\\u0003\\u0002\\u0002\",\n    \"\\u000260\\u0003\\u0002\\u0002\\u00027\\b\\u0003\\u0002\\u0002\\u00028:\\u0005\",\n    \"\\u0005\\u0003\\u000298\\u0003\\u0002\\u0002\\u0002:;\\u0003\\u0002\\u0002\\u0002\",\n    \";9\\u0003\\u0002\\u0002\\u0002;<\\u0003\\u0002\\u0002\\u0002<=\\u0003\\u0002\\u0002\",\n    \"\\u0002=?\\u00071\\u0002\\u0002>@\\u0005\\u0005\\u0003\\u0002?>\\u0003\\u0002\",\n    \"\\u0002\\u0002@A\\u0003\\u0002\\u0002\\u0002A?\\u0003\\u0002\\u0002\\u0002AB\\u0003\",\n    \"\\u0002\\u0002\\u0002B\\n\\u0003\\u0002\\u0002\\u0002CE\\u0005\\u0005\\u0003\\u0002\",\n    \"DC\\u0003\\u0002\\u0002\\u0002EF\\u0003\\u0002\\u0002\\u0002FD\\u0003\\u0002\\u0002\",\n    \"\\u0002FG\\u0003\\u0002\\u0002\\u0002G\\f\\u0003\\u0002\\u0002\\u0002HI\\u0007\",\n    \".\\u0002\\u0002IJ\\u0003\\u0002\\u0002\\u0002JK\\b\\u0007\\u0002\\u0002K\\u000e\",\n    \"\\u0003\\u0002\\u0002\\u0002LN\\t\\u0005\\u0002\\u0002ML\\u0003\\u0002\\u0002\\u0002\",\n    \"NO\\u0003\\u0002\\u0002\\u0002OM\\u0003\\u0002\\u0002\\u0002OP\\u0003\\u0002\\u0002\",\n    \"\\u0002PQ\\u0003\\u0002\\u0002\\u0002QR\\b\\b\\u0003\\u0002R\\u0010\\u0003\\u0002\",\n    \"\\u0002\\u0002\\u000f\\u0002\\u0014\\u0019\\u001e \\'-46;AFO\\u0004\\u0002\\u0003\",\n    \"\\u0002\\b\\u0002\\u0002\"].join(\"\");\n\n\nconst atn = new antlr4.atn.ATNDeserializer().deserialize(serializedATN);\n\nconst decisionsToDFA = atn.decisionToState.map( (ds, index) => new antlr4.dfa.DFA(ds, index) );\n\nexport default class FoodDescriptionLexer extends antlr4.Lexer {\n\n    static grammarFileName = \"FoodDescription.g4\";\n    static channelNames = [ \"DEFAULT_TOKEN_CHANNEL\", \"HIDDEN\" ];\n\tstatic modeNames = [ \"DEFAULT_MODE\" ];\n\tstatic literalNames = [ null, null, null, null, null, \"','\" ];\n\tstatic symbolicNames = [ null, \"WORD\", \"DECIMAL\", \"FRACTION\", \"WHOLE_NUMBER\", \n                          \"COMMA\", \"WS\" ];\n\tstatic ruleNames = [ \"WORD\", \"DIGIT\", \"DECIMAL\", \"FRACTION\", \"WHOLE_NUMBER\", \n                      \"COMMA\", \"WS\" ];\n\n    constructor(input) {\n        super(input)\n        this._interp = new antlr4.atn.LexerATNSimulator(this, atn, decisionsToDFA, new antlr4.PredictionContextCache());\n    }\n\n    get atn() {\n        return atn;\n    }\n}\n\nFoodDescriptionLexer.EOF = antlr4.Token.EOF;\nFoodDescriptionLexer.WORD = 1;\nFoodDescriptionLexer.DECIMAL = 2;\nFoodDescriptionLexer.FRACTION = 3;\nFoodDescriptionLexer.WHOLE_NUMBER = 4;\nFoodDescriptionLexer.COMMA = 5;\nFoodDescriptionLexer.WS = 6;\n\n\n\n","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/food-description/FoodDescription.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\n\n// This class defines a complete listener for a parse tree produced by FoodDescriptionParser.\nexport default class FoodDescriptionListener extends antlr4.tree.ParseTreeListener {\n\n\t// Enter a parse tree produced by FoodDescriptionParser#foodDescription.\n\tenterFoodDescription(ctx) {\n\t}\n\n\t// Exit a parse tree produced by FoodDescriptionParser#foodDescription.\n\texitFoodDescription(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by FoodDescriptionParser#foodName.\n\tenterFoodName(ctx) {\n\t}\n\n\t// Exit a parse tree produced by FoodDescriptionParser#foodName.\n\texitFoodName(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by FoodDescriptionParser#measurement.\n\tenterMeasurement(ctx) {\n\t}\n\n\t// Exit a parse tree produced by FoodDescriptionParser#measurement.\n\texitMeasurement(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by FoodDescriptionParser#quantity.\n\tenterQuantity(ctx) {\n\t}\n\n\t// Exit a parse tree produced by FoodDescriptionParser#quantity.\n\texitQuantity(ctx) {\n\t}\n\n\n\t// Enter a parse tree produced by FoodDescriptionParser#unit.\n\tenterUnit(ctx) {\n\t}\n\n\t// Exit a parse tree produced by FoodDescriptionParser#unit.\n\texitUnit(ctx) {\n\t}\n\n\n\n}","// Generated from /home/runner/work/diet-diary/diet-diary/antlr4/food-description/FoodDescription.g4 by ANTLR 4.9.2\n// jshint ignore: start\nimport antlr4 from 'antlr4';\nimport FoodDescriptionListener from './FoodDescriptionListener.js';\n\nconst serializedATN = [\"\\u0003\\u608b\\ua72a\\u8133\\ub9ed\\u417c\\u3be7\\u7786\",\n    \"\\u5964\\u0003\\b(\\u0004\\u0002\\t\\u0002\\u0004\\u0003\\t\\u0003\\u0004\\u0004\",\n    \"\\t\\u0004\\u0004\\u0005\\t\\u0005\\u0004\\u0006\\t\\u0006\\u0003\\u0002\\u0003\\u0002\",\n    \"\\u0005\\u0002\\u000f\\n\\u0002\\u0003\\u0003\\u0003\\u0003\\u0007\\u0003\\u0013\",\n    \"\\n\\u0003\\f\\u0003\\u000e\\u0003\\u0016\\u000b\\u0003\\u0003\\u0004\\u0003\\u0004\",\n    \"\\u0005\\u0004\\u001a\\n\\u0004\\u0003\\u0005\\u0003\\u0005\\u0003\\u0005\\u0003\",\n    \"\\u0005\\u0003\\u0005\\u0005\\u0005!\\n\\u0005\\u0003\\u0006\\u0006\\u0006$\\n\\u0006\",\n    \"\\r\\u0006\\u000e\\u0006%\\u0003\\u0006\\u0002\\u0002\\u0007\\u0002\\u0004\\u0006\",\n    \"\\b\\n\\u0002\\u0003\\u0004\\u0002\\u0003\\u0003\\u0007\\u0007\\u0002)\\u0002\\f\",\n    \"\\u0003\\u0002\\u0002\\u0002\\u0004\\u0010\\u0003\\u0002\\u0002\\u0002\\u0006\\u0017\",\n    \"\\u0003\\u0002\\u0002\\u0002\\b \\u0003\\u0002\\u0002\\u0002\\n#\\u0003\\u0002\\u0002\",\n    \"\\u0002\\f\\u000e\\u0005\\u0004\\u0003\\u0002\\r\\u000f\\u0005\\u0006\\u0004\\u0002\",\n    \"\\u000e\\r\\u0003\\u0002\\u0002\\u0002\\u000e\\u000f\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u000f\\u0003\\u0003\\u0002\\u0002\\u0002\\u0010\\u0014\\u0007\\u0003\\u0002\\u0002\",\n    \"\\u0011\\u0013\\t\\u0002\\u0002\\u0002\\u0012\\u0011\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u0013\\u0016\\u0003\\u0002\\u0002\\u0002\\u0014\\u0012\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u0014\\u0015\\u0003\\u0002\\u0002\\u0002\\u0015\\u0005\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u0016\\u0014\\u0003\\u0002\\u0002\\u0002\\u0017\\u0019\\u0005\\b\\u0005\\u0002\",\n    \"\\u0018\\u001a\\u0005\\n\\u0006\\u0002\\u0019\\u0018\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u0019\\u001a\\u0003\\u0002\\u0002\\u0002\\u001a\\u0007\\u0003\\u0002\\u0002\\u0002\",\n    \"\\u001b!\\u0007\\u0004\\u0002\\u0002\\u001c!\\u0007\\u0005\\u0002\\u0002\\u001d\",\n    \"!\\u0007\\u0006\\u0002\\u0002\\u001e\\u001f\\u0007\\u0006\\u0002\\u0002\\u001f\",\n    \"!\\u0007\\u0005\\u0002\\u0002 \\u001b\\u0003\\u0002\\u0002\\u0002 \\u001c\\u0003\",\n    \"\\u0002\\u0002\\u0002 \\u001d\\u0003\\u0002\\u0002\\u0002 \\u001e\\u0003\\u0002\",\n    \"\\u0002\\u0002!\\t\\u0003\\u0002\\u0002\\u0002\\\"$\\u0007\\u0003\\u0002\\u0002#\",\n    \"\\\"\\u0003\\u0002\\u0002\\u0002$%\\u0003\\u0002\\u0002\\u0002%#\\u0003\\u0002\\u0002\",\n    \"\\u0002%&\\u0003\\u0002\\u0002\\u0002&\\u000b\\u0003\\u0002\\u0002\\u0002\\u0007\",\n    \"\\u000e\\u0014\\u0019 %\"].join(\"\");\n\n\nconst atn = new antlr4.atn.ATNDeserializer().deserialize(serializedATN);\n\nconst decisionsToDFA = atn.decisionToState.map( (ds, index) => new antlr4.dfa.DFA(ds, index) );\n\nconst sharedContextCache = new antlr4.PredictionContextCache();\n\nexport default class FoodDescriptionParser extends antlr4.Parser {\n\n    static grammarFileName = \"FoodDescription.g4\";\n    static literalNames = [ null, null, null, null, null, \"','\" ];\n    static symbolicNames = [ null, \"WORD\", \"DECIMAL\", \"FRACTION\", \"WHOLE_NUMBER\", \n                             \"COMMA\", \"WS\" ];\n    static ruleNames = [ \"foodDescription\", \"foodName\", \"measurement\", \"quantity\", \n                         \"unit\" ];\n\n    constructor(input) {\n        super(input);\n        this._interp = new antlr4.atn.ParserATNSimulator(this, atn, decisionsToDFA, sharedContextCache);\n        this.ruleNames = FoodDescriptionParser.ruleNames;\n        this.literalNames = FoodDescriptionParser.literalNames;\n        this.symbolicNames = FoodDescriptionParser.symbolicNames;\n    }\n\n    get atn() {\n        return atn;\n    }\n\n\n\n\tfoodDescription() {\n\t    let localctx = new FoodDescriptionContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 0, FoodDescriptionParser.RULE_foodDescription);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 10;\n\t        this.foodName();\n\t        this.state = 12;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        if((((_la) & ~0x1f) == 0 && ((1 << _la) & ((1 << FoodDescriptionParser.DECIMAL) | (1 << FoodDescriptionParser.FRACTION) | (1 << FoodDescriptionParser.WHOLE_NUMBER))) !== 0)) {\n\t            this.state = 11;\n\t            this.measurement();\n\t        }\n\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tfoodName() {\n\t    let localctx = new FoodNameContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 2, FoodDescriptionParser.RULE_foodName);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 14;\n\t        this.match(FoodDescriptionParser.WORD);\n\t        this.state = 18;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        while(_la===FoodDescriptionParser.WORD || _la===FoodDescriptionParser.COMMA) {\n\t            this.state = 15;\n\t            _la = this._input.LA(1);\n\t            if(!(_la===FoodDescriptionParser.WORD || _la===FoodDescriptionParser.COMMA)) {\n\t            this._errHandler.recoverInline(this);\n\t            }\n\t            else {\n\t            \tthis._errHandler.reportMatch(this);\n\t                this.consume();\n\t            }\n\t            this.state = 20;\n\t            this._errHandler.sync(this);\n\t            _la = this._input.LA(1);\n\t        }\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tmeasurement() {\n\t    let localctx = new MeasurementContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 4, FoodDescriptionParser.RULE_measurement);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 21;\n\t        this.quantity();\n\t        this.state = 23;\n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        if(_la===FoodDescriptionParser.WORD) {\n\t            this.state = 22;\n\t            this.unit();\n\t        }\n\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tquantity() {\n\t    let localctx = new QuantityContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 6, FoodDescriptionParser.RULE_quantity);\n\t    try {\n\t        this.state = 30;\n\t        this._errHandler.sync(this);\n\t        var la_ = this._interp.adaptivePredict(this._input,3,this._ctx);\n\t        switch(la_) {\n\t        case 1:\n\t            this.enterOuterAlt(localctx, 1);\n\t            this.state = 25;\n\t            this.match(FoodDescriptionParser.DECIMAL);\n\t            break;\n\n\t        case 2:\n\t            this.enterOuterAlt(localctx, 2);\n\t            this.state = 26;\n\t            this.match(FoodDescriptionParser.FRACTION);\n\t            break;\n\n\t        case 3:\n\t            this.enterOuterAlt(localctx, 3);\n\t            this.state = 27;\n\t            this.match(FoodDescriptionParser.WHOLE_NUMBER);\n\t            break;\n\n\t        case 4:\n\t            this.enterOuterAlt(localctx, 4);\n\t            this.state = 28;\n\t            this.match(FoodDescriptionParser.WHOLE_NUMBER);\n\t            this.state = 29;\n\t            this.match(FoodDescriptionParser.FRACTION);\n\t            break;\n\n\t        }\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n\n\tunit() {\n\t    let localctx = new UnitContext(this, this._ctx, this.state);\n\t    this.enterRule(localctx, 8, FoodDescriptionParser.RULE_unit);\n\t    var _la = 0; // Token type\n\t    try {\n\t        this.enterOuterAlt(localctx, 1);\n\t        this.state = 33; \n\t        this._errHandler.sync(this);\n\t        _la = this._input.LA(1);\n\t        do {\n\t            this.state = 32;\n\t            this.match(FoodDescriptionParser.WORD);\n\t            this.state = 35; \n\t            this._errHandler.sync(this);\n\t            _la = this._input.LA(1);\n\t        } while(_la===FoodDescriptionParser.WORD);\n\t    } catch (re) {\n\t    \tif(re instanceof antlr4.error.RecognitionException) {\n\t\t        localctx.exception = re;\n\t\t        this._errHandler.reportError(this, re);\n\t\t        this._errHandler.recover(this, re);\n\t\t    } else {\n\t\t    \tthrow re;\n\t\t    }\n\t    } finally {\n\t        this.exitRule();\n\t    }\n\t    return localctx;\n\t}\n\n\n}\n\nFoodDescriptionParser.EOF = antlr4.Token.EOF;\nFoodDescriptionParser.WORD = 1;\nFoodDescriptionParser.DECIMAL = 2;\nFoodDescriptionParser.FRACTION = 3;\nFoodDescriptionParser.WHOLE_NUMBER = 4;\nFoodDescriptionParser.COMMA = 5;\nFoodDescriptionParser.WS = 6;\n\nFoodDescriptionParser.RULE_foodDescription = 0;\nFoodDescriptionParser.RULE_foodName = 1;\nFoodDescriptionParser.RULE_measurement = 2;\nFoodDescriptionParser.RULE_quantity = 3;\nFoodDescriptionParser.RULE_unit = 4;\n\nclass FoodDescriptionContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = FoodDescriptionParser.RULE_foodDescription;\n    }\n\n\tfoodName() {\n\t    return this.getTypedRuleContext(FoodNameContext,0);\n\t};\n\n\tmeasurement() {\n\t    return this.getTypedRuleContext(MeasurementContext,0);\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.enterFoodDescription(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.exitFoodDescription(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass FoodNameContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = FoodDescriptionParser.RULE_foodName;\n    }\n\n\tWORD = function(i) {\n\t\tif(i===undefined) {\n\t\t\ti = null;\n\t\t}\n\t    if(i===null) {\n\t        return this.getTokens(FoodDescriptionParser.WORD);\n\t    } else {\n\t        return this.getToken(FoodDescriptionParser.WORD, i);\n\t    }\n\t};\n\n\n\tCOMMA = function(i) {\n\t\tif(i===undefined) {\n\t\t\ti = null;\n\t\t}\n\t    if(i===null) {\n\t        return this.getTokens(FoodDescriptionParser.COMMA);\n\t    } else {\n\t        return this.getToken(FoodDescriptionParser.COMMA, i);\n\t    }\n\t};\n\n\n\tenterRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.enterFoodName(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.exitFoodName(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass MeasurementContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = FoodDescriptionParser.RULE_measurement;\n    }\n\n\tquantity() {\n\t    return this.getTypedRuleContext(QuantityContext,0);\n\t};\n\n\tunit() {\n\t    return this.getTypedRuleContext(UnitContext,0);\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.enterMeasurement(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.exitMeasurement(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass QuantityContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = FoodDescriptionParser.RULE_quantity;\n    }\n\n\tDECIMAL() {\n\t    return this.getToken(FoodDescriptionParser.DECIMAL, 0);\n\t};\n\n\tFRACTION() {\n\t    return this.getToken(FoodDescriptionParser.FRACTION, 0);\n\t};\n\n\tWHOLE_NUMBER() {\n\t    return this.getToken(FoodDescriptionParser.WHOLE_NUMBER, 0);\n\t};\n\n\tenterRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.enterQuantity(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.exitQuantity(this);\n\t\t}\n\t}\n\n\n}\n\n\n\nclass UnitContext extends antlr4.ParserRuleContext {\n\n    constructor(parser, parent, invokingState) {\n        if(parent===undefined) {\n            parent = null;\n        }\n        if(invokingState===undefined || invokingState===null) {\n            invokingState = -1;\n        }\n        super(parent, invokingState);\n        this.parser = parser;\n        this.ruleIndex = FoodDescriptionParser.RULE_unit;\n    }\n\n\tWORD = function(i) {\n\t\tif(i===undefined) {\n\t\t\ti = null;\n\t\t}\n\t    if(i===null) {\n\t        return this.getTokens(FoodDescriptionParser.WORD);\n\t    } else {\n\t        return this.getToken(FoodDescriptionParser.WORD, i);\n\t    }\n\t};\n\n\n\tenterRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.enterUnit(this);\n\t\t}\n\t}\n\n\texitRule(listener) {\n\t    if(listener instanceof FoodDescriptionListener ) {\n\t        listener.exitUnit(this);\n\t\t}\n\t}\n\n\n}\n\n\n\n\nFoodDescriptionParser.FoodDescriptionContext = FoodDescriptionContext; \nFoodDescriptionParser.FoodNameContext = FoodNameContext; \nFoodDescriptionParser.MeasurementContext = MeasurementContext; \nFoodDescriptionParser.QuantityContext = QuantityContext; \nFoodDescriptionParser.UnitContext = UnitContext; \n","import antlr4 from 'antlr4';\nimport Fraction from 'fraction.js';\nimport _ from 'lodash';\nimport FoodDescriptionLexer from '../../../generated/parser/FoodDescriptionLexer';\nimport FoodDescriptionListener from '../../../generated/parser/FoodDescriptionListener';\nimport FoodDescriptionParser from '../../../generated/parser/FoodDescriptionParser';\nimport { CaseChangingStream } from './CaseChangingStream';\n\nfunction toNumber(str) {\n  return str.includes('/') ? new Fraction(str).valueOf() : _.toNumber(str);\n}\nclass FoodDescriptionDecomposer extends FoodDescriptionListener {\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this.content = {\n      foodName: \"\",\n    };\n    this.amountStart = 0;\n  }\n\n  exitFoodName(ctx) {\n    const stop = _.get(ctx, \"stop.stop\", ctx.start.column);\n    const val = this.input.substring(ctx.start.column, stop + 1);\n    _.set(this.content, \"foodName\", val);  \n  }\n\n  exitQuantity(ctx) {\n    const val = this.input.substring(ctx.start.column, ctx.stop.stop + 1);\n    const measurement = _.get(this.content, \"measurement\");\n    _.set(measurement, \"quantityText\", val);\n    _.set(measurement, \"quantity\", toNumber(val));\n  }\n\n  exitUnit(ctx) {\n    const val = this.input.substring(ctx.start.column, ctx.stop.stop + 1);\n    const measurement = _.get(this.content, \"measurement\");\n    _.set(measurement, \"unitText\", val);\n  }\n\n  enterMeasurement(ctx) {\n    _.set(this.content, \"measurement\", {});\n  }\n\n  exitMeasurement(ctx) {\n    const val = this.input.substring(ctx.start.column, ctx.stop.stop + 1);\n    _.set(this.content, \"amount\", val);\n  }\n\n  getContent() {\n    return this.content;\n  }\n}\n\nclass SyntaxErrorListener extends antlr4.error.ErrorListener {\n  constructor() {\n    super();\n    this.hasError = false;\n  }\n\n  syntaxError(_recognizer, _offendingSymbol, _line, _column, _msg, _e) {\n    this.hasError = true;\n  }\n\n}\n\nexport default function parse(input) {\n\n  if (_.isEmpty(input)) return { foodName: \"\" };\n\n  const chars = new antlr4.InputStream(input);\n  const lowerCaseChars = new CaseChangingStream(chars, false);\n  const lexer = new FoodDescriptionLexer(lowerCaseChars);\n  const errorListener = new SyntaxErrorListener();\n  lexer.removeErrorListeners();\n  lexer.addErrorListener(errorListener);\n  const tokens = new antlr4.CommonTokenStream(lexer);\n  const parser = new FoodDescriptionParser(tokens);\n  parser.buildParseTrees = true;\n  const tree = parser.foodDescription();\n  const decomposer = new FoodDescriptionDecomposer(input);\n  try {\n    antlr4.tree.ParseTreeWalker.DEFAULT.walk(decomposer, tree);\n  } catch (err) {\n    console.error(err);\n  }\n\n  const parsed = decomposer.getContent();\n  if (errorListener.hasError) {\n    _.set(parsed, \"hasError\", true);\n  }\n  return parsed;\n}\n","import _ from 'lodash';\nimport parse from '../parser/foodDescription';\n\nexport default function decompose(foodDescription: string) {\n  const { foodName, amount, measurement } = parse(foodDescription);\n  const unitText = measurement?.unitText;\n  // put a space after a word\n  const foodNameCompleted = foodDescription.substr(_.size(foodName), 1) === \" \";\n  const unitCompleted = (amount && unitText) ? foodDescription.substr(_.size(foodDescription) - 1, 1) === \" \" : false;\n  return {\n    foodName,\n    amount,\n    foodNameCompleted,\n    unitCompleted,\n  };\n}\nexport type DecomposedFoodDescription = ReturnType<typeof decompose>;\n","import { Serving } from '../../model/Food';\n\nexport interface Suggestion {\n  foodName: string;\n  amount?: string;\n  serving?: Serving;\n  bestChoice?: boolean;\n}\n\nexport function createSuggestion(foodName: string, amount?: string) {\n  return amount ? { foodName, amount } : { foodName };\n}\n","import _ from \"lodash\";\nimport { PortionSuggestion } from \"./PortionSuggestion\";\nimport { portions as breakfastPortions } from \"./breakfast-portion.json\";\nimport { portions as sandwichPortions } from \"./sandwich-portion.json\";\nimport { portions as saladPortions } from \"./salad-portion.json\";\nimport { portions as soupPortions } from \"./soup-portion.json\";\nimport { portions as mainCoursePortions } from \"./main-course-portion.json\";\nimport { portions as sideDishPortions } from \"./side-dish-portion.json\";\nimport { portions as snackPortions } from \"./snack-portion.json\";\nimport { portions as dessertPortions } from \"./dessert-portion.json\";\nimport { portions as beveragePortions } from \"./beverage-portion.json\";\n\nfunction toSuggestion({foodName, portionSize, serving}: PortionSuggestion) {\n  return {\n    foodName,\n    amount: portionSize,\n    serving,\n  }\n}\n\nexport default _.concat<PortionSuggestion>(\n  breakfastPortions,\n  sandwichPortions,\n  saladPortions,\n  soupPortions,\n  mainCoursePortions,\n  sideDishPortions,\n  snackPortions,\n  dessertPortions,\n  beveragePortions,\n).map(toSuggestion);","import _ from \"lodash\";\nimport { servings as fruitServings } from \"./fruit-serving.json\";\nimport { servings as vegetableServings } from \"./vegetable-serving.json\";\nimport { servings as carbohydrateServings } from \"./carbohydrate-serving.json\";\nimport { servings as proteinDiaryServings } from \"./protein-diary-serving.json\";\nimport { servings as fatServings } from \"./fat-serving.json\";\nimport { servings as sweetServings } from \"./sweet-serving.json\";\nimport { ServingSuggestion } from \"./ServingSuggestion\";\nimport { oneServingOf } from \"../../../model/servingFunction\";\n\nconst vegetableServing = (serving: any) => ({ ...serving, foodGroup: \"vegetable\" });\nconst fruitServing = (serving: any) => ({ ...serving, foodGroup: \"fruit\" });\nconst carbohydrateServing = (serving: any) => ({ ...serving, foodGroup: \"carbohydrate\" });\nconst proteinDiaryServing = (serving: any) => ({ ...serving, foodGroup: \"proteinDiary\" });\nconst fatServing = (serving: any) => ({ ...serving, foodGroup: \"fat\" });\nconst sweetServing = (serving: any) => ({ ...serving, foodGroup: \"sweet\" });\n\nfunction toSuggestion({foodName, servingSize, foodGroup, bestChoice}: ServingSuggestion) {\n  return {\n    foodName,\n    amount: servingSize,\n    serving: oneServingOf(foodGroup),\n    bestChoice,\n  }\n}\n\nexport default _.concat(\n  _.map(vegetableServings, vegetableServing),\n  _.map(fruitServings, fruitServing),\n  _.map(carbohydrateServings, carbohydrateServing),\n  _.map(proteinDiaryServings, proteinDiaryServing),\n  _.map(fatServings, fatServing),\n  _.map(sweetServings, sweetServing),\n).map(toSuggestion);","import _ from \"lodash\";\nimport MiniSearch, { SearchOptions } from \"minisearch\";\nimport portions from \"../portion/portions\";\nimport servings from \"../serving/servings\";\n\nconst METRIC_UNITS = [\n  \"milliliter\",\n  \"liter\",\n  \"gram\",\n  \"kilogram\",\n]\n\nfunction addIndexAsId(obj: object, i: number) { return _.set(obj, \"id\", i); }\n\nfunction buildDocuments(list: { amount: string }[]) {\n  const fullList = _.concat(\n    _.map(list, ({ amount }) => { return { unitText: amount } }),\n    _.map(METRIC_UNITS, unitText => { return { unitText } })\n  );\n  const miniSearch = new MiniSearch({\n    fields: ['unitText']\n  })\n\n  miniSearch.addAll(_.map(fullList, addIndexAsId));\n  return miniSearch;\n\n}\n\nconst miniSearch = buildDocuments(_.concat(servings, portions));\n\nfunction autoComplete(miniSearch: MiniSearch, partialUnit: string) {\n  const options: SearchOptions = {\n    fuzzy: true,\n    combineWith: \"AND\",\n  };\n  return _.map(miniSearch.autoSuggest(partialUnit, options), \"suggestion\");\n}\n\nexport default _.partial(autoComplete, miniSearch);","import _ from 'lodash';\nimport MiniSearch, { SearchOptions, SearchResult } from 'minisearch';\n\nfunction addIndexAsId(obj: object, i: number) { return _.set(obj, \"id\", i); }\n\nfunction find<T>(list: T[], res: SearchResult) {\n  return list[res.id];\n}\n\nexport function buildDocuments<T extends object>(list: T[]) {\n  const miniSearch = new MiniSearch({\n    fields: ['foodName']\n  })\n\n  miniSearch.addAll(_.map(list, addIndexAsId));\n  return {\n    miniSearch,\n    lookUp: _.partial(find, list),\n  }\n}\n\nfunction perform<T>(miniSearch: MiniSearch<T>, foodName: string) {\n  const options = { fuzzy: true };\n  return miniSearch.search(foodName, options);\n}\n\nexport function search<T>(\n  docs: { miniSearch: MiniSearch<T>, lookUp: (res: SearchResult) => T },\n  foodName: string\n) {\n  const { miniSearch, lookUp } = docs;\n  return _.map(perform(miniSearch, foodName), lookUp);\n}\n\nexport function autoSuggest<T>(\n  docs: { miniSearch: MiniSearch<T> },\n  partialFoodName: string) {\n  const { miniSearch } = docs;\n  const options: SearchOptions = {\n    fuzzy: true,\n    combineWith: \"AND\",\n  };\n  return _.map(miniSearch.autoSuggest(partialFoodName, options), \"suggestion\");\n}","import _ from \"lodash\";\nimport { Serving } from \"../../../model/Food\";\nimport portions from \"../portion/portions\";\nimport { buildDocuments, search, autoSuggest } from \"./foodNameMiniSearch\";\nimport servings from \"../serving/servings\";\nimport parseAmount from \"../parser/DecomposedAmount\";\nimport { isMeasurementConvertible, Unit } from \"../convert\";\n\nexport interface PredefinedSuggestion {\n  foodName: string;\n  amount: string;\n  serving: Serving;\n  bestChoice?: boolean;\n}\n\nconst suggestions = buildDocuments<PredefinedSuggestion>(_.concat(servings, portions));\n\nconst searchFoodServingPortionSize = (foodName: string) =>\n  search(suggestions, foodName);\n\nconst autoComplete = _.partial(autoSuggest, suggestions);\n\nfunction foodNameStartsWith(suggestion: { foodName: string }, foodName: string) {\n  return _.startsWith(_.lowerCase(suggestion.foodName), _.lowerCase(foodName));\n}\n\nfunction minTermDistance(suggestion: PredefinedSuggestion, terms: string[]) {\n  const distances = _.map(_.map(terms, _.lowerCase), function (term) {\n    const pos = _.lowerCase(suggestion.foodName).indexOf(term);\n    const notFound = pos < 0;\n    return notFound ? Number.MAX_SAFE_INTEGER : pos;\n  });\n  return _.head(_.sortBy(distances));\n}\n\nfunction matchedWordCount(suggestion: PredefinedSuggestion, terms: string[]) {\n  const words = _.words(_.lowerCase(suggestion.foodName));\n  return _.sum(_.map(_.map(terms, _.lowerCase), word => words.includes(word) ? 1 : 0));\n}\n\nfunction rank(suggestion: PredefinedSuggestion, searchRank: number, foodName: string) {\n  const prefixRank = foodNameStartsWith(suggestion, foodName) ? 0 : 1;\n  const termDistanceRank = minTermDistance(suggestion, _.words(foodName));\n  const matchedWordRank = _.size(_.words(foodName)) - matchedWordCount(suggestion, _.words(foodName));\n  return {\n    suggestion,\n    prefixRank,\n    matchedWordRank,\n    termDistanceRank,\n    searchRank,\n  }\n}\n\nfunction measurementsOf(suggestion: { amount: string }) {\n  const { measurement, alternateMeasurement } = parseAmount(suggestion.amount);\n  return alternateMeasurement ? [measurement, alternateMeasurement] : [measurement];\n}\n\nfunction isSuggestionConvertible(suggestion: { amount: string }, fromUnit: Unit | undefined) {\n  // incomplete input, assume convertible\n  if (_.isUndefined(fromUnit)) return true;\n\n  const isAnyMeasurementConvertibleFromUnit = (result: boolean, measurement: { unit: Unit }) => {\n    return result || isMeasurementConvertible(fromUnit, measurement);\n  }\n  return _.reduce(measurementsOf(suggestion), isAnyMeasurementConvertibleFromUnit, false);\n}\n\nexport function findSuggestions(foodName: string, options?: { convertibleFrom?: Unit }) {\n  const isSuggestionConvertibleFromUnit = _.partial(isSuggestionConvertible, _, options?.convertibleFrom);\n  const results = _.slice(searchFoodServingPortionSize(foodName), 0, 5)\n    .filter(isSuggestionConvertibleFromUnit);\n  const ranked = _.sortBy(_.map(results, _.partial(rank, _, _, foodName)),\n    [\n      'prefixRank',\n      'matchedWordRank',\n      'termDistanceRank',\n      'searchRank',\n    ]\n  );\n  return _.map(ranked, 'suggestion');\n}\n\nexport function findNameSuggestions(foodName: string) {\n  const shouldCapitalized = (foodName === _.capitalize(foodName));\n  const format = (s: string) => shouldCapitalized ? _.capitalize(s) : s;\n  const results = autoComplete(foodName)\n    .map(format)\n    .map(foodName => ({ foodName }))\n  return _.size(results) === 0 ? [{ foodName }] : _.slice(results, 0, 5);\n}","import _ from 'lodash';\nimport parseAmount, { DecomposedAmount } from '../parser/DecomposedAmount';\nimport { createSuggestion, Suggestion } from '../Suggestion';\nimport autoCompleteUnit from './unitMiniSearch';\nimport { DecomposedFoodDescription } from '../parser/DecomposedFoodDescription';\nimport { findNameSuggestions } from './foodNameSearch';\n\nexport default function findAutoCompletions(foodDescription: DecomposedFoodDescription): Suggestion[] {\n  const { foodName, amount, foodNameCompleted, unitCompleted } = foodDescription;\n  if (foodNameCompleted) {\n    if (amount && !unitCompleted) {\n      const suggestionWithAmount = _.partial(createSuggestion, foodName);\n      const amountAutoCompletions = findAmountAutoCompletions(parseAmount(amount))\n        .map(suggestionWithAmount);\n      if (_.size(amountAutoCompletions) > 0)\n        return amountAutoCompletions;\n    }\n    return [createSuggestion(foodName, amount)];\n  }\n  return findNameSuggestions(foodName);\n}\n\nfunction findAmountAutoCompletions(amount: DecomposedAmount) {\n  const { measurement } = amount;\n  const { unit, unitText, amountWithUnitText } = measurement;\n\n  if (unit === \"unknown\" && unitText) {\n    return _.map(autoCompleteUnit(unitText))\n      .slice(0, 2)\n      .map(amountWithUnitText);\n  } else {\n    return [];\n  }\n}\n","import _ from 'lodash';\nimport { Serving } from '../../../model/Food';\nimport { multiply } from '../../../model/servingFunction';\nimport parseAmount, { DecomposedAmount } from '../parser/DecomposedAmount';\nimport convert, { isMeasurementConvertible, Unit } from '../convert';\n\nfunction measurementFor(unit: Unit, { measurement, alternateMeasurement }: DecomposedAmount) {\n  if (unit === \"unknown\") {\n    if (alternateMeasurement && alternateMeasurement.unit === \"unknown\") {\n      return alternateMeasurement;\n    }\n    return measurement;\n  };\n\n  const isUnitConvertibleTo = _.partial(isMeasurementConvertible, unit);\n  if (isUnitConvertibleTo(measurement)) {\n    return measurement;\n  } else if (alternateMeasurement && isUnitConvertibleTo(alternateMeasurement)) {\n    return alternateMeasurement;\n  }\n  return measurement;\n}\n\nfunction servingFor(unitServing: Serving, servingAmount: DecomposedAmount, amount: string) {\n  const from = parseAmount(amount).measurement;\n  const to = measurementFor(from.unit, servingAmount);\n\n  try {\n    const normalizedQuantity = convert(from.quantity, from.unit, to.unit);\n    if (_.isNaN(normalizedQuantity)) return undefined;\n    return multiply(unitServing, _.round(normalizedQuantity / to.quantity, 3));\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport default function baseOn(suggestion: { serving: Serving; amount: string }) {\n  const { serving, amount } = suggestion;\n  const servingAmount = parseAmount(amount);\n  return {\n    servingFor: _.partial(servingFor, serving, servingAmount)\n  }\n}","import _ from 'lodash';\nimport { Suggestion } from \"../Suggestion\";\nimport baseOn from './calculateServing';\nimport { PredefinedSuggestion } from '../search/foodNameSearch';\n\nexport function generateAutoSuggestion(autoCompletion: Suggestion, suggestions: PredefinedSuggestion[]) {\n  if (_.size(suggestions) === 0) return null;\n\n  const bestMatch = suggestions[0];\n  return createAutoSuggestion(autoCompletion, bestMatch);\n}\n\nfunction createAutoSuggestion(nameSuggestion: Suggestion, suggestion: PredefinedSuggestion) {\n  const { foodName, amount } = nameSuggestion;\n  const autoSuggestion = {\n    ...suggestion,\n    foodName\n  };\n  if (amount) {\n    const serving = baseOn(suggestion).servingFor(amount);\n    return {\n      ...autoSuggestion,\n      amount,\n      serving,\n    }\n  }\n\n  return autoSuggestion;\n}\n","import _ from 'lodash';\nimport parseAmount from '../parser/DecomposedAmount';\nimport decompose from '../parser/DecomposedFoodDescription';\nimport findAutoCompletions from '../search/autoCompletion';\nimport { findSuggestions } from '../search/foodNameSearch';\nimport { Suggestion } from '../Suggestion';\nimport { generateAutoSuggestion } from './autoSuggestion';\n\nfunction unitOfMeasurement(amount?: string) {\n  if (_.isUndefined(amount)) return undefined;\n\n  const { measurement } = parseAmount(amount);\n  return measurement.unit;\n}\n\nexport function generateSuggestions(\n  foodDescriptionRef: React.MutableRefObject<String>,\n  callback: (suggestions: Suggestion[]) => void\n) {\n  const foodDescription = decompose(foodDescriptionRef.current + \"\");\n  const autoCompletions = findAutoCompletions(foodDescription);\n\n  const firstAutoCompletion = autoCompletions[0];\n  const servingSuggestions = findSuggestions(foodDescription.foodName, { convertibleFrom: unitOfMeasurement(firstAutoCompletion.amount) });\n  const allSuggestions = _.concat(autoCompletions, generateAutoSuggestion(firstAutoCompletion, servingSuggestions), servingSuggestions);\n  const results = _.uniqWith(_.compact(allSuggestions), _.isEqual)\n    .slice(0, 5);\n  return callback(results);\n}\n","import { AnyAction, combineReducers, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { useEffect, useReducer, useRef } from \"react\";\nimport { generateSuggestions, Suggestion } from \"../../features/suggestions\";\nimport { Food, FoodGroup, Serving } from \"../../model/Food\";\n\ninterface ValidationError {\n  foodDescription?: boolean;\n  vegetable?: boolean;\n  fruit?: boolean;\n  carbohydrate?: boolean;\n  proteinDiary?: boolean;\n  fat?: boolean;\n  sweet?: boolean;\n}\n\nconst suggestions = createSlice({\n  name: \"suggestions\",\n  initialState: [] as Suggestion[],\n  reducers: {\n    setSuggestions: (_state, action: PayloadAction<Suggestion[]>) => {\n      return action.payload;\n    },\n  }\n})\nconst {\n  setSuggestions, \n} = suggestions.actions;\n\nconst food = createSlice({\n  name: \"food\",\n  initialState: { description: \"\", serving: {} } as Food,\n  reducers: {\n    setDescription(state, action: PayloadAction<string>) {\n      state.description = action.payload\n    },\n    setServing(state, action: PayloadAction<Serving>) {\n      state.serving = action.payload;\n    },\n    setFoodGroupServing(state, action: PayloadAction<{ foodGroup: FoodGroup; serving: number }>) {\n      _.set(state.serving, action.payload.foodGroup, action.payload.serving)\n    },\n    unsetFoodGroupServing(state, action: PayloadAction<FoodGroup>) {\n      _.unset(state.serving, action.payload)\n    },\n  },\n})\nconst { setDescription, setServing, setFoodGroupServing, unsetFoodGroupServing } = food.actions;\n\nconst error = createSlice({\n  name: \"error\",\n  initialState: {} as ValidationError,\n  reducers: {\n    validationFailed: (state, action) => _.assign(state, action.payload),\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(setDescription, (state, action) => {\n        state.foodDescription = _.isEmpty(action.payload);\n      })\n      .addCase(setFoodGroupServing, (state, action) => {\n        state[action.payload.foodGroup] = lessThanZero(action.payload.serving);\n      })\n      .addCase(unsetFoodGroupServing, (state, action) => {\n        state[action.payload] = false;\n      })\n  }\n})\nconst { validationFailed } = error.actions;\n\nconst reducer = combineReducers({\n  food: food.reducer,\n  error: error.reducer,\n  suggestions: suggestions.reducer,\n})\n\nfunction initialState(food: Food) {\n  return {\n    food,\n    error: {},\n    suggestions: []\n  };\n}\n\nfunction lessThanZero(val?: number) { return (_.toNumber(val) < 0); }\n\nfunction validateFood(food: Food): ValidationError {\n  const { description, serving } = food;\n  return {\n    foodDescription: _.isEmpty(description),\n    vegetable: lessThanZero(serving.vegetable),\n    fruit: lessThanZero(serving.fruit),\n    carbohydrate: lessThanZero(serving.carbohydrate),\n    proteinDiary: lessThanZero(serving.proteinDiary),\n    fat: lessThanZero(serving.fat),\n    sweet: lessThanZero(serving.sweet),\n  };\n}\n\nfunction checkValidity(error: ValidationError) {\n  const or = (res: boolean, val: boolean | undefined) => res || _.defaultTo(val, false);\n  const failed = _.reduce(_.values(error), or, false);\n  return !failed;\n}\n\nconst debouncedGenerateSuggestions = _.debounce(generateSuggestions, 500, { maxWait: 2000 });\n\nconst updateFoodDescription = (dispatch: React.Dispatch<AnyAction>, generateSuggestions: (desc: string) => void, name: string) => {\n  dispatch(setDescription(name));\n  generateSuggestions(name);\n}\n\nconst updateFoodDescriptionServing = (dispatch: React.Dispatch<AnyAction>, name: string, serving?: Serving) => {\n  dispatch(setDescription(name));\n  serving && dispatch(setServing(serving));\n}\n\nconst updateFoodGroupServing = (dispatch: React.Dispatch<AnyAction>, foodGroup: FoodGroup, serving: number) =>\n  serving ? dispatch(setFoodGroupServing({ foodGroup, serving })) : dispatch(unsetFoodGroupServing(foodGroup));\n\nconst handleSubmit = (\n  dispatch: React.Dispatch<AnyAction>,\n  state: { food: Food },\n  onSaveFood: (food: Food) => void,\n  event: React.FormEvent<HTMLFormElement>\n) => {\n  const error = validateFood(state.food);\n  if (checkValidity(error) === false) {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch(validationFailed(error));\n  } else {\n    onSaveFood(state.food);\n    event.preventDefault();\n  }\n}\n\nexport function useFoodInputFormStateReducer(initialFood: Food, onSaveFood: (food: Food) => void) {\n  const [state, dispatch] = useReducer(reducer, initialFood, initialState);\n\n  const descRef = useRef(initialFood.description);\n  const setSuggestionsCallback = (suggestions: Suggestion[]) => {\n    dispatch(setSuggestions(suggestions));\n  }\n\n  const generateSuggestions = (desc: string) => {\n    descRef.current = desc;\n    debouncedGenerateSuggestions(descRef, setSuggestionsCallback);\n  }\n\n  useEffect(() => {\n    debouncedGenerateSuggestions(descRef, setSuggestionsCallback);\n  }, [descRef, dispatch])\n\n  const fns = {\n    updateFoodDescription: _.partial(updateFoodDescription, dispatch, generateSuggestions),\n    updateFoodDescriptionServing: _.partial(updateFoodDescriptionServing, dispatch),\n    updateFoodGroupServing: _.partial(updateFoodGroupServing, dispatch),\n    handleSubmit: _.partial(handleSubmit, dispatch, state, onSaveFood),\n  }\n  return [state, fns] as [typeof state, typeof fns];\n}\n","import { Button, Form } from \"react-bootstrap\";\nimport { calcFoodCalories, displayCalorieValue } from \"../../model/calorieFunction\";\nimport { Food } from \"../../model/Food\";\nimport { VariantPrimary, VariantSecondary } from \"../ButtonVariant\";\nimport { FoodDescriptionInputControl } from \"./FoodDescriptionInputControl\";\nimport { ServingInputControl } from \"./ServingInputControl\";\nimport { useFoodInputFormStateReducer } from \"./useFoodInputFormStateReducer\";\n\nexport type ButtonLabel = \"Add\" | \"Update\";\n\ninterface Props {\n  food: Food;\n  buttonLabel: ButtonLabel;\n  onSaveFood: (food: Food) => void;\n  onCancel: () => void\n}\n\nexport const FoodInputForm = (props: Props) => {\n  const [state, fns] = useFoodInputFormStateReducer(props.food, props.onSaveFood);\n  const { food, error, suggestions } = state;\n  const { updateFoodDescription, updateFoodDescriptionServing, updateFoodGroupServing, handleSubmit } = fns;\n\n  return (\n    <Form\n      data-cy={\"form\" + props.buttonLabel}\n      noValidate\n      onSubmit={handleSubmit}\n      className=\"border p-1\"\n    >\n      <Form.Group as={Form.Row} className=\"ml-1 mr-1\">\n        <FoodDescriptionInputControl\n          foodName={food.description}\n          suggestions={suggestions}\n          invalid={error.foodDescription}\n          updateFoodDescription={updateFoodDescription}\n          updateFoodDescriptionServing={updateFoodDescriptionServing}\n        />\n      </Form.Group>\n\n      <Form.Group>\n        <Form.Label>Servings (Calories: {displayCalorieValue(calcFoodCalories(food))})</Form.Label>\n        <Form.Group as={Form.Row} controlId=\"formServings\" className=\"d-flex justify-content-between\">\n          <ServingInputControl foodGroup=\"vegetable\" serving={food.serving} isInvalid={error.vegetable} onChange={updateFoodGroupServing} />\n          <ServingInputControl foodGroup=\"fruit\" serving={food.serving} isInvalid={error.fruit} onChange={updateFoodGroupServing} />\n          <ServingInputControl foodGroup=\"carbohydrate\" serving={food.serving} isInvalid={error.carbohydrate} onChange={updateFoodGroupServing} />\n          <ServingInputControl foodGroup=\"proteinDiary\" serving={food.serving} isInvalid={error.proteinDiary} onChange={updateFoodGroupServing} />\n          <ServingInputControl foodGroup=\"fat\" serving={food.serving} isInvalid={error.fat} onChange={updateFoodGroupServing} />\n          <ServingInputControl foodGroup=\"sweet\" serving={food.serving} isInvalid={error.sweet} onChange={updateFoodGroupServing} />\n        </Form.Group>\n      </Form.Group>\n\n      <div className=\"d-flex justify-content-end\">\n        <Button className=\"mr-1 order-sm-1\" variant={VariantSecondary} onClick={props.onCancel}>Cancel</Button>\n        <Button className=\"mr-1 order-sm-0\" variant={VariantPrimary} type=\"submit\" >{props.buttonLabel}</Button>\n      </div>\n    </Form>\n  )\n}","import { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { ButtonLabel, FoodInputForm } from \"../../components/input-form/FoodInputForm\";\nimport { Food, newFood } from \"../../model/Food\";\nimport { addFood, cancelAddFood } from \"../day-page/mealStatesSlice\";\n\nconst mapStateToProps = () => ({\n  food: newFood(),\n  buttonLabel: \"Add\" as ButtonLabel,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch, { mealIndex }: { mealIndex: number }) => ({\n  onSaveFood: (food: Food) => dispatch(addFood({ mealIndex, food })),\n  onCancel: () => dispatch(cancelAddFood({ mealIndex })),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodInputForm);","import { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { ButtonLabel, FoodInputForm } from \"../../components/input-form/FoodInputForm\";\nimport { Food } from \"../../model/Food\";\nimport { exitFoodEditMode, updateFood } from \"../day-page/mealStatesSlice\";\n\nconst mapStateToProps = () => ({\n  buttonLabel: \"Update\" as ButtonLabel,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number; foodIndex: number; }) => {\n  const { mealIndex, foodIndex } = ownProps;\n  return {\n    onSaveFood: (food: Food) => {\n      dispatch(updateFood({ mealIndex, foodIndex, food }));\n      dispatch(exitFoodEditMode({ mealIndex }));\n    },\n    onCancel: () => dispatch(exitFoodEditMode({ mealIndex })),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodInputForm);","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { VariantPrimary } from \"../../components/ButtonVariant\";\nimport { enterFoodEditMode } from \"../day-page/mealStatesSlice\";\n\nconst mapStateToProps = () => ({\n  variant: VariantPrimary,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number; foodIndex: number }) => ({\n  onClick: () => dispatch(enterFoodEditMode(ownProps)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Button);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { enterMealAddMode } from \"../day-page/mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number; }) => ({\n  onClick: () => dispatch(enterMealAddMode(ownProps)),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { Serving } from \"../../model/Food\";\nimport { FoodGroupServingBadgePanel } from \"./FoodGroupServingBadgePanel\";\nimport { CalorieSpan } from \"../CalorieSpan\";\n\nexport const CalorieServingPanel = (props: { calorie: number; serving: Serving}) => (\n  <div className=\"d-flex justify-content-between align-items-center\">\n    <div className=\"mr-1\"><CalorieSpan value={props.calorie} /></div>\n    <FoodGroupServingBadgePanel serving={props.serving} />\n  </div>\n\n);\n","import { connect } from \"react-redux\";\nimport { CalorieServingPanel } from \"../../components/panels/CalorieServingPanel\";\nimport { calcFoodCalories } from \"../../model/calorieFunction\";\nimport { Food } from \"../../model/Food\";\n\nconst mapStateToProps = (_state: any, ownProps: { food: Food; }) => ({\n  calorie: calcFoodCalories(ownProps.food),\n  serving: ownProps.food.serving,\n})\n\nexport default connect(mapStateToProps)(CalorieServingPanel);","import { combineReducers, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { useReducer } from \"react\";\nimport { Food, newFood } from \"../../model/Food\";\nimport { initSelectable, Selectable } from \"../../model/Selectable\";\nimport { calcFoodsServingSummary, positiveServing } from \"../../model/servingFunction\";\n\nconst renamedFoodSlice = createSlice({\n  name: \"renamedFood\",\n  initialState: {\n    sources: [] as (Food & Selectable)[],\n    target: newFood(),\n  },\n  reducers: {\n    updateDescription(state, action: PayloadAction<string>) {\n      state.target.description = action.payload;\n    },\n    selectFood(state, action: PayloadAction<number>) {\n      state.sources[action.payload].selected = true;\n      state.target = combine(state.sources);\n    },\n    unselectFood(state, action: PayloadAction<number>) {\n      state.sources[action.payload].selected = false;\n      state.target = combine(state.sources);\n    },\n  }\n})\nconst { updateDescription, selectFood, unselectFood } = renamedFoodSlice.actions;\nconst renamedFood = renamedFoodSlice.reducer;\n\nconst errorsSlice = createSlice({\n  name: \"errors\",\n  initialState: {\n    foodDescription: false,\n    selectCount: 0,\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n      .addCase(updateDescription, (state, action) => { \n        state.foodDescription = (_.size(action.payload) === 0);\n      })\n      .addCase(selectFood, state => {\n        state.foodDescription = false;\n        state.selectCount++;\n      })\n      .addCase(unselectFood, state => {\n        state.selectCount--;\n      })\n  }\n})\nconst errors = errorsSlice.reducer;\n\nconst reducer = combineReducers({\n  renamedFood,\n  errors,\n})\n\nconst selected = (foods: (Food & Selectable)[]) =>\n  _.filter(foods, { selected: true });\n\nconst combineDescription = (foods: (Food & Selectable)[]) =>\n  _.join(_.map(selected(foods), \"description\"), \", \");\n\nconst combine = (foods: (Food & Selectable)[]) => ({\n  description: combineDescription(foods),\n  serving: positiveServing(calcFoodsServingSummary(selected(foods))),\n})\n\nconst initialState = (foods: Food[]) => {\n  const sources = _.map(foods, food => initSelectable(food, true));\n  const selectCount = _.size(selected(sources));\n\n  return {\n    renamedFood: {\n      sources,\n      target: combine(sources),\n    },\n    errors: {\n      foodDescription: false,\n      selectCount,\n    }\n  }\n}\n\nconst checkValidity = (errors: {foodDescription: boolean; selectCount: number}) => {\n  const failed =  errors.foodDescription || errors.selectCount < 2;\n  return !failed;\n}\n\nexport default function useNameFoodFormReducer(initialFoods: Food[], onSaveFood: (food: Food, replacedFoodIndices: number[]) => void) {\n\n  const [state, dispatch] = useReducer(reducer, initialState(initialFoods));\n  const handleSelectFoodChanged = (index: number, selected: boolean) => selected ? dispatch(selectFood(index)) : dispatch(unselectFood(index));\n  const handleFoodDescriptionChanged = (name: string) => dispatch(updateDescription(name));\n\n  const handleSubmitted = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { target, sources } = state.renamedFood;\n    if (checkValidity(state.errors)) {\n      onSaveFood(target, _.map(sources, (food, index) => food.selected ? index : -1));\n    }\n  }\n\n  const fns = {\n    handleSelectFoodChanged,\n    handleFoodDescriptionChanged,\n    handleSubmitted,\n  }\n\n  return [state,fns] as [typeof state, typeof fns];\n}","export interface Selectable {\n  selected: boolean;\n}\n\nexport function initSelectable<T>(obj: T, selected = false): (T & Selectable) {\n  return {\n    ...obj,\n    selected\n  }\n};\n","import { Button, Form } from \"react-bootstrap\";\nimport FoodCalorieServingPanel from \"../../features/name-food/FoodCalorieServingPanel\";\nimport { Food } from \"../../model/Food\";\nimport { VariantPrimary, VariantSecondary } from \"../ButtonVariant\";\nimport { FoodGroupServingBadgePanel } from \"../panels/FoodGroupServingBadgePanel\";\nimport useNameFoodFormReducer from \"./useNameFoodFormReducer\";\n\ninterface Props {\n  foods: Food[];\n  onSaveFood: (food: Food, replacedFoodIndices: number[]) => void;\n  onCancel: () => void;\n}\n\nexport const NameFoodDescriptionForm = (props: Props) => {\n  const [state, fns] = useNameFoodFormReducer(props.foods, props.onSaveFood);\n  const { renamedFood, errors } = state;\n  const { handleSelectFoodChanged, handleFoodDescriptionChanged, handleSubmitted } = fns;\n\n  return (\n    <Form\n      noValidate\n      onSubmit={handleSubmitted}\n      className=\"border p-1\"\n    >\n\n      <Form.Group as={Form.Row} className=\"d-flex flex-column flex-wrap mx-1\">\n        {renamedFood.sources.map((food, index) =>\n          <div key={index} className=\"d-flex flex-inline\">\n            <Form.Check\n              type=\"checkbox\"\n              label={food.description}\n              checked={food.selected}\n              onChange={e => handleSelectFoodChanged(index, e.target.checked)}\n              isInvalid={errors.selectCount < 2}\n              feedback=\"Please select at least two foods to rename.\"\n              className=\"mr-auto\"\n            />\n            <FoodGroupServingBadgePanel serving={food.serving} />\n          </div>\n        )}\n      </Form.Group>\n\n      <Form.Group as={Form.Row} className=\"ml-1 mr-1\">\n        <Form.Label htmlFor=\"inputFoodDescription\">New food description</Form.Label>\n        <Form.Control\n          id=\"inputFoodDescription\"\n          type=\"text\"\n          value={renamedFood.target.description}\n          onChange={e => handleFoodDescriptionChanged(e.target.value)}\n          required\n          isInvalid={errors.foodDescription}\n        />\n        <Form.Control.Feedback type=\"invalid\">\n          Please enter food description.\n        </Form.Control.Feedback>\n      </Form.Group>\n\n      <div className=\"d-flex justify-content-end\" >\n        <div className=\"mr-auto\">\n          <FoodCalorieServingPanel food={renamedFood.target} />\n        </div>\n        <div className=\"d-flex justify-content-end\">\n          <div className=\"mr-1 order-sm-1\">\n            <Button variant={VariantSecondary} onClick={props.onCancel}>Cancel</Button>\n          </div>\n          <div className=\"mr-1 order-sm-0\" >\n            <Button variant={VariantPrimary} type=\"submit\">Save</Button>\n          </div>\n        </div>\n      </div>\n    </Form>\n  )\n}","import { connect } from \"react-redux\";\nimport { mealsSelector } from \"../../app/selectors\";\nimport { AppDispatch, RootState } from \"../../app/store\";\nimport { NameFoodDescriptionForm } from \"../../components/name-food-form/NameFoodDescriptionForm\";\nimport { Food } from \"../../model/Food\";\nimport { exitMealEditMode, replaceFoods } from \"../day-page/mealStatesSlice\";\n\nconst mapStateToProps = (state: RootState, ownProps: { mealIndex: number }) => ({\n  foods: mealsSelector(state)[ownProps.mealIndex].foods,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch, { mealIndex }: { mealIndex: number }) => ({\n  onSaveFood: (food: Food, replacedFoodIndices: number[]) => dispatch(replaceFoods({ mealIndex, food, replacedFoodIndices })),\n  onCancel: () => dispatch(exitMealEditMode({ mealIndex })),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NameFoodDescriptionForm);","import { Food } from \"../model/Food\";\nimport { FoodGroupServingBadgePanel } from \"./panels/FoodGroupServingBadgePanel\";\n\nexport const FoodItem = (props: { food: Food; }) => {\n  const { description, serving } = props.food;\n  return (\n    <div className=\"d-flex flex-fill align-items-center\">\n      <div className=\"mr-auto\">{description}</div>\n      <FoodGroupServingBadgePanel serving={serving}/>\n    </div>\n  );\n}\n","import { connect } from \"react-redux\";\nimport { mealsSelector, mealStatesSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { FoodListGroupItems } from \"../../components/meal-card/FoodListGroupItems\";\n\nconst mapStateToProps = (state: RootState, ownProps: { mealIndex: number; }) => ({\n  editState: mealStatesSelector(state)[ownProps.mealIndex].editState,\n  foods: mealsSelector(state)[ownProps.mealIndex].foods,\n  foodEditIndex: mealStatesSelector(state)[ownProps.mealIndex].foodEditIndex,\n})\n\nexport default connect(mapStateToProps)(FoodListGroupItems);\n","import { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport _ from \"lodash\";\nimport { Fragment } from \"react\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { MealEditState } from \"../../features/day-page/mealStatesSlice\";\nimport AddFoodInputForm from \"../../features/input-form/AddFoodInputForm\";\nimport UpdateFoodInputForm from \"../../features/input-form/UpdateFoodInputForm\";\nimport EditFoodButton from \"../../features/meal-card/EditFoodButton\";\nimport NewFoodButton from \"../../features/meal-card/NewFoodButton\";\nimport NameFoodDescriptionForm from \"../../features/name-food/NameFoodDescriptionForm\";\nimport { Food } from \"../../model/Food\";\nimport { VariantPrimary } from \"../ButtonVariant\";\nimport { FoodItem } from \"../FoodItem\";\n\ninterface Props {\n  editState: MealEditState;\n  mealIndex: number;\n  foods: Food[];\n  foodEditIndex?: number;\n}\n\nexport const FoodListGroupItems = (props: Props) => {\n  switch (props.editState) {\n    case \"add\":\n      return (\n        <Fragment>\n          {props.foods.map((food, index) => (\n            <ListGroup.Item key={index}>\n              <FoodItem food={food} />\n            </ListGroup.Item>\n          ))}\n          <ListGroup.Item key={_.size(props.foods)}>\n            <AddFoodInputForm mealIndex={props.mealIndex} />\n          </ListGroup.Item>\n        </Fragment>\n      );\n\n    case \"edit\":\n      return (\n        <Fragment>\n          {\n            props.foods.map((food, index) => (\n              <ListGroup.Item key={index} data-cy=\"foodItem\">\n                {index === props.foodEditIndex\n                  ? <UpdateFoodInputForm food={food} mealIndex={props.mealIndex} foodIndex={index} />\n                  : <div className=\"d-flex align-items-center\">\n                    <FoodItem food={food} />\n                    <EditFoodButton mealIndex={props.mealIndex} foodIndex={index}>Edit</EditFoodButton>\n                  </div>\n                }\n              </ListGroup.Item>\n            ))\n          }\n          <ListGroup.Item>\n            <NewFoodButton variant={VariantPrimary} mealIndex={props.mealIndex} data-cy={\"buttonNewFood\"}>\n              <FontAwesomeIcon icon={faPlus} />\n            </NewFoodButton>\n          </ListGroup.Item>\n        </Fragment>\n      );\n\n    case \"name\":\n      return (\n        <Fragment>\n          <ListGroup.Item >\n            <NameFoodDescriptionForm mealIndex={props.mealIndex} />\n          </ListGroup.Item>\n        </Fragment>\n      );\n\n    default:\n      return (\n        <Fragment>\n          {props.foods.map((food, index) => (\n            <ListGroup.Item key={index} data-cy=\"foodItem\">\n              <FoodItem food={food} />\n            </ListGroup.Item>\n          ))}\n        </Fragment>\n      );\n  }\n}\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { deleteMeal } from \"../day-page/mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number }) => ({\n  onClick: () => dispatch(deleteMeal(ownProps.mealIndex)),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { exitMealEditMode } from \"../day-page/mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number }) => ({\n  onClick: () => dispatch(exitMealEditMode(ownProps)),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { enterMealEditMode } from \"../day-page/mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number }) => ({\n  onClick: () => dispatch(enterMealEditMode(ownProps)),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import { Button } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport { enterMealNameMode } from \"../day-page/mealStatesSlice\";\n\nconst mapDispatchToProps = (dispatch: AppDispatch, ownProps: { mealIndex: number }) => ({\n  onClick: () => dispatch(enterMealNameMode(ownProps)),\n})\n\nexport default connect(null, mapDispatchToProps)(Button);\n","import _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { mealsSelector, mealStatesSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { MealButtons } from \"../../components/meal-card/MealButtons\";\n\nconst mapStateToProps = (state: RootState, ownProps: { mealIndex: number; }) => ({\n  editState: mealStatesSelector(state)[ownProps.mealIndex].editState,\n  showNameButton: _.size(mealsSelector(state)[ownProps.mealIndex].foods) > 1,\n})\n\nexport default connect(mapStateToProps)(MealButtons);\n","import { Fragment } from \"react\";\nimport { MealEditState } from \"../../features/day-page/mealStatesSlice\";\nimport DeleteButton from \"../../features/meal-card/DeleteButton\";\nimport DoneButton from \"../../features/meal-card/DoneButton\";\nimport EditButton from \"../../features/meal-card/EditButton\";\nimport NameButton from \"../../features/meal-card/NameButton\";\nimport { VariantDanger, VariantPrimary, VariantSecondary } from \"../ButtonVariant\";\n\ninterface Props {\n  editState: MealEditState;\n  mealIndex: number;\n  showNameButton: boolean;\n}\n\nexport const MealButtons = (props: Props) => {\n  const editButton = <EditButton variant={VariantPrimary} mealIndex={props.mealIndex}>Edit</EditButton>;\n  const deleteButton = <DeleteButton variant={VariantDanger} mealIndex={props.mealIndex}>Delete</DeleteButton>;\n  const nameButton = <NameButton variant={VariantSecondary} mealIndex={props.mealIndex}>Name</NameButton>;\n  const doneButton = <DoneButton variant={VariantPrimary} mealIndex={props.mealIndex}>Done</DoneButton>;\n\n  switch (props.editState) {\n    case \"add\":\n      return (\n        <Fragment>\n          {deleteButton}&nbsp;\n          {editButton}\n        </Fragment>\n      );\n\n    case \"edit\":\n      return (\n        <Fragment>\n          {deleteButton}&nbsp;\n          {doneButton}\n        </Fragment>\n      );\n\n    case \"name\":\n      return (\n        <Fragment>\n          {editButton}\n        </Fragment>\n      );\n\n    default:\n      return (\n        <Fragment>\n          {props.showNameButton && nameButton}&nbsp;\n          {editButton}\n        </Fragment>\n      );\n  }\n}\n","import { connect } from \"react-redux\";\nimport { RootState } from \"../../app/store\";\nimport { CalorieServingPanel } from \"../../components/panels/CalorieServingPanel\";\nimport { calcMealCalories } from \"../../model/calorieFunction\";\nimport { Meal } from \"../../model/Food\";\nimport { calcServingSummary } from \"../../model/servingFunction\";\n\nconst mapStateToProps = (_state: RootState, ownProps: { meal: Meal; }) => ({\n  calorie: calcMealCalories(ownProps.meal),\n  serving: calcServingSummary(ownProps.meal),\n})\n\nexport default connect(mapStateToProps)(CalorieServingPanel);","import { connect } from \"react-redux\";\nimport { editModeSelector, mealsSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { MealCardHeader } from \"../../components/meal-card/MealCardHeader\";\n\nconst mapStateToProps = (state: RootState, ownProps: { mealIndex: number; }) => ({\n  meal: mealsSelector(state)[ownProps.mealIndex],\n  showButton: editModeSelector(state),\n})\n\nexport default connect(mapStateToProps)(MealCardHeader);\n","import { Card } from \"react-bootstrap\";\nimport MealButtons from \"../../features/meal-card/MealButtons\";\nimport MealCalorieServingPanel from \"../../features/meal-card/MealCalorieServingPanel\";\nimport { Meal } from \"../../model/Food\";\n\ninterface Props {\n  meal: Meal;\n  mealIndex: number;\n  showButton: boolean;\n}\n\nexport const MealCardHeader = (props: Props) => (\n  <Card.Header className=\"d-flex flex-wrap align-items-center\">\n    <div className=\"flex-fill order-sm-0\">{props.meal.mealTime}</div>\n    {props.showButton &&\n      <div className=\"order-sm-2\">\n        <MealButtons mealIndex={props.mealIndex} />\n      </div>}\n    <div className=\"order-sm-1 flex-grow-1 flex-md-grow-0\">\n      <MealCalorieServingPanel meal={props.meal} />\n    </div>\n  </Card.Header>\n)\n","import _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { editModeSelector, mealStatesSelector } from \"../../app/selectors\";\nimport { RootState } from \"../../app/store\";\nimport { DayPage } from \"../../components/day-page/DayPage\";\n\nconst mapStateToProps = (state: RootState) => ({\n  numberOfMeals: _.size(mealStatesSelector(state)),\n  showButton: editModeSelector(state),\n})\n\nexport default connect(mapStateToProps)(DayPage);","import { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport _ from \"lodash\";\nimport { Card, ListGroup } from \"react-bootstrap\";\nimport AddMealButton from \"../../features/day-page/AddMealButton\";\nimport Footer from \"../../features/day-page/Footer\";\nimport Header from \"../../features/day-page/Header\";\nimport Summary from \"../../features/day-page/Summary\";\nimport FoodListGroupItems from \"../../features/meal-card/FoodListGroupItems\";\nimport MealCardHeader from \"../../features/meal-card/MealCardHeader\";\nimport { VariantPrimary } from \"../ButtonVariant\";\n\ninterface Props {\n  numberOfMeals: number;\n  showButton: boolean;\n}\n\nexport const DayPage = (props: Props) => (\n  <div>\n    <Header />\n    <Summary />\n\n    {_.map(_.range(props.numberOfMeals), (index) => (\n      <Card className=\"mt-1\" key={index} data-cy=\"mealCard\">\n        <MealCardHeader mealIndex={index} />\n\n        <ListGroup>\n          <FoodListGroupItems mealIndex={index} />\n        </ListGroup>\n      </Card>\n    ))}\n    {props.showButton &&\n      <div className=\"p-2\">\n        <AddMealButton data-cy=\"buttonAddMeal\" variant={VariantPrimary}>\n          <FontAwesomeIcon icon={faPlus} />\n        </AddMealButton>\n      </div>}\n    <Footer />\n  </div>\n);\n","import { Container } from \"react-bootstrap\";\nimport DayPage from \"./features/day-page/DayPage\";\n\nfunction App() {\n\n  return (\n    <Container>\n      <DayPage />\n    </Container>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from \"redux\";\nimport date from \"../features/day-page/dateSlice\";\nimport editMode from \"../features/day-page/editModeSlice\";\nimport mealStates from \"../features/day-page/mealStatesSlice\";\nimport summaryType from \"../features/day-page/summaryTypeSlice\";\nimport targetState from \"../features/target/targetStateSlice\";\n\nexport default combineReducers(\n  {\n    date,\n    summaryType,\n    mealStates,\n    editMode,\n    targetState,\n  }\n)\n","import { configureStore } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport { loadState, saveState } from './localStorage';\nimport reducer from './reducers';\n// ...\n\nconst persistedState = loadState();\nexport const store = configureStore({\n  reducer,\n  preloadedState: persistedState,\n})\n\nstore.subscribe(_.throttle(() => {\n  saveState(store.getState());\n}, 1000));\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof store.getState>\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\nexport type AppDispatch = typeof store.dispatch\n\nexport default store","import { RootState } from \"./store\";\n\nexport const loadState = () => {\n  try {\n    const serializedState = localStorage.getItem('state');\n    if (serializedState === null) {\n      return undefined;\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nexport const saveState = (state: RootState) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem('state', serializedState);\n  } catch {\n    // ignore write errors\n  }\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { Provider } from \"react-redux\";\nimport store from \"./app/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","//\n/* Copyright (c) 2012-2017 The ANTLR Project. All rights reserved.\n * Use of this file is governed by the BSD 3-clause license that\n * can be found in the LICENSE.txt file in the project root.\n */\n//\n\nfunction CaseChangingStream(stream, upper) {\n\tthis._stream = stream;\n\tthis._upper = upper;\n}\n\nCaseChangingStream.prototype.LA = function(offset) {\n\tvar c = this._stream.LA(offset);\n\tif (c <= 0) {\n\t\treturn c;\n\t}\n\treturn String.fromCodePoint(c)[this._upper ? \"toUpperCase\" : \"toLowerCase\"]().codePointAt(0);\n};\n\nCaseChangingStream.prototype.reset = function() {\n\treturn this._stream.reset();\n};\n\nCaseChangingStream.prototype.consume = function() {\n\treturn this._stream.consume();\n};\n\nCaseChangingStream.prototype.LT = function(offset) {\n\treturn this._stream.LT(offset);\n};\n\nCaseChangingStream.prototype.mark = function() {\n\treturn this._stream.mark();\n};\n\nCaseChangingStream.prototype.release = function(marker) {\n\treturn this._stream.release(marker);\n};\n\nCaseChangingStream.prototype.seek = function(_index) {\n\treturn this._stream.seek(_index);\n};\n\nCaseChangingStream.prototype.getText = function(start, stop) {\n\treturn this._stream.getText(start, stop);\n};\n\nCaseChangingStream.prototype.toString = function() {\n\treturn this._stream.toString();\n};\n\nObject.defineProperty(CaseChangingStream.prototype, \"index\", {\n\tget: function() {\n\t\treturn this._stream.index;\n\t}\n});\n\nObject.defineProperty(CaseChangingStream.prototype, \"size\", {\n\tget: function() {\n\t\treturn this._stream.size;\n\t}\n});\n\nexports.CaseChangingStream = CaseChangingStream;"],"sourceRoot":""}