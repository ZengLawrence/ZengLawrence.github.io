(this["webpackJsonpdiet-diary"]=this["webpackJsonpdiet-diary"]||[]).push([[0],{56:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),c=n.n(o),i=(n(55),n(56),n(21)),d=n(72),s=n(7),l=n.n(s),u=n(75),j=n(77);function f(e){return{type:"exit-food-edit-mode",mealIndex:e}}var b=n(46),x=n(44),v=n(45),g=n(1),O=function(e){return Object(g.jsx)(v.a,{variant:"outline-primary",onClick:e.onClick,children:Object(g.jsx)(x.a,{icon:b.a})})},m=function(){return Object(g.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://icons8.com/icons/set/healthy-food-calories-calculator",children:"Healthy Food Calories Calculator icon"})},p=function(){return Object(g.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://icons8.com",children:"Icons8"})},h=function(){return Object(g.jsxs)("p",{style:{fontSize:"smaller"},children:[Object(g.jsx)(m,{})," icon by ",Object(g.jsx)(p,{})]})},y=function(){return Object(g.jsx)("div",{className:"d-flex justify-content-center",children:Object(g.jsx)(h,{})})},C=n(76),I=n(78),w=function(e){return Object(g.jsx)(v.a,{variant:"outline-danger",className:"mr-1",onClick:e.onClick,children:"Delete"})},G=function(e){var t=e.editMode?"Done":"Edit";return Object(g.jsx)(v.a,{variant:"outline-primary",onClick:e.onClick,children:t})},S=a.a.createContext(null),N=function(e){var t=Object(r.useContext)(S);return Object(g.jsx)(I.a.Item,{children:Object(g.jsx)(O,{onClick:function(){return t({type:"enter-meal-add-mode",mealIndex:e.mealIndex})}})})};var k=n(8),T=n(74),M={vegetable:25,fruit:60,carbohydrate:70,protein:110,fat:45,sweet:75};function F(e){return l.a.get(M,e,0)}function D(e){return t=e.serving,l.a.sum(l.a.map(l.a.keys(t),(function(e){return F(e)*l.a.get(t,e,0)})));var t}function L(e){return l.a.sum(l.a.map(e.foods,D))}function E(e){return l.a.sum(l.a.map(e,L))}function A(e,t){return E(e)-t}var P=n(71),z=n(47),K=n(70),B={calorie:1200,serving:{vegetable:4,fruit:3,carbohydrate:4,protein:3,fat:3,sweet:1}},R={calorie:1400,serving:{vegetable:4,fruit:4,carbohydrate:5,protein:4,fat:3,sweet:1}},H={calorie:1600,serving:{vegetable:5,fruit:5,carbohydrate:6,protein:5,fat:3,sweet:1}},J={calorie:1800,serving:{vegetable:5,fruit:5,carbohydrate:7,protein:6,fat:4,sweet:1}},U={calorie:2e3,serving:{vegetable:5,fruit:5,carbohydrate:8,protein:7,fat:5,sweet:1}},W=R;var _={vegetable:"green",fruit:"teal",carbohydrate:"cyan",protein:"blue",fat:"orange",sweet:"red"};function q(e){return l.a.get(_,e,"")}var V=function(e){var t=e.foodGroup,n=e.value,r={backgroundColor:q(t),fontFamily:"Arial Narrow, Arial, sans-serif"};return Object(g.jsx)(K.a,{className:"text-white m-1",style:r,children:n})},Q=function(e){var t=e.foodGroup,n=e.serving,r=e.goal,a=l.a.get(n,t),o=r&&function(e){return"vegetable"===e||"fruit"===e}(t)?a+"+":a;return Object(g.jsx)(V,{foodGroup:t,value:o})};var X=function(e){var t=e.foodGroup,n=e.isInvalid,a="formServing"+t,o=l.a.toString(F(t))+" Cal.",c=function(e){var t=e.foodGroup,n=e.serving,a=Object(r.useState)(l.a.get(n,t)||""),o=Object(i.a)(a,2),c=o[0],d=o[1];return Object(r.useEffect)((function(){d(l.a.get(n,t)||"")}),[t,n]),{servingStr:c,handleChange:function(n){var r=n.target.value;d(r),e.onChange(t,l.a.toNumber(r))}}}(e),d=c.servingStr,s=c.handleChange;return Object(g.jsxs)(T.a.Group,{as:P.a,controlId:a,children:[Object(g.jsxs)(T.a.Label,{column:!0,sm:4,children:[l.a.capitalize(t)," ",Object(g.jsx)(V,{foodGroup:t,value:o})]}),Object(g.jsxs)(z.a,{sm:2,children:[Object(g.jsx)(T.a.Control,{type:"text",value:d,isInvalid:n,onChange:s}),Object(g.jsx)(T.a.Control.Feedback,{type:"invalid",children:"Good one!  Please enter a positive number."})]})]})};function Y(e,t){return Object(k.a)(Object(k.a)({},e),{},{serving:l.a.set(e.serving,t.foodGroup,t.serving)})}function Z(e,t){var n=e.serving;return l.a.unset(e.serving,t.foodGroup),Object(k.a)(Object(k.a)({},e),{},{serving:n})}function $(e,t){return Object(k.a)(Object(k.a)({},e),{},{name:t.name})}function ee(e,t){switch(t.type){case"set-name":return Object(k.a)(Object(k.a)({},e),{},{food:$(e.food,t)});case"set-serving":return Object(k.a)(Object(k.a)({},e),{},{food:Y(e.food,t)});case"unset-serving":return Object(k.a)(Object(k.a)({},e),{},{food:Z(e.food,t)});case"reset":return te({name:"",serving:{}});case"validation-failed":var n=t;return Object(k.a)(Object(k.a)({},e),{},{validated:!0,error:n.error});default:throw new Error}}function te(e){return{food:e,error:{}}}function ne(e){return Object(k.a)({foodName:""===e.name},function(e){var t=function(e){return l.a.toNumber(e)<0};return{vegetable:t(e.vegetable),fruit:t(e.fruit),carbohydrate:t(e.carbohydrate),protein:t(e.protein),fat:t(e.fat),sweet:t(e.sweet)}}(e.serving))}function re(e,t){var n=Object(r.useReducer)(ee,te(e)),a=Object(i.a)(n,2),o=a[0],c=a[1],d=o.food;return{state:o,handleNameChange:function(e){c({type:"set-name",name:e})},handleServingChange:function(e,t){c(t>0?{type:"set-serving",foodGroup:e,serving:t}:{type:"unset-serving",foodGroup:e})},handleSubmit:function(e){var n=ne(d);!1===function(e){return!l.a.reduce(l.a.values(e),(function(e,t){return e||l.a.defaultTo(t,!1)}),!1)}(n)?(e.preventDefault(),e.stopPropagation(),c({type:"validation-failed",error:n})):(t(d),c({type:"reset"}),e.preventDefault())}}}var ae=function(e){var t=re(e.food,e.onAddFood),n=t.state,r=t.handleNameChange,a=t.handleServingChange,o=t.handleSubmit,c=n.food,i=n.error;return Object(g.jsxs)(T.a,{noValidate:!0,onSubmit:o,className:"border p-1",children:[Object(g.jsxs)(T.a.Group,{as:T.a.Row,controlId:"formFoodName",className:"ml-1 mr-1",children:[Object(g.jsx)(T.a.Label,{children:"Food name"}),Object(g.jsx)(T.a.Control,{type:"text",value:c.name,required:!0,placeholder:"Bread, broccoli, steak, hamburger...",isInvalid:i.foodName,onChange:function(e){return r(e.target.value)}}),Object(g.jsx)(T.a.Control.Feedback,{type:"invalid",children:"Please enter food name."})]}),Object(g.jsxs)(T.a.Group,{children:[Object(g.jsxs)(T.a.Label,{children:["Servings (Calories: ",D(c),")"]}),Object(g.jsxs)(T.a.Group,{controlId:"formServings",className:"border p-1",children:[Object(g.jsx)(X,{foodGroup:"vegetable",serving:c.serving,isInvalid:i.vegetable,onChange:a}),Object(g.jsx)(X,{foodGroup:"fruit",serving:c.serving,isInvalid:i.fruit,onChange:a}),Object(g.jsx)(X,{foodGroup:"carbohydrate",serving:c.serving,isInvalid:i.carbohydrate,onChange:a}),Object(g.jsx)(X,{foodGroup:"protein",serving:c.serving,isInvalid:i.protein,onChange:a}),Object(g.jsx)(X,{foodGroup:"fat",serving:c.serving,isInvalid:i.fat,onChange:a}),Object(g.jsx)(X,{foodGroup:"sweet",serving:c.serving,isInvalid:i.sweet,onChange:a})]})]}),Object(g.jsx)(v.a,{type:"submit",variant:"outline-primary",children:e.buttonLabel})," ",Object(g.jsx)(v.a,{variant:"outline-secondary",onClick:e.onCancel,children:"Cancel"})]})},oe=function(e){var t=e.mealIndex,n=Object(r.useContext)(S);return Object(g.jsx)(I.a.Item,{children:Object(g.jsx)(ae,{food:{name:"",serving:{}},buttonLabel:"Add",onAddFood:function(e){n(function(e,t){return{type:"add-food",mealIndex:e,food:t}}(t,e))},onCancel:function(){n(function(e){return{type:"cancel-add-food",mealIndex:e}}(t))}})})},ce=function(e){var t=e.food,n=t.name,r=t.serving;return Object(g.jsxs)("div",{className:"d-flex flex-fill",children:[Object(g.jsx)("div",{className:"mr-auto",children:n}),Object(g.jsxs)("div",{children:[Object(g.jsx)(Q,{foodGroup:"vegetable",serving:r}),Object(g.jsx)(Q,{foodGroup:"fruit",serving:r}),Object(g.jsx)(Q,{foodGroup:"carbohydrate",serving:r}),Object(g.jsx)(Q,{foodGroup:"protein",serving:r}),Object(g.jsx)(Q,{foodGroup:"fat",serving:r}),Object(g.jsx)(Q,{foodGroup:"sweet",serving:r})]})]})},ie=function(e){var t=e.food,n=e.mealIndex,a=e.foodIndex,o=Object(r.useContext)(S);return Object(g.jsx)(I.a.Item,{children:Object(g.jsx)(ae,{food:t,buttonLabel:"Update",onAddFood:function(e){o(function(e,t,n){return{type:"update-food",mealIndex:e,foodIndex:t,food:n}}(n,a,e)),o(f(n))},onCancel:function(){o(f(n))}})})},de=function(e){var t=e.foods,n=e.mealIndex,a=e.foodEditIndex,o=e.editState,c=Object(r.useContext)(S),i=t.map((function(e,t){return Object(g.jsxs)(r.Fragment,{children:[Object(g.jsxs)(I.a.Item,{className:"d-flex align-items-center",children:[Object(g.jsx)(ce,{food:e}),"edit"===o&&Object(g.jsx)(G,{editMode:t===a,onClick:function(){c(t===a?f(n):function(e,t){return{type:"enter-food-edit-mode",mealIndex:e,foodIndex:t}}(n,t))}})]}),"edit"===o&&t===a&&Object(g.jsx)(ie,{food:e,mealIndex:n,foodIndex:t})]},t)}));return Object(g.jsx)(r.Fragment,{children:i})},se=function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)(Q,{foodGroup:"vegetable",serving:e.serving,goal:e.goal}),Object(g.jsx)(Q,{foodGroup:"fruit",serving:e.serving,goal:e.goal}),Object(g.jsx)(Q,{foodGroup:"carbohydrate",serving:e.serving,goal:e.goal}),Object(g.jsx)(Q,{foodGroup:"protein",serving:e.serving,goal:e.goal}),Object(g.jsx)(Q,{foodGroup:"fat",serving:e.serving,goal:e.goal}),Object(g.jsx)(Q,{foodGroup:"sweet",serving:e.serving,goal:e.goal})]})};function le(e,t){return l.a.defaultTo(e,0)+l.a.defaultTo(t,0)}function ue(e,t){return{vegetable:le(e.vegetable,t.vegetable),fruit:le(e.fruit,t.fruit),carbohydrate:le(e.carbohydrate,t.carbohydrate),protein:le(e.protein,t.protein),fat:le(e.fat,t.fat),sweet:le(e.sweet,t.sweet)}}function je(e){return l.a.reduce(function(e){return l.a.map(e.foods,"serving")}(e),ue,{})}function fe(e){return l.a.reduce(l.a.map(e,je),ue,{})}function be(e,t){return l.a.defaultTo(e,0)-l.a.defaultTo(t,0)}function xe(e,t){return n=fe(e),r=t,{vegetable:be(n.vegetable,r.vegetable),fruit:be(n.fruit,r.fruit),carbohydrate:be(n.carbohydrate,r.carbohydrate),protein:be(n.protein,r.protein),fat:be(n.fat,r.fat),sweet:be(n.sweet,r.sweet)};var n,r}var ve=function(e){var t=e.state,n=e.mealIndex,a=e.editMode,o=t.meal,c=t.editState,i=t.foodEditIndex,d=o.mealTime,s=o.foods,u=L(o),j=Object(r.useContext)(S);return Object(g.jsxs)(C.a,{className:"mt-1",children:[Object(g.jsxs)(C.a.Header,{className:"d-flex align-items-center",children:[Object(g.jsx)("div",{className:"mr-auto",children:d}),Object(g.jsxs)("div",{children:[u," ","Cal."]}),Object(g.jsx)(se,{serving:je(o)}),a&&!l.a.isUndefined(c)&&Object(g.jsx)(w,{onClick:function(){return j(function(e){return{type:"delete-meal",mealIndex:e}}(n))}}),a&&Object(g.jsx)(G,{editMode:"edit"===c,onClick:function(){j("edit"===c?function(e){return{type:"exit-meal-edit-mode",mealIndex:e}}(n):function(e){return{type:"enter-meal-edit-mode",mealIndex:e}}(n))}})]}),Object(g.jsxs)(I.a,{children:[Object(g.jsx)(de,{foods:s,mealIndex:n,foodEditIndex:i,editState:c}),"edit"===c&&Object(g.jsx)(N,{mealIndex:n}),"add"===c&&Object(g.jsx)(oe,{mealIndex:n})]})]})},ge=function(e){return Object(g.jsxs)("div",{className:"d-flex flex-column flex-fill justify-content-center border rounded bg-info text-white text-center p-1",children:[Object(g.jsx)("div",{style:{fontSize:"40px",minWidth:"110px"},children:e.calories}),Object(g.jsx)("div",{children:"calories"})]})},Oe=function(e){var t=e.foodGroup,n={backgroundColor:q(t)};return Object(g.jsx)("div",{className:"border rounded text-center text-white font-weight-bold",style:n,children:t})},me=function(e){return Object(g.jsxs)("div",{className:"d-flex flex-column justify-content-end m-1",children:[Object(g.jsx)("div",{className:"text-center",style:{fontSize:"32px",minWidth:"110px"},children:e.amount}),Object(g.jsx)(Oe,{foodGroup:e.foodGroup})]})},pe=function(e){return Object(g.jsxs)("div",{className:"d-flex justify-content-between flex-fill flex-wrap",children:[Object(g.jsx)(me,{foodGroup:"vegetable",amount:e.serving.vegetable}),Object(g.jsx)(me,{foodGroup:"fruit",amount:e.serving.fruit}),Object(g.jsx)(me,{foodGroup:"carbohydrate",amount:e.serving.carbohydrate}),Object(g.jsx)(me,{foodGroup:"protein",amount:e.serving.protein}),Object(g.jsx)(me,{foodGroup:"fat",amount:e.serving.fat}),Object(g.jsx)(me,{foodGroup:"sweet",amount:e.serving.sweet})]})},he=function(e){return Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(ge,{calories:E(e.meals)}),Object(g.jsx)(pe,{serving:fe(e.meals)})]})},ye=function(e){var t=e.meals,n=e.target;return Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(ge,{calories:A(t,n.calorie)}),Object(g.jsx)(pe,{serving:xe(t,n.serving)})]})},Ce=function(e){var t=e.editMode,n=Object(r.useContext)(S);return Object(g.jsx)(G,{editMode:t,onClick:function(){return n(t?{type:"exit-edit-mode"}:{type:"enter-edit-mode"})}})},Ie=n(73),we=function(e){return Object(g.jsx)("span",{className:"text-white bg-info border rounded px-1",style:{fontSize:"24px"},children:e.calorie})},Ge=function(e){return Object(g.jsx)(v.a,{variant:"outline-secondary",onClick:e.onClick,children:"Change"})},Se=function(e){var t=e.targets.map((function(e){return Object(g.jsxs)(Ie.a.Item,{eventKey:e.calorie,children:[e.calorie," "," Cal.",Object(g.jsx)(se,{serving:e.serving,goal:!0})]})}));return Object(g.jsxs)(Ie.a,{onSelect:function(t){var n=l.a.toNumber(t),r=l.a.find(e.targets,{calorie:n});r&&e.onSelect(r)},children:[Object(g.jsx)(Ie.a.Toggle,{variant:"outline-info",id:"dropdown-goal",children:e.selectedCalorie}),Object(g.jsx)(Ie.a.Menu,{children:t})]})},Ne=function(e){var t=e.editMode,n=e.target,a=e.editTarget,o=t&&!a,c=Object(r.useContext)(S),i=a?Object(g.jsx)(Se,{selectedCalorie:n.calorie,targets:[B,R,H,J,U],onSelect:function(e){c(function(e){return{type:"change-target",target:e}}(e)),c({type:"exit-edit-target"})}}):Object(g.jsx)(we,{calorie:n.calorie});return Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"d-flex flex-nowrap  align-items-end",children:["Target:\xa0 ",i," \xa0Cal."]}),Object(g.jsx)(se,{serving:n.serving,goal:!0})]}),"\xa0",o&&Object(g.jsx)(Ge,{onClick:function(){return c({type:"enter-edit-target"})}})]})},ke=function(){var e=Object(r.useContext)(S);return Object(g.jsx)(v.a,{variant:"outline-danger",onClick:function(){return e({type:"new-day"})},children:"New Day"})},Te=function(e){var t=e.state,n=t.date,r=t.editMode,a=t.target,o=t.editTarget;return Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(g.jsx)(Ne,{target:a,editMode:r,editTarget:o}),Object(g.jsx)("h1",{className:"text-center",children:n}),Object(g.jsxs)("div",{children:[r&&Object(g.jsx)(ke,{})," ",Object(g.jsx)(Ce,{editMode:r})]})]})},Me=function(){var e=Object(r.useContext)(S);return Object(g.jsx)("div",{className:"p-2",children:Object(g.jsx)(O,{onClick:function(){return e({type:"new-meal"})}})})},Fe=function(e){var t=e.state,n=t.mealStates,r=t.editMode,a=t.target,o=l.a.map(n,(function(e,t){return Object(g.jsx)(ve,{mealIndex:t,state:e,editMode:r},t)})),c=l.a.map(n,"meal");return Object(g.jsxs)("div",{children:[Object(g.jsx)(Te,{state:e.state}),Object(g.jsx)("div",{className:"border rounded p-1",children:Object(g.jsxs)(u.a,{defaultActiveKey:"total",id:"tab-summary",variant:"pills",children:[Object(g.jsx)(j.a,{eventKey:"total",title:"Total",children:Object(g.jsx)(he,{meals:c})}),Object(g.jsx)(j.a,{eventKey:"difference",title:"Difference",children:Object(g.jsx)(ye,{meals:c,target:a})})]})}),o,r&&Object(g.jsx)(Me,{}),Object(g.jsx)(y,{})]})},De=n(50);function Le(){return{meal:{mealTime:(new Date).toLocaleTimeString(),foods:[]},editState:"add"}}function Ee(){return{date:(new Date).toLocaleDateString(),mealStates:[Le()],editMode:!0,target:W,editTarget:!1}}function Ae(e,t){switch(t.type){case"add-food":var n=t;return Object(k.a)(Object(k.a)({},e),{},{foods:[].concat(Object(De.a)(e.foods),[n.food])});case"update-food":return function(e,t){var n=l.a.clone(e.foods);return n[t.foodIndex]=t.food,Object(k.a)(Object(k.a)({},e),{},{foods:n})}(e,t);default:return e}}function Pe(e){if(e.editState){var t=l.a.clone(e);return l.a.unset(t,"editState"),t}return e}function ze(e,t){switch(t.type){case"add-food":case"update-food":return Object(k.a)(Object(k.a)({},e),{},{meal:Ae(e.meal,t)});case"enter-meal-edit-mode":return Object(k.a)(Object(k.a)({},e),{},{editState:"edit"});case"enter-meal-add-mode":return Object(k.a)(Object(k.a)({},e),{},{editState:"add"});case"enter-food-edit-mode":var n=t;return Object(k.a)(Object(k.a)({},e),{},{foodEditIndex:n.foodIndex});case"exit-food-edit-mode":var r=l.a.clone(e);return l.a.unset(r,"foodEditIndex"),r;case"cancel-add-food":case"exit-meal-edit-mode":case"exit-edit-mode":return Pe(e);default:return e}}function Ke(e,t){var n=t.mealIndex,r=l.a.clone(e),a=ze(r[n],t);return r[n]=a,r}function Be(e,t){return l.a.map(e,(function(e){return ze(e,t)}))}function Re(e,t){switch(t.type){case"new-day":return Ee();case"new-meal":return Object(k.a)(Object(k.a)({},e),{},{mealStates:l.a.concat(l.a.map(e.mealStates,Pe),Le())});case"delete-meal":return function(e,t){var n=t.mealIndex,r=l.a.filter(e.mealStates,(function(e,t){return t!==n}));return Object(k.a)(Object(k.a)({},e),{},{mealStates:r})}(e,t);case"enter-edit-mode":return Object(k.a)(Object(k.a)({},e),{},{editMode:!0});case"exit-edit-mode":return Object(k.a)(Object(k.a)({},e),{},{editMode:!1,mealStates:Be(e.mealStates,t),editTarget:!1});case"enter-edit-target":return Object(k.a)(Object(k.a)({},e),{},{editTarget:!0});case"exit-edit-target":return Object(k.a)(Object(k.a)({},e),{},{editTarget:!1});case"change-target":return Object(k.a)(Object(k.a)({},e),{},{target:t.target});case"enter-meal-edit-mode":case"enter-meal-add-mode":case"exit-meal-edit-mode":case"enter-food-edit-mode":case"exit-food-edit-mode":case"add-food":case"cancel-add-food":case"update-food":return Object(k.a)(Object(k.a)({},e),{},{mealStates:Ke(e.mealStates,t)});default:return e}}var He=function(){var e=Object(r.useReducer)(Re,Ee()),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(g.jsx)(d.a,{children:Object(g.jsx)(S.Provider,{value:a,children:Object(g.jsx)(Fe,{state:n})})})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(He,{})}),document.getElementById("root")),Je()}},[[65,1,2]]]);
//# sourceMappingURL=main.56f4613d.chunk.js.map