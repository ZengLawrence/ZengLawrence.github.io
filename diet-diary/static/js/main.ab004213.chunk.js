(this["webpackJsonpdiet-diary"]=this["webpackJsonpdiet-diary"]||[]).push([[0],{31:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),i=(n(30),n(31),n(11)),d=n(43),s=n(3),u=n.n(s);function l(e){return{type:"exit-food-edit-mode",mealIndex:e}}var j=n(22),f=n(21),b=n(47),x=n(1),m=function(e){return Object(x.jsx)(b.a,{variant:"outline-primary",onClick:e.onClick,children:Object(x.jsx)(f.a,{icon:j.a})})},v={vegetable:25,fruit:60,carbohydrate:70,protein:110,fat:45,sweet:75};function O(e){return u.a.get(v,e,0)}function p(e){return t=e.serving,u.a.sum(u.a.map(u.a.keys(t),(function(e){return O(e)*u.a.get(t,e,0)})));var t}function g(e){return u.a.sum(u.a.map(e.foods,p))}function h(e,t){return u.a.defaultTo(e,0)+u.a.defaultTo(t,0)}function y(e,t){return{vegetable:h(e.vegetable,t.vegetable),fruit:h(e.fruit,t.fruit),carbohydrate:h(e.carbohydrate,t.carbohydrate),protein:h(e.protein,t.protein),fat:h(e.fat,t.fat),sweet:h(e.sweet,t.sweet)}}function C(e){return u.a.reduce(function(e){return u.a.map(e.foods,"serving")}(e),y,{})}function I(e){return u.a.reduce(u.a.map(e,C),y,{})}var G={vegetable:"green",fruit:"teal",carbohydrate:"cyan",protein:"blue",fat:"orange",sweet:"red"};function w(e){return u.a.get(G,e,"")}var S=function(e){return Object(x.jsxs)("div",{className:"d-flex flex-column justify-content-center border rounded bg-info text-white text-center",children:[Object(x.jsx)("div",{style:{fontSize:"40px"},children:e.calories}),Object(x.jsx)("div",{children:"calories"})]})},N=function(e){var t=e.foodGroup,n={backgroundColor:w(t)};return Object(x.jsx)("div",{className:"text-center text-white font-weight-bold",style:n,children:t})},k=function(e){return Object(x.jsxs)("div",{className:"d-flex flex-column justify-content-end m-1",children:[Object(x.jsx)("div",{className:"text-center",style:{fontSize:"32px",minWidth:"110px"},children:e.amount}),Object(x.jsx)(N,{foodGroup:e.foodGroup})]})},F=function(e){return Object(x.jsxs)("div",{className:"d-flex justify-content-between flex-fill flex-wrap",children:[Object(x.jsx)(k,{foodGroup:"vegetable",amount:e.serving.vegetable}),Object(x.jsx)(k,{foodGroup:"fruit",amount:e.serving.fruit}),Object(x.jsx)(k,{foodGroup:"carbohydrate",amount:e.serving.carbohydrate}),Object(x.jsx)(k,{foodGroup:"protein",amount:e.serving.protein}),Object(x.jsx)(k,{foodGroup:"fat",amount:e.serving.fat}),Object(x.jsx)(k,{foodGroup:"sweet",amount:e.serving.sweet})]})};var M=function(e){return Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)(S,{calories:(t=e.meals,u.a.sum(u.a.map(t,g)))}),Object(x.jsx)(F,{serving:I(e.meals)})]});var t},L=function(e){var t=e.editMode?"Done":"Edit";return Object(x.jsx)(b.a,{variant:"outline-primary",onClick:e.onClick,children:t})},D=n(46),E=n(44),T=function(e){return Object(x.jsx)(b.a,{variant:"outline-danger",className:"mr-1",onClick:e.onClick,children:"Delete"})},A=a.a.createContext(null),P=n(41),z=function(e){var t=e.foodGroup,n=e.value,r={backgroundColor:w(t),fontFamily:"Arial Narrow, Arial, sans-serif"};return Object(x.jsx)(P.a,{className:"text-white m-1",style:r,children:n})},B=function(e){var t=e.foodGroup,n=e.serving,r=u.a.get(n,t);return Object(x.jsx)(z,{foodGroup:t,value:r})},R=function(e){var t=e.meal,n=C(t),a=g(t);return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsxs)("div",{className:"mr-1",children:[a," Cal."]}),Object(x.jsx)(B,{foodGroup:"vegetable",serving:n}),Object(x.jsx)(B,{foodGroup:"fruit",serving:n}),Object(x.jsx)(B,{foodGroup:"carbohydrate",serving:n}),Object(x.jsx)(B,{foodGroup:"protein",serving:n}),Object(x.jsx)(B,{foodGroup:"fat",serving:n}),Object(x.jsx)(B,{foodGroup:"sweet",serving:n})]})},H=function(e){var t=Object(r.useContext)(A);return Object(x.jsx)(E.a.Item,{children:Object(x.jsx)(m,{onClick:function(){return t({type:"enter-meal-add-mode",mealIndex:e.mealIndex})}})})};var J=n(7),U=n(45),_=n(42),q=n(23);var V=function(e){var t=e.foodGroup,n=e.isInvalid,a="formServing"+t,o=u.a.toString(O(t))+" Cal.",c=function(e){var t=e.foodGroup,n=e.serving,a=Object(r.useState)(u.a.get(n,t)||""),o=Object(i.a)(a,2),c=o[0],d=o[1];return Object(r.useEffect)((function(){d(u.a.get(n,t)||"")}),[t,n]),{servingStr:c,handleChange:function(n){var r=n.target.value;d(r),e.onChange(t,u.a.toNumber(r))}}}(e),d=c.servingStr,s=c.handleChange;return Object(x.jsxs)(U.a.Group,{as:_.a,controlId:a,children:[Object(x.jsxs)(U.a.Label,{column:!0,sm:4,children:[u.a.capitalize(t)," ",Object(x.jsx)(z,{foodGroup:t,value:o})]}),Object(x.jsxs)(q.a,{sm:2,children:[Object(x.jsx)(U.a.Control,{type:"text",value:d,isInvalid:n,onChange:s}),Object(x.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Good one!  Please enter a positive number."})]})]})};function W(e,t){return Object(J.a)(Object(J.a)({},e),{},{serving:u.a.set(e.serving,t.foodGroup,t.serving)})}function K(e,t){var n=e.serving;return u.a.unset(e.serving,t.foodGroup),Object(J.a)(Object(J.a)({},e),{},{serving:n})}function Q(e,t){return Object(J.a)(Object(J.a)({},e),{},{name:t.name})}function X(e,t){switch(t.type){case"set-name":return Object(J.a)(Object(J.a)({},e),{},{food:Q(e.food,t)});case"set-serving":return Object(J.a)(Object(J.a)({},e),{},{food:W(e.food,t)});case"unset-serving":return Object(J.a)(Object(J.a)({},e),{},{food:K(e.food,t)});case"reset":return Y({name:"",serving:{}});case"validation-failed":var n=t;return Object(J.a)(Object(J.a)({},e),{},{validated:!0,error:n.error});default:throw new Error}}function Y(e){return{food:e,error:{}}}function Z(e){return Object(J.a)({foodName:""===e.name},function(e){var t=function(e){return u.a.toNumber(e)<0};return{vegetable:t(e.vegetable),fruit:t(e.fruit),carbohydrate:t(e.carbohydrate),protein:t(e.protein),fat:t(e.fat),sweet:t(e.sweet)}}(e.serving))}function $(e,t){var n=Object(r.useReducer)(X,Y(e)),a=Object(i.a)(n,2),o=a[0],c=a[1],d=o.food;return{state:o,handleNameChange:function(e){c({type:"set-name",name:e})},handleServingChange:function(e,t){c(t>0?{type:"set-serving",foodGroup:e,serving:t}:{type:"unset-serving",foodGroup:e})},handleSubmit:function(e){var n=Z(d);!1===function(e){return!u.a.reduce(u.a.values(e),(function(e,t){return e||u.a.defaultTo(t,!1)}),!1)}(n)?(e.preventDefault(),e.stopPropagation(),c({type:"validation-failed",error:n})):(t(d),c({type:"reset"}),e.preventDefault())}}}var ee=function(e){var t=$(e.food,e.onAddFood),n=t.state,r=t.handleNameChange,a=t.handleServingChange,o=t.handleSubmit,c=n.food,i=n.error;return Object(x.jsxs)(U.a,{noValidate:!0,onSubmit:o,className:"border p-1",children:[Object(x.jsxs)(U.a.Group,{as:U.a.Row,controlId:"formFoodName",className:"ml-1 mr-1",children:[Object(x.jsx)(U.a.Label,{children:"Food name"}),Object(x.jsx)(U.a.Control,{type:"text",value:c.name,required:!0,placeholder:"Bread, broccoli, steak, hamburger...",isInvalid:i.foodName,onChange:function(e){return r(e.target.value)}}),Object(x.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Please enter food name."})]}),Object(x.jsxs)(U.a.Group,{children:[Object(x.jsxs)(U.a.Label,{children:["Servings (Calories: ",p(c),")"]}),Object(x.jsxs)(U.a.Group,{controlId:"formServings",className:"border p-1",children:[Object(x.jsx)(V,{foodGroup:"vegetable",serving:c.serving,isInvalid:i.vegetable,onChange:a}),Object(x.jsx)(V,{foodGroup:"fruit",serving:c.serving,isInvalid:i.fruit,onChange:a}),Object(x.jsx)(V,{foodGroup:"carbohydrate",serving:c.serving,isInvalid:i.carbohydrate,onChange:a}),Object(x.jsx)(V,{foodGroup:"protein",serving:c.serving,isInvalid:i.protein,onChange:a}),Object(x.jsx)(V,{foodGroup:"fat",serving:c.serving,isInvalid:i.fat,onChange:a}),Object(x.jsx)(V,{foodGroup:"sweet",serving:c.serving,isInvalid:i.sweet,onChange:a})]})]}),Object(x.jsx)(b.a,{type:"submit",variant:"outline-primary",children:e.buttonLabel})," ",Object(x.jsx)(b.a,{variant:"outline-secondary",onClick:e.onCancel,children:"Cancel"})]})},te=function(e){var t=e.mealIndex,n=Object(r.useContext)(A);return Object(x.jsx)(E.a.Item,{children:Object(x.jsx)(ee,{food:{name:"",serving:{}},buttonLabel:"Add",onAddFood:function(e){n(function(e,t){return{type:"add-food",mealIndex:e,food:t}}(t,e))},onCancel:function(){n(function(e){return{type:"cancel-add-food",mealIndex:e}}(t))}})})},ne=function(e){var t=e.food,n=t.name,r=t.serving;return Object(x.jsxs)("div",{className:"d-flex flex-fill",children:[Object(x.jsx)("div",{className:"mr-auto",children:n}),Object(x.jsxs)("div",{children:[Object(x.jsx)(B,{foodGroup:"vegetable",serving:r}),Object(x.jsx)(B,{foodGroup:"fruit",serving:r}),Object(x.jsx)(B,{foodGroup:"carbohydrate",serving:r}),Object(x.jsx)(B,{foodGroup:"protein",serving:r}),Object(x.jsx)(B,{foodGroup:"fat",serving:r}),Object(x.jsx)(B,{foodGroup:"sweet",serving:r})]})]})},re=function(e){var t=e.food,n=e.mealIndex,a=e.foodIndex,o=Object(r.useContext)(A);return Object(x.jsx)(E.a.Item,{children:Object(x.jsx)(ee,{food:t,buttonLabel:"Update",onAddFood:function(e){o(function(e,t,n){return{type:"update-food",mealIndex:e,foodIndex:t,food:n}}(n,a,e)),o(l(n))},onCancel:function(){o(l(n))}})})},ae=function(e){var t=e.foods,n=e.mealIndex,a=e.foodEditIndex,o=e.editState,c=Object(r.useContext)(A),i=t.map((function(e,t){return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsxs)(E.a.Item,{className:"d-flex align-items-center",children:[Object(x.jsx)(ne,{food:e}),"edit"===o&&Object(x.jsx)(L,{editMode:t===a,onClick:function(){c(t===a?l(n):function(e,t){return{type:"enter-food-edit-mode",mealIndex:e,foodIndex:t}}(n,t))}})]},t),"edit"===o&&t===a&&Object(x.jsx)(re,{food:e,mealIndex:n,foodIndex:t})]})}));return Object(x.jsx)(r.Fragment,{children:i})},oe=function(e){var t=e.state,n=e.mealIndex,a=e.editMode,o=t.meal,c=t.editState,i=t.foodEditIndex,d=o.mealTime,s=o.foods,l=Object(r.useContext)(A);return Object(x.jsxs)(D.a,{className:"mt-1",children:[Object(x.jsxs)(D.a.Header,{className:"d-flex align-items-center",children:[Object(x.jsx)("div",{className:"mr-auto",children:d}),Object(x.jsx)(R,{meal:o}),a&&!u.a.isUndefined(c)&&Object(x.jsx)(T,{onClick:function(){return l(function(e){return{type:"delete-meal",mealIndex:e}}(n))}}),a&&Object(x.jsx)(L,{editMode:"edit"===c,onClick:function(){l("edit"===c?function(e){return{type:"exit-meal-edit-mode",mealIndex:e}}(n):function(e){return{type:"enter-meal-edit-mode",mealIndex:e}}(n))}})]}),Object(x.jsxs)(E.a,{children:[Object(x.jsx)(ae,{foods:s,mealIndex:n,foodEditIndex:i,editState:c}),"edit"===c&&Object(x.jsx)(H,{mealIndex:n}),"add"===c&&Object(x.jsx)(te,{mealIndex:n})]})]})},ce=function(){var e=Object(r.useContext)(A);return Object(x.jsx)(b.a,{variant:"outline-danger",onClick:function(){return e({type:"new-day"})},children:"New Day"})},ie=function(){return Object(x.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://icons8.com/icons/set/healthy-food-calories-calculator",children:"Healthy Food Calories Calculator icon"})},de=function(){return Object(x.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://icons8.com",children:"Icons8"})},se=function(){return Object(x.jsxs)("p",{style:{fontSize:"smaller"},children:[Object(x.jsx)(ie,{})," icon by ",Object(x.jsx)(de,{})]})},ue=function(){return Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)(se,{})})},le=function(e){var t=e.editMode,n=Object(r.useContext)(A);return Object(x.jsx)(L,{editMode:t,onClick:function(){return n(t?{type:"exit-edit-mode"}:{type:"enter-edit-mode"})}})},je=function(){var e=Object(r.useContext)(A);return Object(x.jsx)("div",{className:"p-2",children:Object(x.jsx)(m,{onClick:function(){return e({type:"new-meal"})}})})},fe=function(e){var t=e.state,n=t.date,r=t.mealStates,a=t.editMode,o=u.a.map(r,(function(e,t){return Object(x.jsx)(oe,{mealIndex:t,state:e,editMode:a},t)}));return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{}),Object(x.jsx)("h1",{className:"text-center",children:n}),Object(x.jsxs)("div",{children:[a&&Object(x.jsx)(ce,{})," ",Object(x.jsx)(le,{editMode:a})]})]}),Object(x.jsx)(M,{meals:u.a.map(r,"meal")}),o,a&&Object(x.jsx)(je,{}),Object(x.jsx)(ue,{})]})},be=n(24);function xe(){return{meal:{mealTime:(new Date).toLocaleTimeString(),foods:[]},editState:"add"}}function me(){return{date:(new Date).toLocaleDateString(),mealStates:[xe()],editMode:!0}}function ve(e,t){switch(t.type){case"add-food":var n=t;return Object(J.a)(Object(J.a)({},e),{},{foods:[].concat(Object(be.a)(e.foods),[n.food])});case"update-food":return function(e,t){var n=u.a.clone(e.foods);return n[t.foodIndex]=t.food,Object(J.a)(Object(J.a)({},e),{},{foods:n})}(e,t);default:return e}}function Oe(e){if(e.editState){var t=u.a.clone(e);return u.a.unset(t,"editState"),t}return e}function pe(e,t){switch(t.type){case"add-food":case"update-food":return Object(J.a)(Object(J.a)({},e),{},{meal:ve(e.meal,t)});case"enter-meal-edit-mode":return Object(J.a)(Object(J.a)({},e),{},{editState:"edit"});case"enter-meal-add-mode":return Object(J.a)(Object(J.a)({},e),{},{editState:"add"});case"enter-food-edit-mode":var n=t;return Object(J.a)(Object(J.a)({},e),{},{foodEditIndex:n.foodIndex});case"exit-food-edit-mode":var r=u.a.clone(e);return u.a.unset(r,"foodEditIndex"),r;case"cancel-add-food":case"exit-meal-edit-mode":case"exit-edit-mode":return Oe(e);default:return e}}function ge(e,t){var n=t.mealIndex,r=u.a.clone(e),a=pe(r[n],t);return r[n]=a,r}function he(e,t){return u.a.map(e,(function(e){return pe(e,t)}))}function ye(e,t){switch(t.type){case"new-day":return me();case"new-meal":return Object(J.a)(Object(J.a)({},e),{},{mealStates:u.a.concat(u.a.map(e.mealStates,Oe),xe())});case"delete-meal":return function(e,t){var n=t.mealIndex,r=u.a.filter(e.mealStates,(function(e,t){return t!==n}));return Object(J.a)(Object(J.a)({},e),{},{mealStates:r})}(e,t);case"enter-edit-mode":return Object(J.a)(Object(J.a)({},e),{},{editMode:!0});case"exit-edit-mode":return Object(J.a)(Object(J.a)({},e),{},{editMode:!1,mealStates:he(e.mealStates,t)});case"enter-meal-edit-mode":case"enter-meal-add-mode":case"exit-meal-edit-mode":case"enter-food-edit-mode":case"exit-food-edit-mode":case"add-food":case"cancel-add-food":case"update-food":return Object(J.a)(Object(J.a)({},e),{},{mealStates:ge(e.mealStates,t)});default:return e}}var Ce=function(){var e=Object(r.useReducer)(ye,me()),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(x.jsx)(d.a,{children:Object(x.jsx)(A.Provider,{value:a,children:Object(x.jsx)(fe,{state:n})})})},Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Ce,{})}),document.getElementById("root")),Ie()}},[[40,1,2]]]);
//# sourceMappingURL=main.ab004213.chunk.js.map